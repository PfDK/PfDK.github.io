function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _readOnlyError(a){throw new Error('"'+a+'" is read-only')}function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function receiveMessage(a){return}function uobAddComponents(){onElementRendered("#content .user_content.enhanced,#content .show-content.enhanced",function(a){var b=/\[(.*?)\]\((.*?)\)/g;a.first().html(a.first().html().replace(b,'<span class="tooltip tooltip-underline">$1<span class="tooltiptext">$2</span></span>'));var c=a.find("table:hidden").not("td:first(:contains('[uob-'))");for(c.show(),g=0;g<10&&(d=a.find("table").has("table > tbody > tr > td:contains([uob-accordion])").last(),1==d.length);g++)d.before("<div class='uob-accordions'></div>"),d.find("tbody:first > tr:gt(0) > td").each(function(a,b){(a+1)%2&&(d.prev().append('<button class="uob-accordion"><i class="uob-arrow-down"></i></button>'),d.prev().children().last().append($(b).text().trim())),a%2&&(d.prev().append('<div class="uob-accordion-panel"></div>'),d.prev().children().last().append($(b).contents()))}),d.remove();for(strSetNum=0,g=0;g<10&&(d=a.find("table").has("table > tbody > tr > td:contains([uob-tabs])").last(),1==d.length);g++)d.before("<div class='uob-tabs'><ul></ul></div>"),strSetNum++,d.find("tbody:first > tr:gt(0) > td").each(function(a,b){var c="set"+strSetNum+"tab"+(a-a%2)/2;if((a+1)%2){var e='<li><a href="#'+c+'">'+$(b).text().trim()+"</a></li>";d.prev().find("ul").first().append(e)}a%2&&(d.prev().append('<div id="'+c+'"></div>'),$("#"+c).append($(b).contents()))}),d.remove();for(strSetNum=0,g=0;g<10;g++){var d=a.find("table").has("table > tbody > tr > td:contains([uob-reveal])").last();if(1!=d.length)break;strSetNum++,d.find("tbody:first > tr:gt(0) > td").each(function(a,b){var c="set"+strSetNum+"reveal"+(a-a%2)/2;(a+1)%2&&(d.before('<p><a href="#'+c+'" class="uob-reveal-button"></a></p>'),d.prev().children().append($(b).text().trim())),a%2&&(d.before('<div id="'+c+'" class="uob-reveal-content"></div>'),d.prev().append($(b).contents()))}),d.remove()}for(strSetNum=0,g=0;g<10;g++){var d=a.find("table").has("table > tbody > tr > td:contains([uob-regexp])").last();if(1!=d.length)break;strSetNum++;var e="RE"+strSetNum,f='<p><input id="input'+e+'" class="uob-regexp-input" type="text" size="40" />&nbsp;<a href="#'+e+'" id="button'+e+'" class="uob-regexp-button">Check Answer</a></p>';f+="<div id='content"+e+"'></div>",d.before(f),d.find("tbody:first > tr:gt(0) > td").each(function(a,b){var c=$(b).html(),d=(a-a%2)/2;(a+1)%2&&(c=$(b).text().trim(),$("#button"+e).attr("regexp"+d,c)),a%2&&(f='<div id="data'+e+"ID"+d+'" class="uob-regexp-content"></div>',$("#content"+e).append(f),$("#data"+e+"ID"+d).append($(b).contents()))}),$("#button"+e).attr("regexpInput","input"+e),$("#input"+e).attr("regexpButton","button"+e),$("#button"+e).attr("regexpData","data"+e+"ID0"),$("#button"+e).attr("regexpDataRoot","data"+e+"ID"),d.remove()}var g,h=document.getElementsByClassName("uob-accordion");for(g=0;g<h.length;g++)h[g].addEventListener("click",function(){this.classList.toggle("active"),this.firstElementChild.classList.toggle("active");var a=this.nextElementSibling;a.classList.toggle("active"),a.style.maxHeight?a.style.maxHeight=null:a.style.maxHeight=a.scrollHeight+"px"});var i=a.find(".uob-tabs");i.length>0&&i.tabs({active:0,collapsible:!1,heightStyle:"content",beforeActivate:function(a,b){b.oldPanel.find(".hide_youtube_embed_link").click()}});var j=a.find(".uob-reveal");if(j.length)for(g=0;g<j.length;g++){var k=j[g].href,l=k.lastIndexOf("#");l>=0&&$(k.slice(l+1)).css("display","none")}var m=a.find(".uob-reveal-button");m.length&&m.button({icons:{secondary:"ui-icon-triangle-1-e"}}).click(function(a){var b,c=$(this),d=c.attr("href");return"none"!=$(d).css("display")?($(d).slideUp(400),$(d).find(".hide_youtube_embed_link").click(),b={icons:{secondary:"ui-icon-triangle-1-e"}}):($(d).slideDown(400),b={icons:{secondary:"ui-icon-triangle-1-s"}}),c.button("option",b),!1});var n=a.find(".uob-regexp-input");n.length&&n.focus(function(a){var b=$(this),c=$("#"+b.attr("regexpButton")),d=c.attr("regexpData");c.attr("regexpDataRoot");if(""!=d){var e,f=$("#"+d);"none"!=f.css("display")&&(f.slideUp(400),f.find(".hide_youtube_embed_link").click(),e={icons:{secondary:"ui-icon-triangle-1-e"}},c.button("option",e),c.attr("regexpData",""))}});var o=a.find(".uob-regexp-button");o.length&&o.button({icons:{secondary:"ui-icon-triangle-1-e"}}).click(function(a){var b=$(this),c=$("#"+b.attr("regexpInput")),d=b.attr("regexpData"),e=b.attr("regexpDataRoot");""==d&&(d=e+"0");var f,h=$("#"+d);if("none"==h.css("display")){var i=c.val();for(g=0;g<100;g++){var j=b.attr("regexp"+g);if(void 0==j||0==j.length)break;var k=new RegExp("^"+j.trim()+"$");if("default"==j||k.test(i)){b.attr("regexpData",""+e+g),h=$("#"+e+g);break}}return h.slideDown(400),f={icons:{secondary:"ui-icon-triangle-1-s"}},b.button("option",f),!1}h.slideUp(400),f={icons:{secondary:"ui-icon-triangle-1-e"}},b.button("option",f),b.attr("regexpData","")});var p=a.find("table").has("table > tbody > tr > td:contains([uob-rating])");if(p.length){p.remove();var q=!1;hasAnyRole("teacher","admin",function(){q=!0});var r="?page_loc="+encodeURIComponent(location.pathname);r+="&page_title="+encodeURIComponent(document.title),r+="&user_id="+ENV.current_user_id,r+="&user_name="+encodeURIComponent(ENV.current_user.display_name);var s='<iframe src="https://www.vampire.bham.ac.uk/canvas/rating.aspx'+r+'" width="100%" height="32"></iframe>';s="<div id='uob-rating-container-x'>"+s+"</div>",a.append(s)}aBoxTags=["uob-tip","pfdk-tips","uob-read","pfdk-les","uob-info","pfdk-info","uob-warning","pfdk-advarsel","uob-header","uob-question","pfdk-spsm","uob-quote","pfdk-sitat","uob-box","pfdk-boks","pfdk-info","pfdk-maal","pfdk-important","pfdk-viktig","pfdk-tid","pfdk-verktoy","udir-skoleleder"];for(var g=0;g<aBoxTags.length;g++){var t=aBoxTags[g],u=a.find("table").has("table > tbody > tr > td:contains(["+t+"])");u.length&&u.each(function(a,b){d=$(b),"uob-header"==t?d.before('<h2 class="'+t+'"></h2>'):"uob-quote"==t?d.before('<div class="'+t+'"><div class="uob-quote99" /></div>'):d.before('<div class="'+t+'"></div>'),d.prev().append(d.find("tr:eq(1) > td:eq(0)").contents()),d.remove()})}a.find(".instructure_file_link_holder.link_holder").has("a").each(function(a,b){var c=($(b),$(b).find("a").filter(":first")),d=c.attr("href")||"";if(($(b).find(".instructure_scribd_file_holder").length||0)>0&&(d=""),d.length>0){var e=d.split("/")[0==d.indexOf("/courses")?4:6];$.get("/api/v1/files/"+e,function(b){if(1===$.isPreviewable(b["content-type"],"google")){var e=b.display_name,f=$(document.createElement("a")).attr("href","javascript:uobShowPreviewDocument("+a+")").attr("title","Preview "+e).attr("id","uobPreview"+a).data("href2",d),g=$(document.createElement("img")).attr("src","/images/preview.png").attr("alt","Preview "+e);f.append(g),c.after(f)}})}});var v=$(document.createElement("div")).attr("id","uob-components-loaded");a.append(v),onElementMissing("#uob-components-loaded",function(a){uobAddComponents()})})}function uobShowPreviewDocument(a){var b=$("#uobPreview"+a),c=b.prev("span.link_holder");0==c.length&&(c=b.parent("span.link_holder")),c.length&&(c.append(b),b.attr("href",b.data("href2")).addClass("scribd_file_preview_link").click())}function onPage(a,b){location.pathname.match(a)&&b()}function hasAnyRole(){var a=[].slice.call(arguments,0),b=a.pop();if("object"!=("undefined"==typeof ENV?"undefined":_typeof(ENV)))return b(!1);if("object"!=_typeof(ENV.current_user_roles))return b(!1);if(null==ENV.current_user_roles)return b(!1);for(var c=0;c<a.length;c++)if(-1!==ENV.current_user_roles.indexOf(a[c]))return b(!0);return b(!1)}function isUser(a,b){b(ENV.current_user_id==a)}function onElementRendered(a,b,c){var d=$(a);if(c=++c||1,d.length)return b(d);c>=60||setTimeout(function(){onElementRendered(a,b,c)},200)}function onElementMissing(a,b){var c=$(a);if(!c.length)return b(c);setTimeout(function(){onElementMissing(a,b)},700)}function getQueryVariable(a){for(var b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]==a)return e[1]}return!1}var _this6=this;!function(){if(window.postMessage&&window.addEventListener&&!window.h5pResizerInitialized){window.h5pResizerInitialized=!0;var a={};a.hello=function(a,b,c){a.style.width="100%";var d=function b(d){a.contentWindow?c("resize"):window.removeEventListener("resize",b)};window.addEventListener("resize",d,!1),c("hello")},a.prepareResize=function(a,b,c){a.clientHeight===b.scrollHeight&&b.scrollHeight===b.clientHeight||(a.style.height=b.clientHeight+"px",c("resizePrepared"))},a.resize=function(a,b,c){a.style.height=b.scrollHeight+"px"};window.addEventListener("message",function(b){if("h5p"===b.data.context){for(var c,d=document.getElementsByTagName("iframe"),e=0;e<d.length;e++)if(d[e].contentWindow===b.source){c=d[e];break}c&&a[b.data.action]&&a[b.data.action](c,b.data,function(a,c){void 0===c&&(c={}),c.action=a,c.context="h5p",b.source.postMessage(c,b.origin)})}},!1);for(var b=document.getElementsByTagName("iframe"),c={context:"h5p",action:"ready"},d=0;d<b.length;d++)-1!==b[d].src.indexOf("h5p")&&b[d].contentWindow.postMessage(c,"*")}}();var Handlebars=function(){var a=function(){"use strict";function a(a){this.string=a}return a.prototype.toString=function(){return""+this.string},a}(),b=function(a){"use strict";function b(a){return h[a]||"&amp;"}function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function d(a){return a instanceof g?a.toString():a||0===a?(a=""+a,j.test(a)?a.replace(i,b):a):""}function e(a){return!a&&0!==a||!(!m(a)||0!==a.length)}var f={},g=a,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,j=/[&<>"'`]/;f.extend=c;var k=Object.prototype.toString;f.toString=k;var l=function(a){return"function"==typeof a};l(/x/)&&(l=function(a){return"function"==typeof a&&"[object Function]"===k.call(a)});var l;f.isFunction=l;var m=Array.isArray||function(a){return!(!a||"object"!==_typeof(a))&&"[object Array]"===k.call(a)};return f.isArray=m,f.escapeExpression=d,f.isEmpty=e,f}(a),c=function(){"use strict";function a(a,c){var d;c&&c.firstLine&&(d=c.firstLine,a+=" - "+d+":"+c.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<b.length;f++)this[b[f]]=e[b[f]];d&&(this.lineNumber=d,this.column=c.firstColumn)}var b=["description","fileName","lineNumber","message","name","number","stack"];return a.prototype=new Error,a}(),d=function(a,b){"use strict";function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper("helperMissing",function(a){if(2!==arguments.length)throw new h("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse||function(){},e=c.fn;return k(b)&&(b=b.call(this)),!0===b?e(this):!1===b||null==b?d(this):j(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper("each",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g="";if(k(a)&&(a=a.call(this)),b.data&&(c=o(b.data)),a&&"object"===_typeof(a))if(j(a))for(var h=a.length;f<h;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper("if",function(a,b){return k(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers.if.call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){if(k(a)&&(a=a.call(this)),!g.isEmpty(a))return b.fn(a)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function e(a,b){n.log(a,b)}var f={},g=a,h=b;f.VERSION="1.3.0",f.COMPILER_REVISION=4;var i={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};f.REVISION_CHANGES=i;var j=g.isArray,k=g.isFunction,l=g.toString,m="[object Object]";f.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:n,log:e,registerHelper:function(a,b,c){if(l.call(a)===m){if(c||b)throw new h("Arg not supported with multiple helpers");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){l.call(a)===m?g.extend(this.partials,a):this.partials[a]=b}};var n={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(n.level<=a){var c=n.methodMap[a];"undefined"!=typeof console&&console[c]&&console[c].call(console,b)}}};f.logger=n,f.log=e;var o=function(a){var b={};return g.extend(b,a),b};return f.createFrame=o,f}(b,c),e=function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(b<c){var d=n[c],e=n[b];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new l("No environment passed to template");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new l("The partial "+c+" could not be compiled when running in runtime-only mode")},d={escapeExpression:k.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},k.extend(c,b),k.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new l("The partial "+b+" could not be found");if(a instanceof Function)return a(c,g)}function i(){return""}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES;return j.checkRevision=d,j.template=e,j.programWithDepth=f,j.program=g,j.invokePartial=h,j.noop=i,j}(b,c,d),f=function(a,b,c,d,e){"use strict";var f=a,g=b,h=c,i=d,j=e,k=function(){var a=new f.HandlebarsEnvironment;return i.extend(a,f),a.SafeString=g,a.Exception=h,a.Utils=i,a.VM=j,a.template=function(b){return j.template(b,a)},a},l=k();return l.create=k,l}(d,a,c,b,e),g=function(a){"use strict";function b(a){a=a||{},this.firstLine=a.first_line,this.firstColumn=a.first_column,this.lastColumn=a.last_column,this.lastLine=a.last_line}var c=a,d={ProgramNode:function(a,c,e,f){var g,h;3===arguments.length?(f=e,e=null):2===arguments.length&&(f=c,c=null),b.call(this,f),this.type="program",this.statements=a,this.strip={},e?(h=e[0],h?(g={first_line:h.firstLine,last_line:h.lastLine,last_column:h.lastColumn,first_column:h.firstColumn},this.inverse=new d.ProgramNode(e,c,g)):this.inverse=new d.ProgramNode(e,c),this.strip.right=c.left):c&&(this.strip.left=c.right)},MustacheNode:function(a,c,e,f,g){if(b.call(this,g),this.type="mustache",this.strip=f,null!=e&&e.charAt){var h=e.charAt(3)||e.charAt(2);this.escaped="{"!==h&&"&"!==h}else this.escaped=!!e;a instanceof d.SexprNode?this.sexpr=a:this.sexpr=new d.SexprNode(a,c),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(a,c,d){b.call(this,d),this.type="sexpr",this.hash=c;var e=this.id=a[0],f=this.params=a.slice(1),g=this.eligibleHelper=e.isSimple;this.isHelper=g&&(f.length||c)},PartialNode:function(a,c,d,e){b.call(this,e),this.type="partial",this.partialName=a,this.context=c,this.strip=d},BlockNode:function(a,d,e,f,g){if(b.call(this,g),a.sexpr.id.original!==f.path.original)throw new c(a.sexpr.id.original+" doesn't match "+f.path.original,this);this.type="block",this.mustache=a,this.program=d,this.inverse=e,this.strip={left:a.strip.left,right:f.strip.right},(d||e).strip.left=a.strip.right,(e||d).strip.right=f.strip.left,e&&!d&&(this.isInverse=!0)},ContentNode:function(a,c){b.call(this,c),this.type="content",this.string=a},HashNode:function(a,c){b.call(this,c),this.type="hash",this.pairs=a},IdNode:function(a,d){b.call(this,d),this.type="ID";for(var e="",f=[],g=0,h=0,i=a.length;h<i;h++){var j=a[h].part;if(e+=(a[h].separator||"")+j,".."===j||"."===j||"this"===j){if(f.length>0)throw new c("Invalid path: "+e,this);".."===j?g++:this.isScoped=!0}else f.push(j)}this.original=e,this.parts=f,this.string=f.join("."),this.depth=g,this.isSimple=1===a.length&&!this.isScoped&&0===g,this.stringModeValue=this.string},PartialNameNode:function(a,c){b.call(this,c),this.type="PARTIAL_NAME",this.name=a.original},DataNode:function(a,c){b.call(this,c),this.type="DATA",this.id=a},StringNode:function(a,c){b.call(this,c),this.type="STRING",this.original=this.string=this.stringModeValue=a},IntegerNode:function(a,c){b.call(this,c),this.type="INTEGER",this.original=this.integer=a,this.stringModeValue=Number(a)},BooleanNode:function(a,c){b.call(this,c),this.type="BOOLEAN",this.bool=a,this.stringModeValue="true"===a},CommentNode:function(a,c){b.call(this,c),this.type="comment",this.comment=a}};return d}(c),h=function(){"use strict";return function(){function a(a,b){return{left:"~"===a.charAt(2),right:"~"===b.charAt(0)||"~"===b.charAt(1)}}function b(){this.yy={}}var c={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(b,c,d,e,f,g,h){var i=g.length-1;switch(f){case 1:return new e.ProgramNode(g[i-1],this._$);case 2:return new e.ProgramNode([],this._$);case 3:this.$=new e.ProgramNode([],g[i-1],g[i],this._$);break;case 4:this.$=new e.ProgramNode(g[i-2],g[i-1],g[i],this._$);break;case 5:this.$=new e.ProgramNode(g[i-1],g[i],[],this._$);break;case 6:this.$=new e.ProgramNode(g[i],this._$);break;case 7:case 8:this.$=new e.ProgramNode([],this._$);break;case 9:this.$=[g[i]];break;case 10:g[i-1].push(g[i]),this.$=g[i-1];break;case 11:this.$=new e.BlockNode(g[i-2],g[i-1].inverse,g[i-1],g[i],this._$);break;case 12:this.$=new e.BlockNode(g[i-2],g[i-1],g[i-1].inverse,g[i],this._$);break;case 13:case 14:this.$=g[i];break;case 15:this.$=new e.ContentNode(g[i],this._$);break;case 16:this.$=new e.CommentNode(g[i],this._$);break;case 17:case 18:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 19:this.$={path:g[i-1],strip:a(g[i-2],g[i])};break;case 20:case 21:this.$=new e.MustacheNode(g[i-1],null,g[i-2],a(g[i-2],g[i]),this._$);break;case 22:this.$=new e.PartialNode(g[i-2],g[i-1],a(g[i-3],g[i]),this._$);break;case 23:this.$=a(g[i-1],g[i]);break;case 24:this.$=new e.SexprNode([g[i-2]].concat(g[i-1]),g[i],this._$);break;case 25:this.$=new e.SexprNode([g[i]],null,this._$);break;case 26:this.$=g[i];break;case 27:this.$=new e.StringNode(g[i],this._$);break;case 28:this.$=new e.IntegerNode(g[i],this._$);break;case 29:this.$=new e.BooleanNode(g[i],this._$);break;case 30:this.$=g[i];break;case 31:g[i-1].isHelper=!0,this.$=g[i-1];break;case 32:this.$=new e.HashNode(g[i],this._$);break;case 33:this.$=[g[i-2],g[i]];break;case 34:this.$=new e.PartialNameNode(g[i],this._$);break;case 35:this.$=new e.PartialNameNode(new e.StringNode(g[i],this._$),this._$);break;case 36:this.$=new e.PartialNameNode(new e.IntegerNode(g[i],this._$));break;case 37:this.$=new e.DataNode(g[i],this._$);break;case 38:this.$=new e.IdNode(g[i],this._$);break;case 39:g[i-2].push({part:g[i],separator:g[i-1]}),this.$=g[i-2];break;case 40:this.$=[{part:g[i]}];break;case 43:this.$=[];break;case 44:g[i-1].push(g[i]);break;case 47:this.$=[g[i]];break;case 48:g[i-1].push(g[i])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:(null!==n&&void 0!==n||(n=b()),q=g[p]&&g[p][n]),void 0===q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),void 0!==(r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f)))return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},d=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];return this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a,a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(!(c=this._input.match(this.rules[f[g]]))||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return void 0!==a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){
return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return e(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return e(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return b.yytext=e(1,2).replace(/\\"/g,'"'),32;case 24:return b.yytext=e(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:case 27:return 34;case 28:return 33;case 29:return 40;case 30:return b.yytext=e(1,2),40;case 31:return"INVALID";case 32:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},a}();return c.lexer=d,b.prototype=c,c.Parser=b,new b}()}(),i=function(a,b){"use strict";function c(a){return a.constructor===f.ProgramNode?a:(e.yy=f,e.parse(a))}var d={},e=a,f=b;return d.parser=e,d.parse=c,d}(h,g),j=function(a){"use strict";function b(){}function c(a,b,c){if(null==a||"string"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new f("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);"data"in(b=b||{})||(b.data=!0);var d=c.parse(a),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function d(a,b,c){function d(){var d=c.parse(a),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}if(null==a||"string"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new f("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);"data"in(b=b||{})||(b.data=!0);var e;return function(a,b){return e||(e=d()),e.call(this,a,b)}}var e={},f=a;return e.Compiler=b,b.prototype={compiler:b,disassemble:function(){for(var a,b,c,d=this.opcodes,e=[],f=0,g=d.length;f<g;f++)if(a=d[f],"DECLARE"===a.opcode)e.push("DECLARE "+a.name+"="+a.value);else{b=[];for(var h=0;h<a.args.length;h++)c=a.args[h],"string"==typeof c&&(c='"'+c.replace("\n","\\n")+'"'),b.push(c);e.push(a.opcode+" "+b.join(" "))}return e.join("\n")},equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;c<b;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||d.args.length!==e.args.length)return!1;for(var f=0;f<d.args.length;f++)if(d.args[f]!==e.args[f])return!1}if(b=this.children.length,a.children.length!==b)return!1;for(c=0;c<b;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=b;var c=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.accept(a)},accept:function(a){var b,c=a.strip||{};return c.left&&this.opcode("strip"),b=this[a.type](a),c.right&&this.opcode("strip"),b},program:function(a){for(var b=a.statements,c=0,d=b.length;c<d;c++)this.accept(b[c]);return this.isSimple=1===d,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b,c=(new this.compiler).compile(a,this.options),d=this.guid++;this.usePartial=this.usePartial||c.usePartial,this.children[d]=c;for(var e=0,f=c.depths.list.length;e<f;e++)(b=c.depths.list[e])<2||this.addDepth(b-1);return d},block:function(a){var b=a.mustache,c=a.program,d=a.inverse;c&&(c=this.compileProgram(c)),d&&(d=this.compileProgram(d));var e=b.sexpr,f=this.classifySexpr(e);"helper"===f?this.helperSexpr(e,c,d):"simple"===f?(this.simpleSexpr(e),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(e,c,d),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(a){var b,c,d=a.pairs;this.opcode("pushHash");for(var e=0,f=d.length;e<f;e++)b=d[e],c=b[1],this.options.stringParams?(c.depth&&this.addDepth(c.depth),this.opcode("getContext",c.depth||0),this.opcode("pushStringParam",c.stringModeValue,c.type),"sexpr"===c.type&&this.sexpr(c)):this.accept(c),this.opcode("assignToHash",b[0]);this.opcode("popHash")},partial:function(a){var b=a.partialName;this.usePartial=!0,a.context?this.ID(a.context):this.opcode("push","depth0"),this.opcode("invokePartial",b.name),this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){this.sexpr(a.sexpr),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(a,b,c){var d=a.id,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.id;"DATA"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode("getContext",b.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.id.parts[0];if(this.options.knownHelpers[e])this.opcode("invokeKnownHelper",d.length,e);else{if(this.options.knownHelpersOnly)throw new f("You specified knownHelpersOnly, but used the unknown helper "+e,a);this.opcode("invokeHelper",d.length,e,a.isRoot)}},sexpr:function(a){var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ID:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth),a.parts[0]?this.opcode("lookupOnContext",a.parts[0]):this.opcode("pushContext");for(var b=1,c=a.parts.length;b<c;b++)this.opcode("lookup",a.parts[b])},DATA:function(a){if(this.options.data=!0,a.id.isScoped||a.id.depth)throw new f("Scoped data references are not supported: "+a.original,a);this.opcode("lookupData");for(var b=a.id.parts,c=0,d=b.length;c<d;c++)this.opcode("lookup",b[c])},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("pushLiteral",a.integer)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:[].slice.call(arguments,1)})},declare:function(a,b){this.opcodes.push({opcode:"DECLARE",name:a,value:b})},addDepth:function(a){0!==a&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},classifySexpr:function(a){var b=a.isHelper,c=a.eligibleHelper,d=this.options;if(c&&!b){var e=a.id.parts[0];d.knownHelpers[e]?b=!0:d.knownHelpersOnly&&(c=!1)}return b?"helper":c?"ambiguous":"simple"},pushParams:function(a){for(var b,c=a.length;c--;)b=a[c],this.options.stringParams?(b.depth&&this.addDepth(b.depth),this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.stringModeValue,b.type),"sexpr"===b.type&&this.sexpr(b)):this[b.type](b)},setupFullMustacheParams:function(a,b,c){var d=a.params;return this.pushParams(d),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.hash(a.hash):this.opcode("emptyHash"),d}},e.precompile=c,e.compile=d,e}(c),k=function(a,b){"use strict";function c(a){this.value=a}function d(){}var e=a.COMPILER_REVISION,f=a.REVISION_CHANGES,g=a.log,h=b;d.prototype={nameLookup:function(a,b){var c,e;return 0===a.indexOf("depth")&&(c=!0),e=/^[0-9]+$/.test(b)?a+"["+b+"]":d.isValidJavaScriptVariableName(b)?a+"."+b:a+"['"+b+"']",c?"("+a+" && "+e+")":e},compilerInfo:function(){var a=e;return"this.compilerInfo = ["+a+",'"+f[a]+"'];\n"},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":{appendToBuffer:!0,content:a,toString:function(){return"buffer += "+a+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(a,b,c,d){this.environment=a,this.options=b||{},g("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!c,this.context=c||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(a,b);var e,f=a.opcodes;this.i=0;for(var i=f.length;this.i<i;this.i++)e=f[this.i],"DECLARE"===e.opcode?this[e.name]=e.value:this[e.opcode].apply(this,e.args),e.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new h("Compile completed with content left on stack");return this.createFunctionContext(d)},preamble:function(){var a=[];if(this.isChild)a.push("");else{var b=this.namespace,c="helpers = this.merge(helpers, "+b+".helpers);";this.environment.usePartial&&(c=c+" partials = this.merge(partials, "+b+".partials);"),this.options.data&&(c+=" data = data || {};"),a.push(c)}this.environment.isSimple?a.push(""):a.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=a},createFunctionContext:function(a){var b=this.stackVars.concat(this.registers.list);if(b.length>0&&(this.source[1]=this.source[1]+", "+b.join(", ")),!this.isChild)for(var c in this.context.aliases)this.context.aliases.hasOwnProperty(c)&&(this.source[1]=this.source[1]+", "+c+"="+this.context.aliases[c]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var d=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],e=0,f=this.environment.depths.list.length;e<f;e++)d.push("depth"+this.environment.depths.list[e]);var h=this.mergeSource();if(this.isChild||(h=this.compilerInfo()+h),a)return d.push(h),Function.apply(this,d);var i="function "+(this.name||"")+"("+d.join(",")+") {\n  "+h+"}";return g("debug",i+"\n\n"),i},mergeSource:function(){for(var a,b="",c=0,d=this.source.length;c<d;c++){var e=this.source[c];e.appendToBuffer?a=a?a+"\n    + "+e.content:e.content:(a&&(b+="buffer += "+a+";\n  ",a=void 0),b+=e+"\n  ")}return b},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a),this.replaceStack(function(b){return a.splice(1,0,b),"blockHelperMissing.call("+a.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);var b=this.topStack();a.splice(1,0,b),this.pushSource("if (!"+this.lastHelper+") { "+b+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.pendingContent&&(a=this.pendingContent+a),this.stripNext&&(a=a.replace(/^\s+/,"")),this.pendingContent=a},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var a=this.popStack();this.pushSource("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupOnContext:function(a){this.push(this.nameLookup("depth"+this.lastContext,a,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(a){return"typeof "+a+" === functionType ? "+a+".apply(depth0) : "+a})},lookup:function(a){this.replaceStack(function(b){return b+" == null || "+b+" === false ? "+b+" : "+this.nameLookup(b,a,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(a,b){this.pushStackLiteral("depth"+this.lastContext),this.pushString(b),"sexpr"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+a.contexts.join(",")+"}"),this.push("{"+a.types.join(",")+"}")),this.push("{\n    "+a.values.join(",\n    ")+"\n  }")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){return this.inlineStack.push(a),a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},invokeHelper:function(a,b,c){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var d=this.lastHelper=this.setupHelper(a,b,!0),e=this.nameLookup("depth"+this.lastContext,b,"context"),f="helper = "+d.name+" || "+e;d.paramsInit&&(f+=","+d.paramsInit),this.push("("+f+",helper ? helper.call("+d.callParams+") : helperMissing.call("+d.helperMissingParams+"))"),c||this.flushInline()},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(c.name+".call("+c.callParams+")")},invokeAmbiguous:function(a,b){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var c=this.setupHelper(0,a,b),d=this.lastHelper=this.nameLookup("helpers",a,"helper"),e=this.nameLookup("depth"+this.lastContext,a,"context"),f=this.nextStack();c.paramsInit&&this.pushSource(c.paramsInit),this.pushSource("if (helper = "+d+") { "+f+" = helper.call("+c.callParams+"); }"),this.pushSource("else { helper = "+e+"; "+f+" = typeof helper === functionType ? helper.call("+c.callParams+") : helper; }")},invokePartial:function(a){var b=[this.nameLookup("partials",a,"partial"),"'"+a+"'",this.popStack(),"helpers","partials"];this.options.data&&b.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+b.join(", ")+")")},assignToHash:function(a){var b,c,d=this.popStack();this.options.stringParams&&(c=this.popStack(),b=this.popStack());var e=this.hash;b&&e.contexts.push("'"+a+"': "+b),c&&e.types.push("'"+a+"': "+c),e.values.push("'"+a+"': ("+d+")")},compiler:d,compileChildren:function(a,b){for(var c,d,e=a.children,f=0,g=e.length;f<g;f++){c=e[f],d=new this.compiler;var h=this.matchExistingProgram(c);null==h?(this.context.programs.push(""),h=this.context.programs.length,c.index=h,c.name="program"+h,this.context.programs[h]=d.compile(c,b,this.context),this.context.environments[h]=c):(c.index=h,c.name="program"+h)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;b<c;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){if(this.context.aliases.self="this",null==a)return"self.noop";for(var b,c=this.environment.children[a],d=c.depths.list,e=[c.index,c.name,"data"],f=0,g=d.length;f<g;f++)b=d[f],1===b?e.push("depth0"):e.push("depth"+(b-1));return(0===d.length?"self.program(":"self.programWithDepth(")+e.join(", ")+")"},register:function(a,b){this.useRegister(a),this.pushSource(a+" = "+b+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new c(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),a&&this.source.push(a)},pushStack:function(a){this.flushInline();var b=this.incrStack();return a&&this.pushSource(b+" = "+a+";"),this.compileStack.push(b),b},replaceStack:function(a){var b,d,e,f="",g=this.isInline();if(g){var h=this.popStack(!0);if(h instanceof c)b=h.value,e=!0;else{d=!this.stackSlot;var i=d?this.incrStack():this.topStackName();f="("+this.push(i)+" = "+h+"),",b=this.topStack()}}else b=this.topStack();var j=a.call(this,b);return g?(e||this.popStack(),d&&this.stackSlot--,this.push("("+f+j+")")):(/^stack/.test(b)||(b=this.nextStack()),this.pushSource(b+" = ("+f+j+");")),b},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var b=0,d=a.length;b<d;b++){var e=a[b];e instanceof c?this.compileStack.push(e):this.pushStack(e)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),d=(b?this.inlineStack:this.compileStack).pop();if(!a&&d instanceof c)return d.value;if(!b){if(!this.stackSlot)throw new h("Invalid stack pop");this.stackSlot--}return d},topStack:function(a){var b=this.isInline()?this.inlineStack:this.compileStack,d=b[b.length-1];return!a&&d instanceof c?d.value:d},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(a,b,c){var d=[];return{params:d,paramsInit:this.setupParams(a,d,c),name:this.nameLookup("helpers",b,"helper"),callParams:["depth0"].concat(d).join(", "),helperMissingParams:c&&["depth0",this.quotedString(b)].concat(d).join(", ")}},setupOptions:function(a,b){var c,d,e,f=[],g=[],h=[];f.push("hash:"+this.popStack()),this.options.stringParams&&(f.push("hashTypes:"+this.popStack()),f.push("hashContexts:"+this.popStack())),d=this.popStack(),((e=this.popStack())||d)&&(e||(this.context.aliases.self="this",e="self.noop"),d||(this.context.aliases.self="this",d="self.noop"),f.push("inverse:"+d),f.push("fn:"+e));for(var i=0;i<a;i++)c=this.popStack(),b.push(c),this.options.stringParams&&(h.push(this.popStack()),g.push(this.popStack()));return this.options.stringParams&&(f.push("contexts:["+g.join(",")+"]"),f.push("types:["+h.join(",")+"]")),this.options.data&&f.push("data:data"),f},setupParams:function(a,b,c){var d="{"+this.setupOptions(a,b).join(",")+"}";return c?(this.useRegister("options"),b.push("options"),"options="+d):(b.push(d),"")}};for(var i="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),j=d.RESERVED_WORDS={},k=0,l=i.length;k<l;k++)j[i[k]]=!0;return d.isValidJavaScriptVariableName=function(a){return!(d.RESERVED_WORDS[a]||!/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a))},d}(d,c);return function(a,b,c,d,e){"use strict";var f=a,g=b,h=c.parser,i=c.parse,j=d.Compiler,k=d.compile,l=d.precompile,m=e,n=f.create,o=function(){var a=n();return a.compile=function(b,c){return k(b,c,a)},a.precompile=function(b,c){return l(b,c,a)},a.AST=g,a.Compiler=j,a.JavaScriptCompiler=m,a.Parser=h,a.parse=i,a};return f=o(),f.create=o,f}(f,g,i,j,k)}();RegExp.escape=function(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},function(a){"use strict";a.csv={defaults:{separator:",",delimiter:'"',headers:!0},hooks:{castToScalar:function(a,b){var c=/\./;if(isNaN(a))return a;if(c.test(a))return parseFloat(a);var d=parseInt(a);return isNaN(d)?null:d}},parsers:{parse:function(a,b){function c(){if(i=0,j="",b.start&&b.state.rowNum<b.start)return h=[],b.state.rowNum++,void(b.state.colNum=1);if(void 0===b.onParseEntry)g.push(h);else{var a=b.onParseEntry(h,b.state);!1!==a&&g.push(a)}h=[],b.end&&b.state.rowNum>=b.end&&(k=!0),b.state.rowNum++,b.state.colNum=1}function d(){if(void 0===b.onParseValue)h.push(j);else{var a=b.onParseValue(j,b.state);!1!==a&&h.push(a)}j="",i=0,b.state.colNum++}var e=b.separator,f=b.delimiter;b.state.rowNum||(b.state.rowNum=1),b.state.colNum||(b.state.colNum=1);var g=[],h=[],i=0,j="",k=!1,l=RegExp.escape(e),m=RegExp.escape(f),n=/(D|S|\n|\r|[^DS\r\n]+)/,o=n.source;return o=o.replace(/S/g,l),o=o.replace(/D/g,m),n=RegExp(o,"gm"),a.replace(n,function(a){if(!k)switch(i){case 0:if(a===e){j+="",d();break}if(a===f){i=1;break}if("\n"===a){d(),c();break}if(/^\r$/.test(a))break;j+=a,i=3;break;case 1:if(a===f){i=2;break}j+=a,i=1;break;case 2:if(a===f){j+=a,i=1;break}if(a===e){d();break}if("\n"===a){d(),c();break}if(/^\r$/.test(a))break;throw new Error("CSVDataError: Illegal State [Row:"+b.state.rowNum+"][Col:"+b.state.colNum+"]");case 3:if(a===e){d();break}if("\n"===a){d(),c();break}if(/^\r$/.test(a))break;if(a===f)throw new Error("CSVDataError: Illegal Quote [Row:"+b.state.rowNum+"][Col:"+b.state.colNum+"]");throw new Error("CSVDataError: Illegal Data [Row:"+b.state.rowNum+"][Col:"+b.state.colNum+"]");default:throw new Error("CSVDataError: Unknown State [Row:"+b.state.rowNum+"][Col:"+b.state.colNum+"]")}}),0!==h.length&&(d(),c()),g},splitLines:function(a,b){function c(){if(g=0,b.start&&b.state.rowNum<b.start)return h="",void b.state.rowNum++;if(void 0===b.onParseEntry)f.push(h);else{var a=b.onParseEntry(h,b.state);!1!==a&&f.push(a)}h="",b.end&&b.state.rowNum>=b.end&&(i=!0),b.state.rowNum++}var d=b.separator,e=b.delimiter;b.state.rowNum||(b.state.rowNum=1);var f=[],g=0,h="",i=!1,j=RegExp.escape(d),k=RegExp.escape(e),l=/(D|S|\n|\r|[^DS\r\n]+)/,m=l.source;return m=m.replace(/S/g,j),m=m.replace(/D/g,k),l=RegExp(m,"gm"),a.replace(l,function(a){if(!i)switch(g){case 0:if(a===d){h+=a,g=0;break}if(a===e){h+=a,g=1;break}if("\n"===a){c();break}if(/^\r$/.test(a))break;h+=a,g=3;break;case 1:if(a===e){h+=a,g=2;break}h+=a,g=1;break;case 2:var f=h.substr(h.length-1);if(a===e&&f===e){h+=a,g=1;break}if(a===d){h+=a,g=0;break}if("\n"===a){c();break}if("\r"===a)break;throw new Error("CSVDataError: Illegal state [Row:"+b.state.rowNum+"]");case 3:if(a===d){h+=a,g=0;break}if("\n"===a){c();break}if("\r"===a)break;if(a===e)throw new Error("CSVDataError: Illegal quote [Row:"+b.state.rowNum+"]");throw new Error("CSVDataError: Illegal state [Row:"+b.state.rowNum+"]");default:throw new Error("CSVDataError: Unknown state [Row:"+b.state.rowNum+"]")}}),""!==h&&c(),f},parseEntry:function(a,b){function c(){if(void 0===b.onParseValue)f.push(h);else{var a=b.onParseValue(h,b.state);!1!==a&&f.push(a)}h="",g=0,b.state.colNum++}var d=b.separator,e=b.delimiter;b.state.rowNum||(b.state.rowNum=1),b.state.colNum||(b.state.colNum=1);var f=[],g=0,h="";if(!b.match){var i=RegExp.escape(d),j=RegExp.escape(e),k=/(D|S|\n|\r|[^DS\r\n]+)/,l=k.source;l=l.replace(/S/g,i),l=l.replace(/D/g,j),b.match=RegExp(l,"gm")}return a.replace(b.match,function(a){switch(g){case 0:if(a===d){h+="",c();break}if(a===e){g=1;break}if("\n"===a||"\r"===a)break;h+=a,g=3;break;case 1:if(a===e){g=2;break}h+=a,g=1;break;case 2:if(a===e){h+=a,g=1;break}if(a===d){c();break}if("\n"===a||"\r"===a)break;throw new Error("CSVDataError: Illegal State [Row:"+b.state.rowNum+"][Col:"+b.state.colNum+"]");case 3:if(a===d){c();break}if("\n"===a||"\r"===a)break;if(a===e)throw new Error("CSVDataError: Illegal Quote [Row:"+b.state.rowNum+"][Col:"+b.state.colNum+"]");throw new Error("CSVDataError: Illegal Data [Row:"+b.state.rowNum+"][Col:"+b.state.colNum+"]");default:throw new Error("CSVDataError: Unknown State [Row:"+b.state.rowNum+"][Col:"+b.state.colNum+"]")}}),c(),f}},toArray:function(b,c,d){var c=void 0!==c?c:{},e={};e.callback=void 0!==d&&"function"==typeof d&&d,e.separator="separator"in c?c.separator:a.csv.defaults.separator,e.delimiter="delimiter"in c?c.delimiter:a.csv.defaults.delimiter;var f=void 0!==c.state?c.state:{},c={delimiter:e.delimiter,separator:e.separator,onParseEntry:c.onParseEntry,onParseValue:c.onParseValue,state:f},g=a.csv.parsers.parseEntry(b,c);if(!e.callback)return g;e.callback("",g)},toArrays:function(b,c,d){var c=void 0!==c?c:{},e={};e.callback=void 0!==d&&"function"==typeof d&&d,e.separator="separator"in c?c.separator:a.csv.defaults.separator,e.delimiter="delimiter"in c?c.delimiter:a.csv.defaults.delimiter;var f=[],c={delimiter:e.delimiter,separator:e.separator,onParseEntry:c.onParseEntry,onParseValue:c.onParseValue,start:c.start,end:c.end,state:{rowNum:1,colNum:1}};if(f=a.csv.parsers.parse(b,c),!e.callback)return f;e.callback("",f)},toObjects:function(b,c,d){var c=void 0!==c?c:{},e={};e.callback=void 0!==d&&"function"==typeof d&&d,e.separator="separator"in c?c.separator:a.csv.defaults.separator,e.delimiter="delimiter"in c?c.delimiter:a.csv.defaults.delimiter,e.headers="headers"in c?c.headers:a.csv.defaults.headers,c.start="start"in c?c.start:1,e.headers&&c.start++,c.end&&e.headers&&c.end++;var f=[],g=[],c={delimiter:e.delimiter,separator:e.separator,onParseEntry:c.onParseEntry,onParseValue:c.onParseValue,start:c.start,end:c.end,state:{rowNum:1,colNum:1},match:!1},h={delimiter:e.delimiter,separator:e.separator,start:1,end:1,state:{rowNum:1,colNum:1}},i=a.csv.parsers.splitLines(b,h),j=a.csv.toArray(i[0],c),f=a.csv.parsers.splitLines(b,c);c.state.colNum=1,c.state.rowNum=j?2:1;for(var k=0,l=f.length;k<l;k++){var m=a.csv.toArray(f[k],c),n={};for(var o in j)n[j[o]]=m[o];g.push(n),c.state.rowNum++}if(!e.callback)return g;e.callback("",g)},fromArrays:function(b,c,d){var c=void 0!==c?c:{},e={};if(e.callback=void 0!==d&&"function"==typeof d&&d,e.separator="separator"in c?c.separator:a.csv.defaults.separator,e.delimiter="delimiter"in c?c.delimiter:a.csv.defaults.delimiter,e.escaper="escaper"in c?c.escaper:a.csv.defaults.escaper,e.experimental="experimental"in c&&c.experimental,!e.experimental)throw new Error("not implemented");var f=[];for(i in b)f.push(b[i]);if(!e.callback)return f;e.callback("",f)},fromObjects2CSV:function(b,c,d){var c=void 0!==c?c:{},e={};if(e.callback=void 0!==d&&"function"==typeof d&&d,e.separator="separator"in c?c.separator:a.csv.defaults.separator,e.delimiter="delimiter"in c?c.delimiter:a.csv.defaults.delimiter,e.experimental="experimental"in c&&c.experimental,!e.experimental)throw new Error("not implemented");var f=[];for(i in b)f.push(arrays[i]);if(!e.callback)return f;e.callback("",f)}},a.csvEntry2Array=a.csv.toArray,a.csv2Array=a.csv.toArrays,a.csv2Dictionary=a.csv.toObjects}(jQuery),function(a,b){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?exports.jso=b():a.jso=b()}(window,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.r=function(a){Object.defineProperty(a,"__esModule",{value:!0})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=90)}([function(a,b,c){var d=c(40)("wks"),e=c(25),f=c(1).Symbol,g="function"==typeof f;(a.exports=function(a){return d[a]||(d[a]=g&&f[a]||(g?f:e)("Symbol."+a))}).store=d},function(a,b){var c=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=c)},function(a,b){var c=a.exports={version:"2.5.3"};"number"==typeof __e&&(__e=c)},function(a,b,c){var d=c(10);a.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}},function(a,b,c){var d=c(16),e=c(44);a.exports=c(9)?function(a,b,c){return d.f(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}},function(a,b,c){var d=c(1),e=c(2),f=c(4),g=c(8),h=c(15),i=function a(b,c,i){var j,k,l,m,n=b&a.F,o=b&a.G,p=b&a.S,q=b&a.P,r=b&a.B,s=o?d:p?d[c]||(d[c]={}):(d[c]||{}).prototype,t=o?e:e[c]||(e[c]={}),u=t.prototype||(t.prototype={});for(j in o&&(i=c),i)l=((k=!n&&s&&void 0!==s[j])?s:i)[j],m=r&&k?h(l,d):q&&"function"==typeof l?h(Function.call,l):l,s&&g(s,j,l,b&a.U),t[j]!=l&&f(t,j,m),q&&u[j]!=l&&(u[j]=l)};d.core=e,i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,i.U=64,i.R=128,a.exports=i},function(a,b){a.exports={}},function(a,b){var c={}.hasOwnProperty;a.exports=function(a,b){return c.call(a,b)}},function(a,b,c){var d=c(1),e=c(4),f=c(7),g=c(25)("src"),h=Function.toString,i=(""+h).split("toString");c(2).inspectSource=function(a){return h.call(a)},(a.exports=function(a,b,c,h){var j="function"==typeof c;j&&(f(c,"name")||e(c,"name",b)),a[b]!==c&&(j&&(f(c,g)||e(c,g,a[b]?""+a[b]:i.join(String(b)))),a===d?a[b]=c:h?a[b]?a[b]=c:e(a,b,c):(delete a[b],e(a,b,c)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[g]||h.call(this)})},function(a,b,c){a.exports=!c(27)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(a,b){a.exports=function(a){return"object"==_typeof(a)?null!==a:"function"==typeof a}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),console.log("Initializing a loader with url "+b),this.url=b}return d(a,[{key:"execute",value:function(){}}]),a}();b.default=e},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d={epoch:function(){return Math.round((new Date).getTime()/1e3)},debug:!1,uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:3&b|8).toString(16)})},getResponseFromURL:function(a){return-1!==a.indexOf("#")?d.parseQueryString(a.substring(a.indexOf("#")+1)):-1!==a.indexOf("?")?d.parseQueryString(a.substring(a.indexOf("?")+1)):{}},parseQueryString:function(a){for(var b,c=/\+/g,d=/([^&;=]+)=?([^&;]*)/g,e=function(a){return decodeURIComponent(a.replace(c," "))},f=a,g={};b=d.exec(f);)g[e(b[1])]=e(b[2]);return g},scopeList:function(a){return d.uniqueList(a).join(" ")},uniqueList:function(a){for(var b={},c=[],d=0;d<a.length;d++)b[a[d]]=1;for(var e in b)b.hasOwnProperty(e)&&c.push(e);return c},log:function(a){if(console&&console.log&&d.debug){var b=Array.prototype.slice.call(arguments);b.unshift("[JSO]"),console.log.apply(console,b)}},encodeQS:function(a){var b,c="",d=0;for(b in a)c+=(0==d++?"":"&")+encodeURIComponent(b)+"="+encodeURIComponent(a[b]);return c},encodeURL:function(a,b){var c,d=a,e=0,f=-1===a.indexOf("?")?"?":"&";for(c in b)d+=(0==e++?f:"&")+encodeURIComponent(c)+"="+encodeURIComponent(b[c]);return d}};b.default=d},function(a,b){var c={}.toString;a.exports=function(a){return c.call(a).slice(8,-1)}},function(a,b){a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}
},function(a,b,c){var d=c(14);a.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},function(a,b,c){var d=c(3),e=c(87),f=c(86),g=Object.defineProperty;b.f=c(9)?Object.defineProperty:function(a,b,c){if(d(a),b=f(b,!0),d(c),e)try{return g(a,b,c)}catch(a){}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(a[b]=c.value),a}},function(a,b,c){"use strict";var d=c(14);a.exports.f=function(a){return new function(a){var b,c;this.promise=new a(function(a,d){if(void 0!==b||void 0!==c)throw TypeError("Bad Promise constructor");b=a,c=d}),this.resolve=d(b),this.reject=d(c)}(a)}},function(a,b,c){var d=c(16).f,e=c(7),f=c(0)("toStringTag");a.exports=function(a,b,c){a&&!e(a=c?a:a.prototype,f)&&d(a,f,{configurable:!0,value:b})}},function(a,b,c){var d=c(13),e=c(0)("toStringTag"),f="Arguments"==d(function(){return arguments}());a.exports=function(a){var b,c,g;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(c=function(a,b){try{return a[b]}catch(a){}}(b=Object(a),e))?c:f?d(b):"Object"==(g=d(b))&&"function"==typeof b.callee?"Arguments":g}},function(a,b,c){var d=c(40)("keys"),e=c(25);a.exports=function(a){return d[a]||(d[a]=e(a))}},function(a,b){var c=Math.ceil,d=Math.floor;a.exports=function(a){return isNaN(a=+a)?0:(a>0?d:c)(a)}},function(a,b){a.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}},function(a,b,c){var d=c(43),e=c(22);a.exports=function(a){return d(e(a))}},function(a,b,c){var d=c(84),e=c(39);a.exports=Object.keys||function(a){return d(a,e)}},function(a,b){var c=0,d=Math.random();a.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++c+d).toString(36))}},function(a,b,c){var d=c(10),e=c(1).document,f=d(e)&&d(e.createElement);a.exports=function(a){return f?e.createElement(a):{}}},function(a,b){a.exports=function(a){try{return!!a()}catch(a){return!0}}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(){function a(b){for(var c in function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),b)this[c]=b[c]}return d(a,[{key:"set",value:function(a,b){return this[a]=b,this}}]),a}();b.default=e},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d,e=c(28),f=(d=e)&&d.__esModule?d:{default:d},g=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=_typeof(b)&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+_typeof(b));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,f.default),b}();b.default=g},function(a,b,c){var d=c(3),e=c(10),f=c(17);a.exports=function(a,b){if(d(a),e(b)&&b.constructor===a)return b;var c=f.f(a);return(0,c.resolve)(b),c.promise}},function(a,b){a.exports=function(a){try{return{e:!1,v:a()}}catch(a){return{e:!0,v:a}}}},function(a,b,c){var d,e,f,g=c(15),h=c(61),i=c(34),j=c(26),k=c(1),l=k.process,m=k.setImmediate,n=k.clearImmediate,o=k.MessageChannel,p=k.Dispatch,q=0,r={},s=function(){var a=+this;if(r.hasOwnProperty(a)){var b=r[a];delete r[a],b()}},t=function(a){s.call(a.data)};m&&n||(m=function(a){for(var b=[],c=1;arguments.length>c;)b.push(arguments[c++]);return r[++q]=function(){h("function"==typeof a?a:Function(a),b)},d(q),q},n=function(a){delete r[a]},"process"==c(13)(l)?d=function(a){l.nextTick(g(s,a,1))}:p&&p.now?d=function(a){p.now(g(s,a,1))}:o?(f=(e=new o).port2,e.port1.onmessage=t,d=g(f.postMessage,f,1)):k.addEventListener&&"function"==typeof postMessage&&!k.importScripts?(d=function(a){k.postMessage(a+"","*")},k.addEventListener("message",t,!1)):d="onreadystatechange"in j("script")?function(a){i.appendChild(j("script")).onreadystatechange=function(){i.removeChild(this),s.call(a)}}:function(a){setTimeout(g(s,a,1),0)}),a.exports={set:m,clear:n}},function(a,b,c){var d=c(3),e=c(14),f=c(0)("species");a.exports=function(a,b){var c,g=d(a).constructor;return void 0===g||void 0==(c=d(g)[f])?b:e(c)}},function(a,b,c){var d=c(1).document;a.exports=d&&d.documentElement},function(a,b){a.exports=!1},function(a,b,c){"use strict";var d=c(35),e=c(5),f=c(8),g=c(4),h=c(7),i=c(6),j=c(74),k=c(18),l=c(71),m=c(0)("iterator"),n=!([].keys&&"next"in[].keys()),o=function(){return this};a.exports=function(a,b,c,p,q,r,s){j(c,b,p);var t,u,v,w=function(a){if(!n&&a in A)return A[a];switch(a){case"keys":case"values":return function(){return new c(this,a)}}return function(){return new c(this,a)}},x=b+" Iterator",y="values"==q,z=!1,A=a.prototype,B=A[m]||A["@@iterator"]||q&&A[q],C=!n&&B||w(q),D=q?y?w("entries"):C:void 0,E="Array"==b&&A.entries||B;if(E&&(v=l(E.call(new a)))!==Object.prototype&&v.next&&(k(v,x,!0),d||h(v,m)||g(v,m,o)),y&&B&&"values"!==B.name&&(z=!0,C=function(){return B.call(this)}),d&&!s||!n&&!z&&A[m]||g(A,m,C),i[b]=C,i[x]=o,q)if(t={values:y?C:w("values"),keys:r?C:w("keys"),entries:D},s)for(u in t)u in A||f(A,u,t[u]);else e(e.P+e.F*(n||z),b,t);return t}},function(a,b,c){var d=c(0)("unscopables"),e=Array.prototype;void 0==e[d]&&c(4)(e,d,{}),a.exports=function(a){e[d][a]=!0}},function(a,b,c){var d=c(22);a.exports=function(a){return Object(d(a))}},function(a,b){a.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(a,b,c){var d=c(1),e=d["__core-js_shared__"]||(d["__core-js_shared__"]={});a.exports=function(a){return e[a]||(e[a]={})}},function(a,b,c){var d=c(21),e=Math.min;a.exports=function(a){return a>0?e(d(a),9007199254740991):0}},function(a,b,c){var d=c(23),e=c(41),f=c(83);a.exports=function(a){return function(b,c,g){var h,i=d(b),j=e(i.length),k=f(g,j);if(a&&c!=c){for(;j>k;)if((h=i[k++])!=h)return!0}else for(;j>k;k++)if((a||k in i)&&i[k]===c)return a||k||0;return!a&&-1}}},function(a,b,c){var d=c(13);a.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==d(a)?a.split(""):Object(a)}},function(a,b){a.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}},function(a){a.exports={name:"jso",version:"4.1.1",description:"OAuth 2.0 implementation in Javascript",main:"dist/jso.js",module:"src/JSO.js",scripts:{test:"true",preversion:"npm test",version:"npm run build && git add -A dist",postversion:"git push && git push --tags && npm publish",build:"webpack --mode production --config webpack.config.js"},babel:{presets:["env"]},repository:{type:"git",url:"https://github.com/andreassolberg/jso.git"},keywords:["oauth","authentication","authorization","rest","api","ajax","jquery"],files:["src"],eslintConfig:{env:{es6:!0,browser:!0,node:!1}},devDependencies:{"babel-core":"^6.26.0","babel-loader":"^7.1.4","babel-preset-env":"^1.6.1","babel-preset-react":"^6.24.1",qunit:"^2.5.1",webpack:"^4.1.1","webpack-cli":"^2.0.12"},author:"Andreas kre Solberg",license:"LGPL-2.1",bugs:{url:"https://github.com/andreassolberg/jso/issues"},homepage:"https://github.com/andreassolberg/jso",dependencies:{}}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return d(a,[{key:"on",value:function(a,b){this._callbacks||(this._callbacks={}),this._callbacks[a]||(this._callbacks[a]=[]),this._callbacks[a].push(b)}},{key:"emit",value:function(a){this._callbacks||(this._callbacks={}),this._callbacks[a]||(this._callbacks[a]=[]);for(var b=Array.prototype.slice.call(arguments,1),c=0;c<this._callbacks[a].length;c++)this._callbacks[a][c].apply(this,b)}}]),a}();b.default=e},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.config={};for(var b=0;b<arguments.length;b++)Object.assign(this.config,arguments[b])}return d(a,[{key:"has",value:function(a){var b=this.config,c=a.split("."),d=0;for(d=0;d<c.length;d++){if(!b.hasOwnProperty(c[d]))return!1;b=b[c[d]]}return!0}},{key:"getValue",value:function(a,b,c){c=c||!1;var d=this.config,e=a.split("."),f=0;for(f=0;f<e.length;f++){if(!d.hasOwnProperty(e[f])){d=void 0;break}d=d[e[f]]}if(void 0===d){if(c)throw new Error("Configuration option ["+e[f]+"] required but not provided.");return b}return d}}]),a}();b.default=e},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d,e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(28),g=(d=f)&&d.__esModule?d:{default:d},h=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=_typeof(b)&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+_typeof(b));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,g.default),e(b,[{key:"toString",value:function(){return"OAuthResponseError: ["+(this.error||"unknown")+"]: "+(this.error_description||"unknown")}}]),b}();b.default=h},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d,e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(29),g=(d=f)&&d.__esModule?d:{default:d},h=function(){function a(b,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.jso=b,this.jquery=c}return e(a,[{key:"_fetch",value:function(a,b){var c=this;return new Promise(function(d,e){return b.done=d,b.fail=function(a,b,d){return 401===parseInt(b,10)?(c.jso.wipeTokens(),e(new g.default)):e(d)},c.jquery.ajax(a,b)})}},{key:"fetch",value:function(a,b,c){var d=this;if((c=c||0)>2)throw new Error("Reccursion error. Expired tokens deleted and tried again multiple times.");var e={},f={mode:"cors"};return b&&(f=b,Object.assign(f,b)),b&&b.jso&&Object.assign(e,b.jso),this.jso.getToken(e).catch(function(a){console.error("Error fetching token to use ",a)}).then(function(e){return f.headers||(f.headers={}),f.headers.Authorization="Bearer "+e.access_token,d._fetch(a,f).catch(function(e){if(e instanceof g.default)return console.error("Token was expired. Deleting all tokens for this provider and get a new one",e),d.jso.wipeTokens(),d.fetch(a,b,c+1)})})}}]),a}();b.default=h},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d,e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(29),g=(d=f)&&d.__esModule?d:{default:d},h=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.jso=b}return e(a,[{key:"_fetch",value:function(a,b){return fetch(a,b).then(function(a){if(401===a.status)throw new g.default;return a})}},{key:"fetch",value:function(a,b,c){var d=this;if((c=c||0)>2)throw new Error("Reccursion error. Expired tokens deleted and tried again multiple times.");var e={},f={mode:"cors"};return b&&(f=b,Object.assign(f,b)),b&&b.jso&&Object.assign(e,b.jso),this.jso.getToken(e).catch(function(a){console.error("Error fetching token to use ",a)}).then(function(e){return f.headers||(f.headers={}),f.headers.Authorization="Bearer "+e.access_token,d._fetch(a,f).catch(function(e){if(e instanceof g.default)return console.error("Token was expired. Deleting all tokens for this provider and get a new one",e),d.jso.wipeTokens(),d.fetch(a,b,c+1)})})}}]),a}();b.default=h},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d,e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(11),g=(d=f)&&d.__esModule?d:{default:d},h=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=_typeof(b)&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+_typeof(b));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,g.default),e(b,[{key:"execute",value:function(){var a=this;return new Promise(function(b,c){window.popupCompleted=function(){var a=d.location.href;b(a)};var d=window.open(a.url,"jso-popup-auth","height=600,width=800");if(null===d)throw new Error("Error loading popup window");window.focus&&d.focus()})}}]),b}();b.default=h},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=d(c(11)),g=d(c(12)),h=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=_typeof(b)&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));c.timeout=5e3,c.callback=null,c.isCompleted=!1,c.id="jso_passive_iframe_"+g.default.uuid();var d=window.addEventListener?"addEventListener":"attachEvent";return window[d],c.iframe=document.createElement("iframe"),c.iframe.setAttribute("id",c.id),c.iframe.setAttribute("src",a),c.iframe.addEventListener("load",function(a){var b=null;try{if(c.iframe.contentWindow.location.hash){var d=c.iframe.contentWindow.location.hash.substring(1);b=g.default.parseQueryString(d)}else if(c.iframe.contentWindow.location.search){var e=c.iframe.contentWindow.location.search.substring(1);b=g.default.parseQueryString(e)}null!==b?c._completed(b):c._failed(new Error("Failed to obtain response value from iframe"))}catch(a){}}),c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+_typeof(b));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,f.default),e(b,[{key:"execute",value:function(){var a=this;return new Promise(function(b,c){a.callback=b,a.errorCallback=c,document.getElementsByTagName("body")[0].appendChild(a.iframe),setTimeout(function(){a._failed(new Error("Loading iframe timed out"))},a.timeout)})}},{key:"_cleanup",value:function(){var a=document.getElementById(this.id);a.parentNode.removeChild(a)}},{key:"_failed",value:function(a){this.isCompleted||(this.errorCallback&&"function"==typeof this.errorCallback&&this.errorCallback(a),this.isCompleted=!0,this._cleanup())}},{key:"_completed",value:function(a){this.isCompleted||(this.callback&&"function"==typeof this.callback&&this.callback(a),this.isCompleted=!0,this._cleanup())}}]),b}();b.default=h},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=d(c(11));d(c(12));var g=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=_typeof(b)&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+_typeof(b));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,f.default),e(b,[{key:"execute",value:function(){var a=this;return new Promise(function(b,c){window.location=a.url})}}]),b}();b.default=g},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d,e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(12),g=(d=f)&&d.__esModule?d:{default:d},h=new(function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return e(a,[{key:"saveState",value:function(a,b){localStorage.setItem("state-"+a,JSON.stringify(b))}},{key:"getState",value:function(a){var b=JSON.parse(localStorage.getItem("state-"+a));return localStorage.removeItem("state-"+a),b}},{key:"hasScope",value:function(a,b){var c;if(!a.scopes)return!1;for(c=0;c<a.scopes.length;c++)if(a.scopes[c]===b)return!0;return!1}},{key:"filterTokens",value:function(a,b){var c,d,e,f=[],h=g.default.epoch();for(b||(b=[]),c=0;c<a.length;c++){for(e=!0,a[c].expires&&a[c].expires<h+1&&(e=!1),d=0;d<b.length;d++)this.hasScope(a[c],b[d])||(e=!1);e&&f.push(a[c])}return f}},{key:"saveTokens",value:function(a,b){localStorage.setItem("tokens-"+a,JSON.stringify(b))}},{key:"getTokens",value:function(a){var b=JSON.parse(localStorage.getItem("tokens-"+a));return b||(b=[]),g.default.log("Token found when loooking up provider "+a+" in store "+window.location.href,b),b}},{key:"wipeTokens",value:function(a){localStorage.removeItem("tokens-"+a)}},{key:"saveToken",value:function(a,b){var c=this.getTokens(a);(c=this.filterTokens(c)).push(b),this.saveTokens(a,c)}},{key:"getToken",value:function(a,b){var c=this.getTokens(a);return(c=this.filterTokens(c,b)).length<1?null:c[0]}}]),a}());b.default=h},function(a,b,c){"use strict";var d=c(5),e=c(17),f=c(31);d(d.S,"Promise",{try:function(a){var b=e.f(this),c=f(a);return(c.e?b.reject:b.resolve)(c.v),b.promise}})},function(a,b,c){"use strict";var d=c(5),e=c(2),f=c(1),g=c(33),h=c(30);d(d.P+d.R,"Promise",{finally:function(a){var b=g(this,e.Promise||f.Promise),c="function"==typeof a;return this.then(c?function(c){return h(b,a()).then(function(){return c})}:a,c?function(c){return h(b,a()).then(function(){throw c})}:a)}})},function(a,b,c){var d=c(0)("iterator"),e=!1;try{var f=[7][d]();f.return=function(){e=!0},Array.from(f,function(){throw 2})}catch(a){}a.exports=function(a,b){if(!b&&!e)return!1;var c=!1;try{var f=[7],g=f[d]();g.next=function(){return{done:c=!0}},f[d]=function(){return g},a(f)}catch(a){}return c}},function(a,b,c){"use strict";var d=c(1),e=c(16),f=c(9),g=c(0)("species");a.exports=function(a){var b=d[a];f&&b&&!b[g]&&e.f(b,g,{configurable:!0,get:function(){return this}})}},function(a,b,c){var d=c(8);a.exports=function(a,b,c){for(var e in b)d(a,e,b[e],c);return a}},function(a,b,c){var d=c(1),e=c(32).set,f=d.MutationObserver||d.WebKitMutationObserver,g=d.process,h=d.Promise,i="process"==c(13)(g);a.exports=function(){var a,b,c,j=function(){var d,e;for(i&&(d=g.domain)&&d.exit();a;){e=a.fn,a=a.next;try{e()}catch(d){throw a?c():b=void 0,d}}b=void 0,d&&d.enter()};if(i)c=function(){g.nextTick(j)};else if(!f||d.navigator&&d.navigator.standalone)if(h&&h.resolve){var k=h.resolve();c=function(){k.then(j)}}else c=function(){e.call(d,j)};else{var l=!0,m=document.createTextNode("");new f(j).observe(m,{characterData:!0}),c=function(){m.data=l=!l}}return function(d){var e={fn:d,next:void 0};b&&(b.next=e),a||(a=e,c()),b=e}}},function(a,b){a.exports=function(a,b,c){var d=void 0===c;switch(b.length){case 0:return d?a():a.call(c);case 1:return d?a(b[0]):a.call(c,b[0]);case 2:return d?a(b[0],b[1]):a.call(c,b[0],b[1]);case 3:return d?a(b[0],b[1],b[2]):a.call(c,b[0],b[1],b[2]);case 4:return d?a(b[0],b[1],b[2],b[3]):a.call(c,b[0],b[1],b[2],b[3])}return a.apply(c,b)}},function(a,b,c){var d=c(19),e=c(0)("iterator"),f=c(6);a.exports=c(2).getIteratorMethod=function(a){if(void 0!=a)return a[e]||a["@@iterator"]||f[d(a)]}},function(a,b,c){var d=c(6),e=c(0)("iterator"),f=Array.prototype;a.exports=function(a){return void 0!==a&&(d.Array===a||f[e]===a)}},function(a,b,c){var d=c(3);a.exports=function(a,b,c,e){try{return e?b(d(c)[0],c[1]):b(c)}catch(b){var f=a.return;throw void 0!==f&&d(f.call(a)),b}}},function(a,b,c){var d=c(15),e=c(64),f=c(63),g=c(3),h=c(41),i=c(62),j={},k={};(b=a.exports=function(a,b,c,l,m){var n,o,p,q,r=m?function(){return a}:i(a),s=d(c,l,b?2:1),t=0;if("function"!=typeof r)throw TypeError(a+" is not iterable!");if(f(r)){for(n=h(a.length);n>t;t++)if((q=b?s(g(o=a[t])[0],o[1]):s(a[t]))===j||q===k)return q}else for(p=r.call(a);!(o=p.next()).done;)if((q=e(p,s,o.value,b))===j||q===k)return q}).BREAK=j,b.RETURN=k},function(a,b){a.exports=function(a,b,c,d){if(!(a instanceof b)||void 0!==d&&d in a)throw TypeError(c+": incorrect invocation!");return a}},function(a,b,c){"use strict";var d,e,f,g,h=c(35),i=c(1),j=c(15),k=c(19),l=c(5),m=c(10),n=c(14),o=c(66),p=c(65),q=c(33),r=c(32).set,s=c(60)(),t=c(17),u=c(31),v=c(30),w=i.TypeError,x=i.process,y=i.Promise,z="process"==k(x),A=function(){},B=e=t.f,C=!!function(){try{var a=y.resolve(1),b=(a.constructor={})[c(0)("species")]=function(a){a(A,A)};return(z||"function"==typeof PromiseRejectionEvent)&&a.then(A)instanceof b}catch(a){}}(),D=function(a){var b;return!(!m(a)||"function"!=typeof(b=a.then))&&b},E=function(a,b){if(!a._n){a._n=!0;var c=a._c;s(function(){for(var d=a._v,e=1==a._s,f=0,g=function(b){var c,f,g=e?b.ok:b.fail,h=b.resolve,i=b.reject,j=b.domain;try{g?(e||(2==a._h&&H(a),a._h=1),!0===g?c=d:(j&&j.enter(),c=g(d),j&&j.exit()),c===b.promise?i(w("Promise-chain cycle")):(f=D(c))?f.call(c,h,i):h(c)):i(d)}catch(a){i(a)}};c.length>f;)g(c[f++]);a._c=[],a._n=!1,b&&!a._h&&F(a)})}},F=function(a){r.call(i,function(){var b,c,d,e=a._v,f=G(a);if(f&&(b=u(function(){z?x.emit("unhandledRejection",e,a):(c=i.onunhandledrejection)?c({promise:a,reason:e}):(d=i.console)&&d.error&&d.error("Unhandled promise rejection",e)}),a._h=z||G(a)?2:1),a._a=void 0,f&&b.e)throw b.v})},G=function(a){return 1!==a._h&&0===(a._a||a._c).length},H=function(a){r.call(i,function(){var b;z?x.emit("rejectionHandled",a):(b=i.onrejectionhandled)&&b({promise:a,reason:a._v})})},I=function(a){var b=this;b._d||(b._d=!0,(b=b._w||b)._v=a,b._s=2,b._a||(b._a=b._c.slice()),E(b,!0))},J=function a(b){var c,d=this;if(!d._d){d._d=!0,d=d._w||d;try{if(d===b)throw w("Promise can't be resolved itself");(c=D(b))?s(function(){var e={_w:d,_d:!1};try{c.call(b,j(a,e,1),j(I,e,1))}catch(a){I.call(e,a)}}):(d._v=b,d._s=1,E(d,!1))}catch(b){I.call({_w:d,_d:!1},b)}}};C||(y=function(a){o(this,y,"Promise","_h"),n(a),d.call(this);try{a(j(J,this,1),j(I,this,1))}catch(a){I.call(this,a)}},(d=function(a){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=c(59)(y.prototype,{then:function(a,b){var c=B(q(this,y));return c.ok="function"!=typeof a||a,c.fail="function"==typeof b&&b,c.domain=z?x.domain:void 0,this._c.push(c),this._a&&this._a.push(c),this._s&&E(this,!1),c.promise},catch:function(a){return this.then(void 0,a)}}),f=function(){var a=new d;this.promise=a,this.resolve=j(J,a,1),this.reject=j(I,a,1)},t.f=B=function(a){return a===y||a===g?new f(a):e(a)}),l(l.G+l.W+l.F*!C,{Promise:y}),c(18)(y,"Promise"),c(58)("Promise"),g=c(2).Promise,l(l.S+l.F*!C,"Promise",{reject:function(a){var b=B(this);return(0,b.reject)(a),b.promise}}),l(l.S+l.F*(h||!C),"Promise",{resolve:function(a){return v(h&&this===g?y:this,a)}}),l(l.S+l.F*!(C&&c(57)(function(a){y.all(a).catch(A)})),"Promise",{all:function(a){var b=this,c=B(b),d=c.resolve,e=c.reject,f=u(function(){var c=[],f=0,g=1;p(a,!1,function(a){var h=f++,i=!1;c.push(void 0),g++,b.resolve(a).then(function(a){i||(i=!0,c[h]=a,--g||d(c))},e)}),--g||d(c)});return f.e&&e(f.v),c.promise},race:function(a){var b=this,c=B(b),d=c.reject,e=u(function(){p(a,!1,function(a){b.resolve(a).then(c.resolve,d)})});return e.e&&d(e.v),c.promise}})},function(a,b){a.exports=function(a,b){return{value:b,done:!!a}}},function(a,b,c){"use strict";var d=c(37),e=c(68),f=c(6),g=c(23);a.exports=c(36)(Array,"Array",function(a,b){this._t=g(a),this._i=0,this._k=b},function(){var a=this._t,b=this._k,c=this._i++;return!a||c>=a.length?(this._t=void 0,e(1)):e(0,"keys"==b?c:"values"==b?a[c]:[c,a[c]])},"values"),f.Arguments=f.Array,d("keys"),d("values"),d("entries")},function(a,b,c){for(var d=c(69),e=c(24),f=c(8),g=c(1),h=c(4),i=c(6),j=c(0),k=j("iterator"),l=j("toStringTag"),m=i.Array,n={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},o=e(n),p=0;p<o.length;p++){var q,r=o[p],s=n[r],t=g[r],u=t&&t.prototype;if(u&&(u[k]||h(u,k,m),u[l]||h(u,l,r),i[r]=m,s))for(q in d)u[q]||f(u,q,d[q],!0)}},function(a,b,c){var d=c(7),e=c(38),f=c(20)("IE_PROTO"),g=Object.prototype;a.exports=Object.getPrototypeOf||function(a){return a=e(a),d(a,f)?a[f]:"function"==typeof a.constructor&&a instanceof a.constructor?a.constructor.prototype:a instanceof Object?g:null}},function(a,b,c){var d=c(16),e=c(3),f=c(24);a.exports=c(9)?Object.defineProperties:function(a,b){e(a);for(var c,g=f(b),h=g.length,i=0;h>i;)d.f(a,c=g[i++],b[c]);return a}},function(a,b,c){var d=c(3),e=c(72),f=c(39),g=c(20)("IE_PROTO"),h=function(){},i=function(){var a,b=c(26)("iframe"),d=f.length;for(b.style.display="none",c(34).appendChild(b),b.src="javascript:",(a=b.contentWindow.document).open(),a.write("<script>document.F=Object<\/script>"),a.close(),i=a.F;d--;)delete i.prototype[f[d]];return i()};a.exports=Object.create||function(a,b){var c;return null!==a?(h.prototype=d(a),c=new h,h.prototype=null,c[g]=a):c=i(),void 0===b?c:e(c,b)}},function(a,b,c){"use strict";var d=c(73),e=c(44),f=c(18),g={};c(4)(g,c(0)("iterator"),function(){return this}),a.exports=function(a,b,c){a.prototype=d(g,{next:e(1,c)}),f(a,b+" Iterator")}},function(a,b,c){var d=c(21),e=c(22);a.exports=function(a){return function(b,c){var f,g,h=String(e(b)),i=d(c),j=h.length;return i<0||i>=j?a?"":void 0:(f=h.charCodeAt(i))<55296||f>56319||i+1===j||(g=h.charCodeAt(i+1))<56320||g>57343?a?h.charAt(i):f:a?h.slice(i,i+2):g-56320+(f-55296<<10)+65536}}},function(a,b,c){"use strict";var d=c(75)(!0);c(36)(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,b=this._t,c=this._i;return c>=b.length?{value:void 0,done:!0}:(a=d(b,c),this._i+=a.length,{value:a,done:!1})})},function(a,b,c){"use strict";var d=c(19),e={};e[c(0)("toStringTag")]="z",e+""!="[object z]"&&c(8)(Object.prototype,"toString",function(){return"[object "+d(this)+"]"},!0)},function(a,b,c){c(77),c(76),c(70),c(67),c(56),c(55),a.exports=c(2).Promise},function(a,b,c){"use strict";var d=c(5),e=c(42)(!0);d(d.P,"Array",{includes:function(a){return e(this,a,arguments.length>1?arguments[1]:void 0)}}),c(37)("includes")},function(a,b,c){c(79),a.exports=c(2).Array.includes},function(a,b){b.f={}.propertyIsEnumerable},function(a,b){b.f=Object.getOwnPropertySymbols},function(a,b,c){var d=c(21),e=Math.max,f=Math.min;a.exports=function(a,b){return(a=d(a))<0?e(a+b,0):f(a,b)}},function(a,b,c){var d=c(7),e=c(23),f=c(42)(!1),g=c(20)("IE_PROTO");a.exports=function(a,b){var c,h=e(a),i=0,j=[];for(c in h)c!=g&&d(h,c)&&j.push(c);for(;b.length>i;)d(h,c=b[i++])&&(~f(j,c)||j.push(c));return j}},function(a,b,c){"use strict";var d=c(24),e=c(82),f=c(81),g=c(38),h=c(43),i=Object.assign;a.exports=!i||c(27)(function(){var a={},b={},c=Symbol(),d="abcdefghijklmnopqrst";return a[c]=7,d.split("").forEach(function(a){b[a]=a}),7!=i({},a)[c]||Object.keys(i({},b)).join("")!=d})?function(a,b){for(var c=g(a),i=arguments.length,j=1,k=e.f,l=f.f;i>j;)for(var m,n=h(arguments[j++]),o=k?d(n).concat(k(n)):d(n),p=o.length,q=0;p>q;)l.call(n,m=o[q++])&&(c[m]=n[m]);return c}:i},function(a,b,c){var d=c(10);a.exports=function(a,b){if(!d(a))return a;var c,e;if(b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;if("function"==typeof(c=a.valueOf)&&!d(e=c.call(a)))return e;if(!b&&"function"==typeof(c=a.toString)&&!d(e=c.call(a)))return e;throw TypeError("Can't convert object to primitive value")}},function(a,b,c){a.exports=!c(9)&&!c(27)(function(){return 7!=Object.defineProperty(c(26)("div"),"a",{get:function(){return 7}}).a})},function(a,b,c){var d=c(5);d(d.S+d.F,"Object",{assign:c(85)})},function(a,b,c){c(88),a.exports=c(2).Object.assign},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0}),b.FetcherJQuery=b.Fetcher=b.IFramePassive=b.Popup=b.HTTPRedirect=b.BasicLoader=b.JSO=void 0;var e="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(a){return _typeof(a)}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":_typeof(a)},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){
return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=d(c(89));c(80),c(78);var h=d(c(54)),i=d(c(12)),j=d(c(11)),k=d(c(53)),l=d(c(52)),m=d(c(51)),n=d(c(50)),o=d(c(49)),p=d(c(48)),q=d(c(47)),r=d(c(46));c(45);var s={lifetime:3600},t=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=_typeof(b)&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.configure(a),c.providerID=c.getProviderID(),c.Loader=k.default,c.store=h.default,c.callbacks={},c.config.getValue("debug",!1)&&(i.default.debug=!0),c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+_typeof(b));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,r.default),f(b,[{key:"configure",value:function(a){this.config=new q.default(s,a)}},{key:"setStore",value:function(a){this.store=a}},{key:"setLoader",value:function(a){if("function"!=typeof a)throw new Error("loader MUST be an instance of the JSO BasicLoader");this.Loader=a}},{key:"getProviderID",value:function(){var a=this.config.getValue("providerID",null);if(null!==a)return a;var b=this.config.getValue("client_id",null,!0);return this.config.getValue("authorization",null,!0)+"|"+b}},{key:"processTokenResponse",value:function(a){var b=void 0;if(!a.state)throw new Error("Could not get state from storage.");if(!(b=this.store.getState(a.state)))throw new Error("Could not retrieve state");if(!b.providerID)throw new Error("Could not get providerid from state");return i.default.log("processTokenResponse ",a,""),this.processReceivedToken(a,b)}},{key:"processReceivedToken",value:function(a,b){var c=i.default.epoch();return a.received=c,a.expires_in?(a.expires=c+parseInt(a.expires_in,10),a.expires_in=parseInt(a.expires_in,10)):!1===this.config.getValue("default_lifetime",null)?a.expires=null:this.config.has("permanent_scope")?this.store.hasScope(a,this.config.getValue("permanent_scope"))||(a.expires=null):this.config.has("default_lifetime")?a.expires=c+this.config.getValue("default_lifetime"):a.expires=c+3600,a.scope?(a.scopes=a.scope.split(" "),delete a.scope):b.scopes?a.scopes=b.scopes:a.scopes=[],i.default.log("processTokenResponse completed ",a,""),this.store.saveToken(b.providerID,a),b.restoreHash?window.location.hash=b.restoreHash:window.location.hash="",a}},{key:"processAuthorizationCodeResponse",value:function(a){var b=this;console.log(this),this.emit("authorizationCode",a);var c=void 0;if(!a.state)throw new Error("Could not find state paramter from callback.");if(null===(c=this.store.getState(a.state)))throw new Error("Could not find retrieve state object.");if(console.log("state",c),this.config.has("token")){if(!this.config.has("client_secret"))throw new Error("Configuration missing [client_secret]");var d=new Headers;d.append("Authorization","Basic "+btoa(this.config.getValue("client_id")+":"+this.config.getValue("client_secret"))),d.append("Content-Type","application/x-www-form-urlencoded;charset=UTF-8");var e={grant_type:"authorization_code",code:a.code};c.hasOwnProperty("redirect_uri")&&(e.redirect_uri=c.redirect_uri);var f={mode:"cors",headers:d,method:"POST",body:i.default.encodeQS(e)};return fetch(this.config.getValue("token"),f).then(function(a){return a.json()}).then(function(a){return i.default.log("Received response on token endpoint ",a,""),b.processReceivedToken(a,c)})}i.default.log("Received an authorization code. Will not process it as the config option [token] endpoint is not set. If you would like to process the code yourself, please subscribe to the [authorizationCode] event")}},{key:"processErrorResponse",value:function(a){var b;if(!a.state)throw new Error("Could not get [state] and no default providerid is provided.");if(!(b=this.store.getState(a.state)))throw new Error("Could not retrieve state");if(!b.providerID)throw new Error("Could not get providerid from state");return b.restoreHash?window.location.hash=b.restoreHash:window.location.hash="",new p.default(a)}},{key:"callback",value:function(a){var b=null;if("object"===(void 0===a?"undefined":e(a)))b=a;else if("string"==typeof a)b=i.default.getResponseFromURL(a);else{if(void 0!==a)return;b=i.default.getResponseFromURL(window.location.href)}if(i.default.log("Receving response in callback",b),b.hasOwnProperty("access_token"))return this.processTokenResponse(b);if(b.hasOwnProperty("code"))return this.processAuthorizationCodeResponse(b);if(b.hasOwnProperty("error"))throw this.processErrorResponse(b)}},{key:"dump",value:function(){var a=this.store.getTokens(this.providerID);return{providerID:this.providerID,tokens:a,config:this.config}}},{key:"_getRequestScopes",value:function(a){var b,c=[];if(this.config.has("scopes.request")){var d=this.config.getValue("scopes.request");for(b=0;b<d.length;b++)c.push(d[b])}if(a&&a.scopes&&a.scopes.request)for(b=0;b<a.scopes.request.length;b++)c.push(a.scopes.request[b]);return i.default.uniqueList(c)}},{key:"_getRequiredScopes",value:function(a){var b,c=[];if(this.config.has("scopes.require")){var d=this.config.getValue("scopes.require");for(b=0;b<d.length;b++)c.push(d[b])}if(a&&a.scopes&&a.scopes.require)for(b=0;b<a.scopes.require.length;b++)c.push(a.scopes.require[b]);return i.default.uniqueList(c)}},{key:"getToken",value:function(a){var b=this;return a=a||{},new Promise(function(c,d){var e=b._getRequiredScopes(a),f=b.store.getToken(b.providerID,e);if(f)return c(f);if(a.hasOwnProperty("allowredir")&&!a.allowredir)throw new Error("Cannot obtain a token, when not allowed to redirect...");c(b._authorize(a))})}},{key:"checkToken",value:function(a){var b=this._getRequiredScopes(a);return this.store.getToken(this.providerID,b)}},{key:"_authorize",value:function(a){var b,c,d,e=this;return Promise.resolve().then(function(){var f,h=e.config.getValue("authorization",null,!0),j=e.config.getValue("client_id",null,!0);if(a.hasOwnProperty("allowia")||e.config.has("allowia"))throw new Error('The allowia option was removed in JSO 4.1.0. Instead use {request: {prompt: "none"}}');if(i.default.log("About to send an authorization request to this endpoint",h),i.default.log("Options",a),b={},e.config.has("request")){var k=e.config.getValue("request");b=(0,g.default)(b,k)}if(a.hasOwnProperty("request")&&(b=(0,g.default)(b,a.request)),b.response_type=a.response_type||e.config.getValue("response_type","id_token token"),b.state=i.default.uuid(),e.config.has("redirect_uri")&&(b.redirect_uri=e.config.getValue("redirect_uri","")),a.redirect_uri&&(b.redirect_uri=a.redirect_uri),b.client_id=j,f=(d=e._getRequestScopes(a)).includes("openid"),d.length>0&&(b.scope=i.default.scopeList(d)),i.default.log("Running in mode: "+(f?"OpenID Connect mode":"OAuth mode")),f&&!b.hasOwnProperty("redirect_uri"))throw new Error("An OpenID Request requires a redirect_uri to be set. Please add to configuration. A redirect_uri is not required for plain OAuth");f&&(b.nonce=i.default.uuid()),i.default.log("Debug Authentication request object",JSON.stringify(b,void 0,2)),c=i.default.encodeURL(h,b),window.location.hash&&(b.restoreHash=window.location.hash),b.providerID=e.providerID,d&&(b.scopes=d),i.default.log("Saving state ["+b.state+"]"),i.default.log(JSON.parse(JSON.stringify(b)));var l=e.Loader;return a.hasOwnProperty("loader")&&(l=a.loader),i.default.log("Looking for loader",a,l),e.store.saveState(b.state,b),e.gotoAuthorizeURL(c,l).then(function(a){if(!0!==a)return e.callback(a)})})}},{key:"gotoAuthorizeURL",value:function(a,b){return new Promise(function(c,d){if(null!==b&&"function"==typeof b){var e=new b(a);if(!(e instanceof j.default))throw new Error("JSO selected Loader is not an instance of BasicLoader.");c(e.execute())}else d(new Error("Cannot redirect to authorization endpoint because of missing redirect handler"))})}},{key:"wipeTokens",value:function(){this.store.wipeTokens(this.providerID)}}]),b}();b.JSO=t,b.BasicLoader=j.default,b.HTTPRedirect=k.default,b.Popup=m.default,b.IFramePassive=l.default,b.Fetcher=n.default,b.FetcherJQuery=o.default}])}),$(document).ready(function(){console.log("Listening for KPAS-LTI requests."),window.addEventListener("message",function(a){var b=function(a){return console.error("error calling api",a)};try{var c=JSON.parse(a.data);if(console.log("Parent received message "+a.data),"kpas-lti.getusergroups"==c.subject)mmooc.api.getUserGroups(function(b){var c={subject:"kpas-lti.usergroups",groups:b},d=JSON.stringify(c);a.source.postMessage(d,a.origin)},b);else if("kpas-lti.3pcookiesupported"==c.subject)console.log("Din nettleser sttter cookies fra tredjeparter, noe som trengs for  bruke KPAS");else if("kpas-lti.3pcookienotsupported"==c.subject){var d=$("#kpas-lti-cookie-check");d.html("En automatisk sjekk har funnet at                 du har sltt av informasjonskapsler fra tredjepartsnettsteder.                 Du vil ikke kunne velge hvilken rolle eller hvilke grupper du skal delta i.                <p>Kontakt din IT-avdeling eller les om hvordan du                 <a class='alert-link' target='_blank' href='https://nettvett.no/slik-administrer-du-informasjonskapsler/'>                aktiverer informasjonskapsler fra tredjeparter.</a>"),d.show(),console.error("Din nettleser sttter IKKE cookies fra tredjeparter. Rolle og gruppeverktyet krever cookies fra tredjepart.")}}catch(a){console.log.call(console,"Error handeling message in parent:"+a)}},!1);try{$("#tool_content").ready(function(){console.log("LTI iframe ready. Informing it parent is also ready.");var a={subject:"kpas-lti.ltiparentready"},b=document.getElementById("tool_content");b&&b.contentWindow.postMessage(JSON.stringify(a),"*")})}catch(a){console.log.call(console,"No LTI tool active."+a)}}),this.mmooc=this.mmooc||{},this.mmooc.nrk=function(){return{init:function(){mmooc.util.mmoocLoadScript("https://www.nrk.no/serum/latest/js/video_embed.js")}}}(),window.addEventListener("message",receiveMessage,!1),$(document).ready(function(){onPage(/\/(courses|groups)\/\d+/,function(){uobAddComponents()})}),this.mmooc=this.mmooc||{},this.mmooc.youtube=function(){function a(a,d,e){var a=a,f=a.split(c)[1],g=b+f;""!=d&&(g=g+"&lang="+d),""!=e&&(g=g+"&name="+e);var h=!1,i=null,j=null,k=0,l=0;this.player=new YT.Player(f,{videoId:f,events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}});var m=function(a){for(var b=0,c=0,d=0,e=j.length;d<e&&(b=Number(q(d)),c=Number(r(d)),!(a<b))&&!(a>=b&&a<b+c);d++);return d},n=function(){var a=s(k);$("#"+a).css("background-color","")},o=function(){var a=s(l);$("#"+a).css("background-color","yellow")},p=function(a){return Number(q(k))-a+Number(r(k))};this.setCaptionTimeout=function(a){if(!(a<0)){clearTimeout(i);var b=this;i=setTimeout(function(){b.highlightCaptionAndPrepareForNext()},1e3*a)}};var q=function(a){return a>=j.length?-1:j[a].getAttribute("start")},r=function(a){return a>=j.length?-1:j[a].getAttribute("dur")},s=function(a){return"t"+a};this.highlightCaptionAndPrepareForNext=function(){n(),o(),k=l,l++;var a=this.player.getCurrentTime(),b=p(a);l<=j.length&&this.setCaptionTimeout(b)},this.highlightCaptionFromTimestamp=function(a){n(),l=m(a),k=l;var b=Number(q(k)),c=-1;a<b?c=b-currentTime:(o(),c=p(currentTime)),this.setCaptionTimeout(c)},this.transcriptLoaded=function(a){var b=0;j=a.getElementsByTagName("text");for(var c="<div class='btnSeek' id='btnSeek' data-seek='0'>0:00</div>",d=0,e=j.length;d<e;d++){b=+q(d),captionText=j[d].textContent.replace(/</g,"&lt;").replace(/>/g,"&gt;");c+="<span class='btnSeek' data-seek='"+b+"' id='"+s(d)+"'>"+captionText+"</span> "}$("#videoTranscript"+f).append(c),h=!0},this.getTranscriptId=function(){return a},this.getVideoId=function(){return f},this.getTranscript=function(){var a=this;$.ajax({url:g,type:"GET",data:{},success:function(b){a.transcriptLoaded(b)},error:function(a,b,c){console.log("Error during GET")}})},this.playerPlaying=function(){h&&(currentTime=this.player.getCurrentTime(),this.highlightCaptionFromTimestamp(currentTime))},this.playerNotPlaying=function(a){h&&clearTimeout(i)}}var b="https://video.google.com/timedtext?v=",c="videoTranscript",d=[],e=!1;$(function(){$(document).on("click",".btnSeek",function(){var a=$(this).data("seek"),b=mmooc.youtube.getTranscriptFromTranscriptId($(this).parent().attr("id"));b.player.seekTo(a,!0),b.player.playVideo()})});var f=window.onYouTubePlayerAPIReady;return window.onYouTubePlayerAPIReady=function(){f&&f(),mmooc.youtube.APIReady()},window.onPlayerReady=function(a){},window.onPlayerStateChange=function(a){console.log("onPlayerStateChange "+a.data);var b=this.mmooc.youtube.getTranscriptFromVideoId(a.target.getIframe().id);a.data==YT.PlayerState.PLAYING?b.playerPlaying():b.playerNotPlaying()},{getTranscriptFromTranscriptId:function(a){for(index=0;index<d.length;++index)if(d[index].getTranscriptId()==a)return d[index];return null},getTranscriptFromVideoId:function(a){for(index=0;index<d.length;++index)if(d[index].getVideoId()==a)return d[index];return null},APIReady:function(){e||($(".mmocVideoTranscript").each(function(b){var c=$(this).data("language"),e=$(this).data("name"),f=new a(this.id,c,e);f.getTranscript(),d.push(f)}),e=!0)},init:function(){this.APIReady()}}}(),$.getScript("https://www.youtube.com/iframe_api"),this.mmooc=this.mmooc||{},this.mmooc.templates=this.mmooc.templates||{},this.mmooc.templates.actionbutton=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div class="mmooc-action-button">\n    <a href="#" id="',(g=c.id)?f=g.call(b,{hash:{},data:e}):(g=b&&b.id,f=_typeof(g)===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="btn btn-done">',(g=c.title)?f=g.call(b,{hash:{},data:e}):(g=b&&b.title,f=_typeof(g)===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"</a>\n</div>"}),this.mmooc.templates.activitystream=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f,h="";return h+='\n    <li class="'+l((e=c.checkReadStateFor||a&&a.checkReadStateFor,f={hash:{},data:b},e?e.call(a,a,f):k.call(a,"checkReadStateFor",a,f)))+'">\n        <a href="'+l((e=c.findRightUrlFor||a&&a.findRightUrlFor,f={hash:{},data:b},e?e.call(a,a,f):k.call(a,"findRightUrlFor",a,f)))+'">',(e=c.title)?d=e.call(a,{hash:{},data:b}):(e=a&&a.title,d=_typeof(e)===m?e.call(a,{hash:{},data:b}):e),h+=l(d)+'\n            <br>\n            <span class="mmooc-notification-type">'+l((e=c.localize||a&&a.localize,f={hash:{},data:b},e?e.call(a,a&&a.type,f):k.call(a,"localize",a&&a.type,f)))+'</span>\n            <br>\n            <span class="notification-pubdate">',(e=c.created_at)?d=e.call(a,{hash:{},data:b}):(e=a&&a.created_at,d=_typeof(e)===m?e.call(a,{hash:{},data:b}):e),h+=l(d)+"</span>\n        </a>\n    </li>\n    ",d=c.if.call(a,null==b||!1===b?b:b.last,{hash:{},inverse:n.noop,fn:n.program(2,g,b),data:b}),(d||0===d)&&(h+=d),h+=" "}function g(a,b){return'\n    <a href="#" id="mmooc-notifications-showall">Vis alle</a>\n    '}function h(a,b){return"\n    <li>Ingen varsler</li>\n    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k=c.helperMissing,l=this.escapeExpression,m="function",n=this;return j+='<ul id="mmooc-notifications">\n    ',i=c.each.call(b,b&&b.activities,{hash:{},inverse:n.program(4,h,e),fn:n.program(1,f,e),data:e}),(i||0===i)&&(j+=i),j+="\n</ul>"}),this.mmooc.templates.allcoursescontainer=Handlebars.template(function(a,b,c,d,e){function f(a,b){return'\n      <button id="mmooc-all-courses-btn" class="btn">Til mine kompetansepakker</button>\n    '}function g(a,b){return"\n      Her finner du en oversikt over alle tilgjengelige kompetansepakker som du kan melde deg p. \n    "}function h(a,b){return"\n      Tjenesten er laget for ansatte i skole og barnehage. Den er gratis og du kan logge p med Feide eller \n      opprette en egen bruker. \n    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j,k="",l=this,m=this.escapeExpression;return k+='<div class="mmooc-all-courses">\n    \x3c!-- TODO: use translation feature --\x3e\n    <div class="mmooc-all-courses-header">\n    <h1>Velkommen til Utdanningsdirektoratets kompetanseportal</h1>\n    ',i=c.if.call(b,b&&b.isAuthenticated,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(i||0===i)&&(k+=i),k+="\n    </div>\n    ",i=c.if.call(b,b&&b.isAuthenticated,{hash:{},inverse:l.program(5,h,e),fn:l.program(3,g,e),data:e}),(i||0===i)&&(k+=i),k+='    \n    \x3c!--If the amount of courses is large, the filter select box and corresponding javascript code in enroll.js should be enabled\n    <select id=\'filter\'></select>\n    --\x3e\n    <div class="pfdk-info">\n    1. oktober 2019 lanserte vi ny teknisk lsning for kompetanseportalen. Velkommen! \n    Innhold i den <a href="https://beta.kompetanse.udir.no" target="_blank">utgtte lsningen</a> \n    vil vre tilgjengelig for eksisterende brukere frem til 31.12.2019.</a>\n    </div>\n\x3c!--    <h3>Alle tilgjengelige ',(j=c.courseLabel)?i=j.call(b,{hash:{},data:e}):(j=b&&b.courseLabel,i="function"===_typeof(j)?j.call(b,{hash:{},data:e}):j),k+=m(i)+'</h3>--\x3e\n    <div class="mmooc-all-courses-list"></div>\n</div>\n'}),this.mmooc.templates.allcourseslist=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n                        <div class="mmooc-tag mmooc-tag-teal">\n                            <label>',(e=c.coursesAmountText)?d=e.call(a,{hash:{},data:b}):(e=a&&a.coursesAmountText,d=_typeof(e)===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+"</label>\n                        </div>\n                    "}function g(a,b){var d,e,f="";return f+='\n                        <div class="mmooc-tag mmooc-tag-green">\n                            <label>',(e=c.YouAreRegisteredToXCoursesText)?d=e.call(a,{hash:{},data:b}):(e=a&&a.YouAreRegisteredToXCoursesText,d=_typeof(e)===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+"</label>\n                        </div>\n                    "}function h(a,b){var d,e,f="";return f+='\n                    <span class="',(e=c.id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.id,d=_typeof(e)===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+'" data-name="course">\n                    <button id="mmooc-tab-head-',(e=c.id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.id,d=_typeof(e)===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+'" class="mmooc-tab-head mmooc-tab-head-'+w((d=null==b||!1===b?b:b.index,_typeof(d)===v?d.apply(a):d))+'" index="',(e=c.id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.id,d=_typeof(e)===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+'">\n                        ',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=_typeof(e)===v?e.call(a,{hash:{},data:b}):e),f+=w(d)+"\n                        ",d=c.if.call(a,a&&a.enrolled,{hash:{},inverse:x.noop,fn:x.program(6,i,b),data:b}),(d||0===d)&&(f+=d),f+="\n                    </button>\n                    </span>\n                    "}function i(a,b){return'\n                            <svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M-4-4h24v24H-4z"/><path d="M8 0c4.416 0 8 3.584 8 8s-3.584 8-8 8-8-3.584-8-8 3.584-8 8-8zM6.4 12l6.43-6.43-1.127-1.137L6.4 9.736 3.528 6.872 2.4 8l4 4z" fill="#00AC18" fill-rule="nonzero"/></g></svg>\n                        '}function j(a,b,d){var e,f,g="";return g+='\n                    <div id="mmooc-tab-content-',(f=c.id)?e=f.call(a,{hash:{},data:b}):(f=a&&a.id,e=_typeof(f)===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'" class="mmooc-tab-content mmooc-tab-content-'+w((e=null==b||!1===b?b:b.index,_typeof(e)===v?e.apply(a):e))+'">\n                        <p>',(f=c.public_description)?e=f.call(a,{hash:{},data:b}):(f=a&&a.public_description,e=_typeof(f)===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'</p>\n                        <div class="mmooc-button-ctr">\n                            ',e=c.unless.call(a,d&&d.isAuthenticated,{hash:{},inverse:x.noop,fn:x.programWithDepth(9,k,b,d),data:b}),(e||0===e)&&(g+=e),g+="\n                            ",e=c.if.call(a,a&&a.enrolled,{hash:{},inverse:x.programWithDepth(13,m,b,a,d),fn:x.programWithDepth(11,l,b,a,d),data:b}),(e||0===e)&&(g+=e),g+="\n                        </div>\n                    </div>\n                    "}function k(a,b,d){var e,f,g="";return g+='\n                              <a class="mmooc-button mmooc-button-primary" href="/courses'+w((e=d&&d.queryString,_typeof(e)===v?e.apply(a):e))+"&enroll_code=",(f=c.self_enrollment_code)?e=f.call(a,{hash:{},data:b}):(f=a&&a.self_enrollment_code,e=_typeof(f)===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'">\n                              </a>\n                            '}function l(a,b,c,d){var e,f="";return f+='\n                              <a class="mmooc-button mmooc-button-secondary" href="/courses/'+w((e=c&&c.id,_typeof(e)===v?e.apply(a):e))+'">'+w((e=d&&d.goToCourse,_typeof(e)===v?e.apply(a):e))+"</a>\n                            "}function m(a,b,c,d){var e,f="";return f+='\n                                <a class="mmooc-button mmooc-button-secondary" href="/enroll/'+w((e=c&&c.self_enrollment_code,_typeof(e)===v?e.apply(a):e))+'">'+w((e=d&&d.courseRegister,_typeof(e)===v?e.apply(a):e))+"</a>\n                            "}function n(a,b,d){var e,f,g="";return g+='\n                <span class="',(f=c.id)?e=f.call(a,{hash:{},data:b}):(f=a&&a.id,e=_typeof(f)===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'" data-name="course">\n                <button id="mmooc-tabs-mobile-header-',(f=c.id)?e=f.call(a,{hash:{},data:b}):(f=a&&a.id,e=_typeof(f)===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'" class="mmooc-tabs-mobile-header" index=',(f=c.id)?e=f.call(a,{hash:{},data:b}):(f=a&&a.id,e=_typeof(f)===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+">\n                    ",(f=c.name)?e=f.call(a,{hash:{},data:b}):(f=a&&a.name,e=_typeof(f)===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+"\n                    ",e=c.if.call(a,a&&a.enrolled,{hash:{},inverse:x.noop,fn:x.program(16,o,b),data:b}),(e||0===e)&&(g+=e),g+='\n                </button>\n                </span>\n                <article id="mmooc-tabs-mobile-content-',(f=c.id)?e=f.call(a,{hash:{},data:b}):(f=a&&a.id,e=_typeof(f)===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'" class="mmooc-tabs-mobile-content">\n                    <p>',(f=c.public_description)?e=f.call(a,{hash:{},data:b}):(f=a&&a.public_description,e=_typeof(f)===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'</p>\n                    <div class="mmooc-button-ctr">\n                        ',e=c.unless.call(a,d&&d.isAuthenticated,{hash:{},inverse:x.noop,fn:x.programWithDepth(18,p,b,d),data:b}),(e||0===e)&&(g+=e),g+="\n                        ",e=c.if.call(a,a&&a.enrolled,{hash:{},inverse:x.programWithDepth(22,r,b,a,d),fn:x.programWithDepth(20,q,b,a,d),data:b}),(e||0===e)&&(g+=e),g+="\n                    </div>\n                </article>\n                "}function o(a,b){return'\n                        <svg width="16" height="16" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M-4-4h24v24H-4z"/><path d="M8 0c4.416 0 8 3.584 8 8s-3.584 8-8 8-8-3.584-8-8 3.584-8 8-8zM6.4 12l6.43-6.43-1.127-1.137L6.4 9.736 3.528 6.872 2.4 8l4 4z" fill="#00AC18" fill-rule="nonzero"/></g></svg>\n                    '}function p(a,b,d){var e,f,g="";return g+='\n                            <a class="mmooc-button mmooc-button-primary" href="/courses'+w((e=d&&d.queryString,_typeof(e)===v?e.apply(a):e))+"&enroll_code=",(f=c.self_enrollment_code)?e=f.call(a,{hash:{},data:b}):(f=a&&a.self_enrollment_code,e=_typeof(f)===v?f.call(a,{hash:{},data:b}):f),g+=w(e)+'"></a>\n                        '}function q(a,b,c,d){var e,f="";return f+='\n                            <a class="mmooc-button mmooc-button-secondary" href="/courses/'+w((e=c&&c.id,_typeof(e)===v?e.apply(a):e))+'">'+w((e=d&&d.goToCourse,_typeof(e)===v?e.apply(a):e))+"</a>\n                        "}function r(a,b,c,d){var e,f="";return f+='\n                            <a class="mmooc-button mmooc-button-secondary" href="/enroll/'+w((e=c&&c.self_enrollment_code,_typeof(e)===v?e.apply(a):e))+'">'+w((e=d&&d.courseRegister,_typeof(e)===v?e.apply(a):e))+"</a>\n                        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var s,t,u="",v="function",w=this.escapeExpression,x=this;return u+='<div class="mmooc-enroll-category">\n    <section class="mmooc-accordion">\n        <button id="mmooc-accordion-header-',(t=c.index)?s=t.call(b,{hash:{},data:e}):(t=b&&b.index,s=_typeof(t)===v?t.call(b,{hash:{},data:e}):t),u+=w(s)+'" class="mmooc-accordion-header" index=',(t=c.index)?s=t.call(b,{hash:{},data:e}):(t=b&&b.index,s=_typeof(t)===v?t.call(b,{hash:{},data:e}):t),u+=w(s)+' data-title="',(t=c.title)?s=t.call(b,{hash:{},data:e}):(t=b&&b.title,s=_typeof(t)===v?t.call(b,{hash:{},data:e}):t),u+=w(s)+'">\n            <div class="mmooc-accordion-header-main" index=',(t=c.index)?s=t.call(b,{hash:{},data:e}):(t=b&&b.index,s=_typeof(t)===v?t.call(b,{hash:{},data:e}):t),u+=w(s)+">\n                <div>\n                    <h1>",(t=c.title)?s=t.call(b,{hash:{},data:e}):(t=b&&b.title,s=_typeof(t)===v?t.call(b,{hash:{},data:e}):t),u+=w(s)+"</h1>\n                </div> \n                <div>\n                    ",s=c.if.call(b,b&&b.coursesAmount,{hash:{},inverse:x.noop,fn:x.program(1,f,e),data:e}),(s||0===s)&&(u+=s),u+="\n                    \x3c!-- TODO: variable with a number of courses the user is subscribed to shall be placed here\n                        also, it should be visible only on the 'logged in screen' --\x3e\n                    ",s=c.if.call(b,b&&b.coursesEnrolledAmount,{hash:{},inverse:x.noop,fn:x.program(3,g,e),data:e}),(s||0===s)&&(u+=s),u+='\n                </div>\n            </div>\n            <div class="mmooc-accordion-label-closed">\n                <label class="mmooc-accordion-header-label">',(t=c.openCoursesGroupText)?s=t.call(b,{hash:{},data:e}):(t=b&&b.openCoursesGroupText,s=_typeof(t)===v?t.call(b,{hash:{},data:e}):t),u+=w(s)+'</label>\n                <svg width="16" height="9" xmlns="http://www.w3.org/2000/svg">\n                    <g fill="none" fill-rule="evenodd">\n                        <path d="M-8-12h32v32H-8z" />\n                        <path fill-opacity=".5" fill="#373737" d="M1.887 0L8 5.565 14.113 0 16 1.717 8 9 0 1.717z" />\n                    </g>\n                </svg>\n            </div>\n            <div class="mmooc-accordion-label-open">\n                <label class="mmooc-accordion-header-label">',(t=c.closeCoursesGroupText)?s=t.call(b,{hash:{},data:e}):(t=b&&b.closeCoursesGroupText,s=_typeof(t)===v?t.call(b,{hash:{},data:e}):t),u+=w(s)+'</label>\n                <svg width="16" height="9" xmlns="http://www.w3.org/2000/svg">\n                    <g fill="none" fill-rule="evenodd">\n                        <path d="M-8 21h32v-32H-8z" />\n                        <path fill="#24A1B3" d="M1.887 9L8 3.435 14.113 9 16 7.283 8 0 0 7.283z" />\n                    </g>\n                </svg>\n            </div>\n        </button>\n        <article id="mmooc-accordion-content-',(t=c.index)?s=t.call(b,{hash:{},data:e}):(t=b&&b.index,s=_typeof(t)===v?t.call(b,{hash:{},data:e}):t),u+=w(s)+'" class="mmooc-accordion-content">\n\n            <div class="mmooc-tabs">\n                <div class="mmooc-tab-heads">\n                    ',s=c.each.call(b,b&&b.courses,{hash:{},inverse:x.noop,fn:x.program(5,h,e),data:e}),(s||0===s)&&(u+=s),u+='\n                </div>\n                <div class="mmooc-tab-content-ctr">\n                    ',s=c.each.call(b,b&&b.courses,{hash:{},inverse:x.noop,fn:x.programWithDepth(8,j,e,b),data:e}),(s||0===s)&&(u+=s),u+=' \n                </div>\n            </div>\n\n            <section class="mmooc-tabs-mobile">\n                ',s=c.each.call(b,b&&b.courses,{hash:{},inverse:x.noop,fn:x.programWithDepth(15,n,e,b),data:e}),(s||0===s)&&(u+=s),u+="\n            </section>\n        </article>\n    </section>\n</div>\n"}),this.mmooc.templates.assignmentPageWithPeerReviewRightSide=Handlebars.template(function(a,b,c,d,e){function f(a,b){return" late"}function g(a,b){return" (for sen)"}function h(a,b){var d,e="";return e+='\n\t\t\t<ul class="mmooc-assignment-files">\n\t\t\t\t',d=c.each.call(a,(d=a&&a.submission,null==d||!1===d?d:d.attachments),{hash:{},inverse:t.noop,fn:t.program(6,i,b),data:b}),(d||0===d)&&(e+=d),e+="\n\t\t\t</ul>\n\t\t\t"}function i(a,b){var d,e,f="";return f+='\n\t\t\t\t<li>\n\t\t\t\t\t<a href="',(e=c.url)?d=e.call(a,{hash:{},data:b}):(e=a&&a.url,d=_typeof(e)===r?e.call(a,{hash:{},data:b}):e),f+=s(d)+'" class="file-big">',(e=c.display_name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.display_name,d=_typeof(e)===r?e.call(a,{hash:{},data:b}):e),f+=s(d)+"</a>\n\t\t\t\t</li>\n\t\t\t\t"}function j(a,b){var d,e,f,g="";return g+='\n\t\t\t<a href="'+s((e=c.getPathFromUrl||a&&a.getPathFromUrl,f={hash:{},data:b},e?e.call(a,(d=a&&a.submission,null==d||!1===d?d:d.preview_url),f):u.call(a,"getPathFromUrl",(d=a&&a.submission,null==d||!1===d?d:d.preview_url),f)))+'">Vis detaljer om innlevering &raquo;</a>\n\t\t\t'}function k(a,b){return"\n\t\t\t<p>Du m gjre hverandre-vurderingen(e) nedenfor fr du kan se detaljer om din oppgave.</p>\n\t\t\t"}function l(a,b){return"\n\t\t\t<li>Ingen innleveringer tildelt</li>\n\t\t\t"}function m(a,b){var d,e,f,g="";return g+='\n\t\t\t<li>\n\t\t\t\t<a class="'+s((e=c.getPeerReviewWorkflowIconClass||a&&a.getPeerReviewWorkflowIconClass,f={hash:{},data:b},e?e.call(a,a&&a.workflow_state,f):u.call(a,"getPeerReviewWorkflowIconClass",a&&a.workflow_state,f)))+'" href="'+s((d=a&&a.assessor,d=null==d||!1===d?d:d.mmooc_url,_typeof(d)===r?d.apply(a):d))+'">'+s((d=a&&a.assessor,d=null==d||!1===d?d:d.display_name,_typeof(d)===r?d.apply(a):d))+"</a>\n\t\t\t</li>\n\t\t\t"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var n,o,p,q="",r="function",s=this.escapeExpression,t=this,u=c.helperMissing;return q+='<div class="mmooc-assignment-rightside">\n\t<div class="mmooc-assignment-responses">\n\t\t<h3>Besvarelser</h3>\n\t\t<div class="mmooc-assignment-responses-contents">\n\t\t\t<p class="mmooc-assignment-delivery-date',n=c.if.call(b,(n=b&&b.submission,null==n||!1===n?n:n.late),{hash:{},inverse:t.noop,fn:t.program(1,f,e),data:e}),(n||0===n)&&(q+=n),q+='">Levert '+s((o=c.norwegianDateAndTime||b&&b.norwegianDateAndTime,p={hash:{},data:e},o?o.call(b,(n=b&&b.submission,null==n||!1===n?n:n.submitted_at),p):u.call(b,"norwegianDateAndTime",(n=b&&b.submission,null==n||!1===n?n:n.submitted_at),p))),n=c.if.call(b,(n=b&&b.submission,null==n||!1===n?n:n.late),{hash:{},inverse:t.noop,fn:t.program(3,g,e),data:e}),(n||0===n)&&(q+=n),q+="</p>\n\t\t\t",n=c.if.call(b,(n=b&&b.submission,null==n||!1===n?n:n.attachments),{hash:{},inverse:t.noop,fn:t.program(5,h,e),data:e}),(n||0===n)&&(q+=n),q+='\n\t\t</div>\n\t\t<div class="mmooc-assignment-details">\n\t\t\t',o=c.ifAllPeerReviewsAreComplete||b&&b.ifAllPeerReviewsAreComplete,p={hash:{},inverse:t.program(10,k,e),fn:t.program(8,j,e),data:e},n=o?o.call(b,b&&b.peerReview,p):u.call(b,"ifAllPeerReviewsAreComplete",b&&b.peerReview,p),(n||0===n)&&(q+=n),q+='\n\t\t</div>\n\t</div>\n\t<div class="mmooc-peer-reviews">\n\t\t<h3>Hverandrevurdering tildelt deg</h3>\n\t\t<ul class="unstyled_list">\n\t\t\t',n=c.unless.call(b,(n=b&&b.peerReview,null==n||!1===n?n:n.length),{hash:{},inverse:t.noop,fn:t.program(12,l,e),data:e}),(n||0===n)&&(q+=n),q+=" ",n=c.each.call(b,b&&b.peerReview,{hash:{},inverse:t.noop,fn:t.program(14,m,e),data:e}),(n||0===n)&&(q+=n),q+="\n\t\t</ul>\n\t</div>\n</div>"}),this.mmooc.templates.assignmentPageWithPeerReviewSaveRubricButton=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},
'<button type="button" id="mmooc_save_rubric_button" class="save_rubric_button btn btn-small">Lagre kommentar</button>'}),this.mmooc.templates.assignmentPageWithPeerReviewWarning=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="mmooc-peer-review-warning">\n\t<p class="mmooc-warning">\n\t\tDenne oppgaven er ikke ferdig fr du har fylt ut vurderingsskjemaet til hver tildelte hverandrevurdering\n\t</p>\n</div>'}),this.mmooc.templates.assignmentSubmission=Handlebars.template(function(a,b,c,d,e){function f(a,b){return" late"}function g(a,b){return" (for sen)"}function h(a,b){var c,d="";return d+='\n\t\t\t\t\t\t<span class="mmooc-assignment-delivered-by"> av '+E((c=a&&a.submission,c=null==c||!1===c?c:c.user,c=null==c||!1===c?c:c.name,_typeof(c)===D?c.apply(a):c))+"</span>\n\t\t\t\t\t\t"}function i(a,b){var d,e="";return e+=" ",d=c.if.call(a,a&&a.isPeerReviewFinished,{hash:{},inverse:F.program(10,k,b),fn:F.program(8,j,b),data:b}),(d||0===d)&&(e+=d),e+=" "}function j(a,b){return'\n\t\t<div class="mmooc-peer-review-success">\n\t\t\t<p class="mmooc-success singleLine">\n\t\t\t\tDu har fullfrt hverandrevurderingen.\n\t\t\t</p>\n\t\t</div>\n\t\t'}function k(a,b){return'\n\t\t<div class="mmooc-peer-review-warning">\n\t\t\t<p class="mmooc-warning singleLine">\n\t\t\t\tDenne oppgaven er ikke ferdig fr du har fylt ut vurderingsskjemaet.\n\t\t\t</p>\n\t\t</div>\n\t\t'}function l(a,b){return"\n\t\t\t\t<h3>Din vurdering</h3>\n\t\t\t\t"}function m(a,b){var d,e="";return e+=" ",d=c.if.call(a,a&&a.isTeacherViewingStudentsSubmission,{hash:{},inverse:F.program(17,o,b),fn:F.program(15,n,b),data:b}),(d||0===d)&&(e+=d),e+=" "}function n(a,b){return"\n\t\t\t\t<h3>Vurdering av besvarelse</h3>\n\t\t\t\t"}function o(a,b){return"\n\t\t\t\t<h3>Vurdering av din besvarelse</h3>\n\t\t\t\t"}function p(a,b){var c,d="";return d+='\n\t\t\t\t<p class="assessment">Karakter: '+E((c=a&&a.submission,c=null==c||!1===c?c:c.grade,_typeof(c)===D?c.apply(a):c))+"/"+E((c=a&&a.assignment,c=null==c||!1===c?c:c.points_possible,_typeof(c)===D?c.apply(a):c))+"</p>\n\t\t\t\t"}function q(a,b){var d,e="";return e+=" ",d=c.unless.call(a,a&&a.isPeerReviewFinished,{hash:{},inverse:F.noop,fn:F.program(22,r,b),data:b}),(d||0===d)&&(e+=d),e+='\n\t\t\t\t<a href="#" class="open-assessment-dialog-button">Vurderingsskjema</a>\n\t\t\t\t'}function r(a,b){return'\n\t\t\t\t<p class="assessment-warning">Du har ikke vurdert denne oppgaven.</p>\n\t\t\t\t'}function s(a,b){var d,e,f,g="";return g+='\n\t\t\t\t<p class="assessment-text">'+E((e=c.getSubmissionAssessmentText||a&&a.getSubmissionAssessmentText,f={hash:{},data:b},e?e.call(a,a&&a.peerReview,f):G.call(a,"getSubmissionAssessmentText",a&&a.peerReview,f)))+"</p>\n\t\t\t\t",e=c.ifAtLeastOnePeerReviewIsComplete||a&&a.ifAtLeastOnePeerReviewIsComplete,f={hash:{},inverse:F.program(27,u,b),fn:F.program(25,t,b),data:b},d=e?e.call(a,a&&a.peerReview,f):G.call(a,"ifAtLeastOnePeerReviewIsComplete",a&&a.peerReview,f),(d||0===d)&&(g+=d),g+=" "}function t(a,b){return'\n\t\t\t\t<a href="#" class="open-assessment-dialog-button">Vis vurdering</a>\n\t\t\t\t'}function u(a,b){return"\n\t\t\t\t<br/> "}function v(a,b){return" isPeerReviewPage"}function w(a,b){return" isSubmissionDetaisPage"}function x(a,b){return" withGradesText"}function y(a,b){return" withNoGradesText"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var z,A,B,C="",D="function",E=this.escapeExpression,F=this,G=c.helperMissing;return C+='<div class="mmooc-assignment-submission">\n\t<div class="mmooc-assignment-submission-leftside">\n\t\t<div class="mmooc-assignment-submission-metadata">\n\t\t\t<h2 class="mmooc-assignment-submission-header">',(A=c.submissionTitle)?z=A.call(b,{hash:{},data:e}):(A=b&&b.submissionTitle,z=_typeof(A)===D?A.call(b,{hash:{},data:e}):A),C+=E(z)+'</h2>\n\t\t\t<ul class="mmooc-assignment-submission-metadata-list">\n\t\t\t\t<li>\n\t\t\t\t\t<span class="title">Oppgave:</span>\n\t\t\t\t\t<span class="value">\n\t\t\t\t\t\t<a href="/courses/'+E((z=b&&b.submission,z=null==z||!1===z?z:z.course,z=null==z||!1===z?z:z.id,_typeof(z)===D?z.apply(b):z))+"/assignments/"+E((z=b&&b.submission,z=null==z||!1===z?z:z.assignment_id,_typeof(z)===D?z.apply(b):z))+'">'+E((z=b&&b.assignment,z=null==z||!1===z?z:z.name,_typeof(z)===D?z.apply(b):z))+'</a>\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<span class="title">Innlevert:</span>\n\t\t\t\t\t<span class="value">\n\t\t\t\t\t\t<span class="mmooc-assignment-delivery-date',z=c.if.call(b,(z=b&&b.submission,null==z||!1===z?z:z.late),{hash:{},inverse:F.noop,fn:F.program(1,f,e),data:e}),(z||0===z)&&(C+=z),C+='">'+E((A=c.norwegianDateAndTime||b&&b.norwegianDateAndTime,B={hash:{},data:e},A?A.call(b,(z=b&&b.submission,null==z||!1===z?z:z.submitted_at),B):G.call(b,"norwegianDateAndTime",(z=b&&b.submission,null==z||!1===z?z:z.submitted_at),B))),z=c.if.call(b,(z=b&&b.submission,null==z||!1===z?z:z.late),{hash:{},inverse:F.noop,fn:F.program(3,g,e),data:e}),(z||0===z)&&(C+=z),C+="</span>\n\t\t\t\t\t\t",z=c.if.call(b,b&&b.isPeerReview,{hash:{},inverse:F.noop,fn:F.program(5,h,e),data:e}),(z||0===z)&&(C+=z),C+=" ",z=c.if.call(b,b&&b.isTeacherViewingStudentsSubmission,{hash:{},inverse:F.noop,fn:F.program(5,h,e),data:e}),(z||0===z)&&(C+=z),C+="\n\t\t\t\t\t</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t\t",z=c.if.call(b,b&&b.isPeerReview,{hash:{},inverse:F.noop,fn:F.program(7,i,e),data:e}),(z||0===z)&&(C+=z),C+='\n\t</div>\n\t<div class="mmooc-assignment-submission-rightside">\n\t\t<div class="mmooc-assignment-submission-assessment">\n\t\t\t<div class="mmooc-assignment-submission-assessment-header">\n\t\t\t\t',z=c.if.call(b,b&&b.isPeerReview,{hash:{},inverse:F.program(14,m,e),fn:F.program(12,l,e),data:e}),(z||0===z)&&(C+=z),C+='\n\t\t\t</div>\n\t\t\t<div class="mmooc-assignment-submission-assessment-contents">\n\t\t\t\t',z=c.if.call(b,(z=b&&b.submission,null==z||!1===z?z:z.grade),{hash:{},inverse:F.noop,fn:F.program(19,p,e),data:e}),(z||0===z)&&(C+=z),C+=" ",z=c.if.call(b,b&&b.isPeerReview,{hash:{},inverse:F.program(24,s,e),fn:F.program(21,q,e),data:e}),(z||0===z)&&(C+=z),C+='\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<div class="mmooc-assignment-submission-answers',z=c.if.call(b,b&&b.isPeerReview,{hash:{},inverse:F.program(31,w,e),fn:F.program(29,v,e),data:e}),(z||0===z)&&(C+=z),z=c.if.call(b,(z=b&&b.submission,null==z||!1===z?z:z.grade),{hash:{},inverse:F.program(35,y,e),fn:F.program(33,x,e),data:e}),(z||0===z)&&(C+=z),C+='">\n\t<h3>Besvarelser</h3>\n</div>'}),this.mmooc.templates.backbutton=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div class="mmooc-back-button">\n    <a href="',(g=c.url)?f=g.call(b,{hash:{},data:e}):(g=b&&b.url,f=_typeof(g)===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'">',(g=c.title)?f=g.call(b,{hash:{},data:e}):(g=b&&b.title,f=_typeof(g)===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"</a>\n</div>"}),this.mmooc.templates.courselist=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f,k="";return k+='\n        <div id="course_',(e=c.id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.id,d=_typeof(e)===q?e.call(a,{hash:{},data:b}):e),k+=t(d)+'" class="mmooc-size-1of3">\n            <div class="mmooc-course-list-item">\n                <div class="mmooc-course-list-heading">\n                    <h2 ',e=c.ifHasRole||a&&a.ifHasRole,f={hash:{},inverse:r.noop,fn:r.program(2,g,b),data:b},d=e?e.call(a,a&&a.enrollments,"ObserverEnrollment",f):s.call(a,"ifHasRole",a&&a.enrollments,"ObserverEnrollment",f),(d||0===d)&&(k+=d),k+='>\n                        <a href="'+t((e=c.urlForCourseId||a&&a.urlForCourseId,f={hash:{},data:b},e?e.call(a,a&&a.id,f):s.call(a,"urlForCourseId",a&&a.id,f)))+'">\n                            ',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=_typeof(e)===q?e.call(a,{hash:{},data:b}):e),k+=t(d)+" ",e=c.ifHasRole||a&&a.ifHasRole,f={hash:{},inverse:r.noop,fn:r.program(4,h,b),data:b},d=e?e.call(a,a&&a.enrollments,"ObserverEnrollment",f):s.call(a,"ifHasRole",a&&a.enrollments,"ObserverEnrollment",f),(d||0===d)&&(k+=d),k+='\n                        </a>\n                    </h2>\n                </div>\n\n                <div class="mmooc-course-list-description">\n                    ',d=c.if.call(a,a&&a.syllabus_body,{hash:{},inverse:r.noop,fn:r.program(6,i,b),data:b}),(d||0===d)&&(k+=d),k+="\n                </div>\n                ",(e=c.debug)?d=e.call(a,{hash:{},data:b}):(e=a&&a.debug,d=_typeof(e)===q?e.call(a,{hash:{},data:b}):e),k+=t(d)+'\n\n                <div class="mmooc-course-list-progress">\n                    ',e=c.ifHasRole||a&&a.ifHasRole,f={hash:{},inverse:r.noop,fn:r.program(8,j,b),data:b},d=e?e.call(a,a&&a.enrollments,"StudentEnrollment",f):s.call(a,"ifHasRole",a&&a.enrollments,"StudentEnrollment",f),(d||0===d)&&(k+=d),k+="\n                </div>\n            </div>\n        </div>\n        "}function g(a,b){return' class="tooltip" '}function h(a,b){return' - Observatr\n                            <div class="tooltiptext">\n                                Som observatr kan du se innholdet i emner der du ikke er registrert som student.\n                            </div>\n                            '}function i(a,b){var d,e,f="";return f+=" ",(e=c.syllabus_body)?d=e.call(a,{hash:{},data:b}):(e=a&&a.syllabus_body,d=_typeof(e)===q?e.call(a,{hash:{},data:b}):e),(d||0===d)&&(f+=d),f+=" "}function j(a,b){var d,e="";return e+=" ",d=c.with.call(a,a&&a.course_progress,{hash:{},inverse:r.noop,fn:r.program(9,k,b),data:b}),(d||0===d)&&(e+=d),e+=" "}function k(a,b){var d,e="";return e+=" ",d=c.if.call(a,a&&a.requirement_count,{hash:{},inverse:r.noop,fn:r.program(10,l,b),data:b}),(d||0===d)&&(e+=d),e+=" "}function l(a,b){var d,e,f,g="";return g+='\n                    <div class="mmooc-progress-bar',e=c.ifEquals||a&&a.ifEquals,f={hash:{},inverse:r.noop,fn:r.program(11,m,b),data:b},d=e?e.call(a,a&&a.requirement_completed_count,a&&a.requirement_count,f):s.call(a,"ifEquals",a&&a.requirement_completed_count,a&&a.requirement_count,f),(d||0===d)&&(g+=d),g+='">\n                        <div class="mmooc-progress-bar-inner" style="width:'+t((e=c.percentage||a&&a.percentage,f={hash:{},data:b},e?e.call(a,a&&a.requirement_completed_count,a&&a.requirement_count,f):s.call(a,"percentage",a&&a.requirement_completed_count,a&&a.requirement_count,f)))+'%">\n                        </div>\n                    </div>\n                    '}function m(a,b){return" mmooc-progress-bar-done"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var n,o,p="",q="function",r=this,s=c.helperMissing,t=this.escapeExpression;return p+='<div class="mmooc-course-list">\n    <h2 class="mmooc-course-category-title">',(o=c.title)?n=o.call(b,{hash:{},data:e}):(o=b&&b.title,n=_typeof(o)===q?o.call(b,{hash:{},data:e}):o),p+=t(n)+'</h2>\n    \x3c!--If the amount of courses is large, the filter select box and corresponding javascript code in courselist.js should be enabled\n    <select id="filter"></select>\n--\x3e\n    <div class="mmooc-row">\n        ',n=c.each.call(b,b&&b.courses,{hash:{},inverse:r.noop,fn:r.program(1,f,e),data:e}),(n||0===n)&&(p+=n),p+="\n    </div>\n</div>"}),this.mmooc.templates.courselistcontainer=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div class="mmooc-course-list-container">\r\n  <h1>Mine ',(g=c.courseLabel)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseLabel,f=_typeof(g)===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"</h1>\r\n  <a class='btn btn-more-courses' href='/search/all_courses",(g=c.queryString)?f=g.call(b,{hash:{},data:e}):(g=b&&b.queryString,f=_typeof(g)===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"'>Se alle tilgjengelige ",(g=c.courseLabel)?f=g.call(b,{hash:{},data:e}):(g=b&&b.courseLabel,f=_typeof(g)===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"</a>\r\n</div>"}),this.mmooc.templates.coursemenu=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+=' class="no-tabs" ',(e=c.subtitle)?d=e.call(a,{hash:{},data:b}):(e=a&&a.subtitle,d=_typeof(e)===q?e.call(a,{hash:{},data:b}):e),f+=r(d)}function g(a,b){var d,e,f="";return f+='\n        <span class="h1-sub-heading">',(e=c.subtitle)?d=e.call(a,{hash:{},data:b}):(e=a&&a.subtitle,d=_typeof(e)===q?e.call(a,{hash:{},data:b}):e),f+=r(d)+"</span>"}function h(a,b){var d,e="";return e+='\n        <ul class="mmooc-course-tabs">\n            ',d=c.each.call(a,a&&a.menuItems,{hash:{},inverse:s.noop,fn:s.programWithDepth(6,i,b,a),data:b}),(d||0===d)&&(e+=d),e+="\n        </ul>\n        "}function i(a,b,d){var e,f="";return f+=" ",e=c.if.call(a,(e=a&&a.toolList,null==e||!1===e?e:e.length),{hash:{},inverse:s.programWithDepth(12,m,b,d),fn:s.programWithDepth(7,j,b,d),data:b}),(e||0===e)&&(f+=e),f+=" "}function j(a,b,d){var e,f,g,h="";return h+='\n            <li class="mmooc-course-tab ',f=c.ifEquals||a&&a.ifEquals,g={hash:{},inverse:s.noop,fn:s.program(8,k,b),data:b},e=f?f.call(a,a&&a.url,d&&d.selectedMenuItem,g):t.call(a,"ifEquals",a&&a.url,d&&d.selectedMenuItem,g),(e||0===e)&&(h+=e),h+='" id="mmooc-menu-item-verktoy">\n                <a href="#">',(f=c.title)?e=f.call(a,{hash:{},data:b}):(f=a&&a.title,e=_typeof(f)===q?f.call(a,{hash:{},data:b}):f),h+=r(e)+'\n                    <i class="icon-mini-arrow-down"></i>\n                </a>\n                <div class="mmooc-course-tab-menu-item-drop" id="mmooc-verktoy-list">\n                    <ul class="mmooc-course-tab-menu-item-list">\n                        ',e=c.each.call(a,a&&a.toolList,{hash:{},inverse:s.noop,fn:s.program(10,l,b),data:b}),(e||0===e)&&(h+=e),h+="\n                    </ul>\n                </div>\n            </li>\n            "}function k(a,b){return"selected"}function l(a,b){var d,e,f="";return f+='\n                        <li class="mmooc-course-tab-menu-item-list-item">\n                            <a href="',(e=c.href)?d=e.call(a,{hash:{},data:b}):(e=a&&a.href,d=_typeof(e)===q?e.call(a,{hash:{},data:b}):e),f+=r(d)+'">',(e=c.title)?d=e.call(a,{hash:{},data:b}):(e=a&&a.title,d=_typeof(e)===q?e.call(a,{hash:{},data:b}):e),f+=r(d)+"</a>\n                        </li>\n                        "}function m(a,b,d){var e,f,g,h="";return h+='\n            <li class="mmooc-course-tab ',f=c.ifEquals||a&&a.ifEquals,g={hash:{},inverse:s.noop,fn:s.program(8,k,b),data:b},e=f?f.call(a,a&&a.title,d&&d.selectedMenuItem,g):t.call(a,"ifEquals",a&&a.title,d&&d.selectedMenuItem,g),(e||0===e)&&(h+=e),h+='">\n                <a href="',(f=c.url)?e=f.call(a,{hash:{},data:b}):(f=a&&a.url,e=_typeof(f)===q?f.call(a,{hash:{},data:b}):f),h+=r(e)+'">',(f=c.title)?e=f.call(a,{hash:{},data:b}):(f=a&&a.title,e=_typeof(f)===q?f.call(a,{hash:{},data:b}):f),h+=r(e)+"</a>\n            </li>\n            "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var n,o,p="",q="function",r=this.escapeExpression,s=this,t=c.helperMissing;return p+='<div id="mmooc-course-tabs-container" ',n=c.unless.call(b,(n=b&&b.menuItems,null==n||!1===n?n:n.length),{hash:{},inverse:s.noop,fn:s.program(1,f,e),data:e}),(n||0===n)&&(p+=n),p+='>\n    <div id="mmooc-course-tabs-container-inner">\n\n        <h1>',(o=c.title)?n=o.call(b,{hash:{},data:e}):(o=b&&b.title,n=_typeof(o)===q?o.call(b,{hash:{},data:e}):o),p+=r(n)+"</h1>\n        ",n=c.if.call(b,b&&b.subtitle,{hash:{},inverse:s.noop,fn:s.program(3,g,e),data:e}),(n||0===n)&&(p+=n),p+=" ",n=c.if.call(b,(n=b&&b.menuItems,null==n||!1===n?n:n.length),{hash:{},inverse:s.noop,fn:s.program(5,h,e),data:e}),(n||0===n)&&(p+=n),p+="\n    </div>\n</div>"}),this.mmooc.templates.courseprogress=Handlebars.template(function(a,b,c,d,e){function f(a,b){return" mmooc-progress-bar-done"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i,j="",k=this.escapeExpression,l=this,m=c.helperMissing;return j+='<div class="mmooc-course-progress">\n    <div>\n        <div class="mmooc-course-progress-label">',(h=c.title)?g=h.call(b,{hash:{},data:e}):(h=b&&b.title,g="function"===_typeof(h)?h.call(b,{hash:{},data:e}):h),j+=k(g)+'</div>\n        <div class="mmooc-course-progress-bar">\n            <div class="mmooc-progress-bar',h=c.ifAllModulesCompleted||b&&b.ifAllModulesCompleted,i={hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e},g=h?h.call(b,b&&b.modules,i):m.call(b,"ifAllModulesCompleted",b&&b.modules,i),(g||0===g)&&(j+=g),j+='">\n                <div class="mmooc-progress-bar-inner" style="width:'+k((h=c.percentageForModules||b&&b.percentageForModules,i={hash:{},data:e},h?h.call(b,b&&b.modules,i):m.call(b,"percentageForModules",b&&b.modules,i)))+'%">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'}),this.mmooc.templates.courseprogressforstudent=Handlebars.template(function(a,b,c,d,e){function f(a,b){return" mmooc-progress-bar-done"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i,j="",k=this.escapeExpression,l=this,m=c.helperMissing;return j+='<div class="mmooc-course-progress">\n    <div>\n        <div class="mmooc-course-progress-label">',(h=c.title)?g=h.call(b,{hash:{},data:e}):(h=b&&b.title,g="function"===_typeof(h)?h.call(b,{hash:{},data:e}):h),j+=k(g)+'</div>\n        <div class="mmooc-course-progress-bar">\n            <div class="mmooc-progress-bar',h=c.ifAllStudentModulesCompleted||b&&b.ifAllStudentModulesCompleted,i={hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e},g=h?h.call(b,b&&b.modules,i):m.call(b,"ifAllStudentModulesCompleted",b&&b.modules,i),(g||0===g)&&(j+=g),j+='">\n                <div class="mmooc-progress-bar-inner" style="width:'+k((h=c.percentageForStudentModules||b&&b.percentageForStudentModules,i={hash:{},data:e},h?h.call(b,b&&b.modules,i):m.call(b,"percentageForStudentModules",b&&b.modules,i)))+'%">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'}),this.mmooc.templates.dataporten=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'I denne kompetansepakken benytter vi oss av grupper fra dataporten. For  se\n hvilke du kan melde deg inn i, m du logge deg p dataporten.<div>\n <button class="button" id="dataportenPopupLogin">Login dataporten</button>\n </div>\n'}),this.mmooc.templates.dataportenGroups=Handlebars.template(function(a,b,c,d,e){function f(a,b){return"\n    <b>medlem</b>\n"}function g(a,b){var d,e,f="";return f+='\n    <button id="',(e=c.id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.id,d=_typeof(e)===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+'">Meld deg inn</button>\n'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+="<div>"+k((h=b&&b.dataportenGroup,h=null==h||!1===h?h:h.displayName,_typeof(h)===j?h.apply(b):h))+"\n",h=c.if.call(b,b&&b.member,{hash:{},inverse:l.program(3,g,e),fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+="\n</div>\n"}),this.mmooc.templates.enrollprivacypolicy=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=this.escapeExpression;return h+='Jeg godtar\n<a target="_blank" href="',(g=c.privacypolicylink)?f=g.call(b,{hash:{},data:e}):(g=b&&b.privacypolicylink,f="function"===_typeof(g)?g.call(b,{hash:{},data:e}):g),h+=i(f)+'" class="external" rel="noreferrer">\n  <span>personvernvilkrene</span>\n  <span class="ui-icon ui-icon-extlink ui-icon-inline" title="Lenker til en ekstern side."></span>\n</a>'}),this.mmooc.templates["footer-license"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'Lisensniv: Illustrasjoner og filmer utviklet i regi av prosjektet:\n<a href="http://creativecommons.org/licenses/by-nc-nd/4.0/"\n    class="external_link" target="_blank" rel="license">\n    <span>CC BY-NC-ND 4.0</span>\n</a>\nAnnet innhold utviklet i regi av prosjektet:\n<a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="external_link"\n    target="_blank" rel="license">\n    <span>CC BY-NC-SA 4.0</span>\n</a>\n<br>\n'}),this.mmooc.templates.footer=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n             <a  target="_blank" class="external_link"  href="https://',(e=c.homeOrganization)?d=e.call(a,{hash:{},data:b}):(e=a&&a.homeOrganization,d=_typeof(e)===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+'">',(e=c.homeOrganization)?d=e.call(a,{hash:{},data:b}):(e=a&&a.homeOrganization,d=_typeof(e)===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+"</a>\n            "}function g(a,b){var d,e,f="";return f+='\n            | <a  target="_blank" class="external_link" href="',(e=c.privacyPolicyLink)?d=e.call(a,{hash:{},data:b}):(e=a&&a.privacyPolicyLink,d=_typeof(e)===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+'">Personvernvilkr</a>\n            '}function h(a,b){var d,e,f="";return f+='\n             | Kontakt oss: <a  target="_blank" class="external_link"  href="mailto:',(e=c.contactPoint)?d=e.call(a,{hash:{},data:b}):(e=a&&a.contactPoint,d=_typeof(e)===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+'">',(e=c.contactPoint)?d=e.call(a,{hash:{},data:b}):(e=a&&a.contactPoint,d=_typeof(e)===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+"</a>\n            "}function i(a,b){var d,e,f="";return f+='\n             | <a  target="_blank" class="external_link"  href="',(e=c.about)?d=e.call(a,{hash:{},data:b}):(e=a&&a.about,d=_typeof(e)===l?e.call(a,{hash:{},data:b}):e),f+=m(d)+'">Om denne plattformen</a>\n            '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k="",l="function",m=this.escapeExpression,n=this;return k+='<footer role="contentinfo" id="mmooc-footer" class="ic-app-footer">\n    <div class="mmooc-license">\n        <p id="mmoocLicense" class="public-license-text"></p>\n        <p class="public-license-text">\n            ',j=c.if.call(b,b&&b.homeOrganization,{hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e}),(j||0===j)&&(k+=j),k+=" \n            ",j=c.if.call(b,b&&b.privacyPolicyLink,{hash:{},inverse:n.noop,fn:n.program(3,g,e),data:e}),(j||0===j)&&(k+=j),k+=" \n            ",j=c.if.call(b,b&&b.contactPoint,{hash:{},inverse:n.noop,fn:n.program(5,h,e),data:e}),(j||0===j)&&(k+=j),k+=" \n            ",j=c.if.call(b,b&&b.about,{hash:{},inverse:n.noop,fn:n.program(7,i,e),data:e}),(j||0===j)&&(k+=j),k+=" \n            </div>\n        </p>\n    </div>\n</footer>"}),this.mmooc.templates.groupdiscussionGetHelpFromTeacher=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=this.escapeExpression;return h+='<div class="getTeachersHelpContainer">\n    <div class="tooltip_below">\n        <button type="button" id="mmooc-get-teachers-help" class="btn btn-primary getTeachersHelp">Tilkall veileder</button>\n        <div class="tooltiptext">\n            ',(g=c.hoverOverText)?f=g.call(b,{hash:{},data:e}):(g=b&&b.hoverOverText,f="function"===_typeof(g)?g.call(b,{hash:{},data:e}):g),h+=i(f)+"\n        </div>\n    </div>\n</div>"}),this.mmooc.templates.groupdiscussionheader=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div id="mmooc-group-header">\n    <div id="mmooc-group-members">\n        <div class="mmooc-back-button">\n            <a href="/groups/'+i((f=b&&b.group,f=null==f||!1===f?f:f.id,_typeof(f)===h?f.apply(b):f))+'/discussion_topics">'+i((f=b&&b.group,f=null==f||!1===f?f:f.name,_typeof(f)===h?f.apply(b):f))+'</a>\n        </div>\n    </div>\n    <div id="mmooc-group-links">\n    </div>\n</div>'}),this.mmooc.templates.groupheader=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n            <div class="mmooc-group-member">\n                <div class="mmooc-group-member-avatar" style="background-image: url(\'',(e=c.avatar_url)?d=e.call(a,{hash:{},data:b}):(e=a&&a.avatar_url,d=_typeof(e)===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'\')"></div>\n                <div class="mmooc-group-member-link">\n                    <a href="/about/',(e=c.id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.id,d=_typeof(e)===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=_typeof(e)===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</a>\n                </div>\n            </div>\n            "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i,j="",k="function",l=this.escapeExpression,m=c.helperMissing,n=this;return j+='<div class="mmooc-back-button">\n    <a href="'+l((h=c.urlForCourseId||b&&b.urlForCourseId,i={hash:{},data:e},h?h.call(b,b&&b.courseId,i):m.call(b,"urlForCourseId",b&&b.courseId,i)))+'/groups">Tilbake til gruppeliste</a>\n</div>\n<div id="mmooc-group-header">\n    <div id="mmooc-group-members">\n        <p>\n            <b>Gruppemedlemmer</b>\n        </p>\n        <div class="mmooc-group-members-list">\n            ',g=c.each.call(b,b&&b.members,{hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e}),(g||0===g)&&(j+=g),j+='\n        </div>\n    </div>\n    <div id="mmooc-group-links">\n        <p>\n            <a target="_new" href="https://connect.uninett.no/uit-videorom-matematikkmooc-',(h=c.groupId)?g=h.call(b,{hash:{},data:e}):(h=b&&b.groupId,g=_typeof(h)===k?h.call(b,{hash:{},data:e}):h),j+=l(g)+'" class="external">\n                <b>Videorom for gruppa</b>\n                <span class="ui-icon ui-icon-extlink ui-icon-inline" title="Lenker til en ekstern side."></span>\n            </a>\n        </p>\n    </div>\n</div>'}),this.mmooc.templates.informationpane=Handlebars.template(function(a,b,c,d,e){function f(a,b){return"\nDu er inne i dette emnet som observatr. Du vil ikke kunne levere inn oppgaver, bidra i diskusjoner eller se hva andre har bidratt med.\n           <br/>\n           "}function g(a,b){return'\nPfDK-MOOC er opprinnelig en lukket videreutdanning for lrere. Dette er den pne versjonen. Du ser alt det faglige innhold, men kan ikke levere oppgaver, diskutere i forum eller f veiledning.\nnsker du mer informasjon om videreutdanningen, se \n        <a class="icon-link" style="color:white" href="https://www.hvl.no/studier/studieprogram/pfdk/" target="_blank">hvl.no</a>\n        eller \n        <a class="icon-link" style="color:white" href="(https://www.usn.no/studier/finn-studier/larer-lektor-og-pedagogikk/videreutdanning-i-profesjonsfaglig-digital-kompetanse-for-larere/"\n        target="_blank">usn.no</a>\n           <br/>\n           '}function h(a,b){var d,e,f="";return f+="\nNB! Denne kompetansepakken ble sist vedlikeholdt ",(e=c.unmaintainedSince)?d=e.call(a,{hash:{},data:b}):(e=a&&a.unmaintainedSince,d=_typeof(e)===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"\n           "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k="function",l=this.escapeExpression,m=this;return j+='<div id="fixed_bottom">\n    <div id="masquerade_bar" class="ic-alert-masquerade-student-view">\n      <div class="ic-alert-masquerade-student-view-module ic-alert-masquerade-student-view-module--header">\n        <div class="ic-image-text-combo">\n          <i class="icon-student-view"></i>\n           <div class="ic-image-text-combo__text">\n           ',i=c.if.call(b,b&&b.observer,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(i||0===i)&&(j+=i),j+=" \n           ",i=c.if.call(b,b&&b.pfdk,{hash:{},inverse:m.noop,fn:m.program(3,g,e),data:e}),(i||0===i)&&(j+=i),j+=" \n           ",i=c.if.call(b,b&&b.unmaintainedSince,{hash:{},inverse:m.noop,fn:m.program(5,h,e),data:e}),(i||0===i)&&(j+=i),j+=" \n           </div>\n          </div>\n      </div>\n    </div>\n</div>"}),this.mmooc.templates.loginPopup=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<div class="login-box">\n  <div class="login-box__upper">\n    <p class="login-box__text">',(g=c.logInText)?f=g.call(b,{hash:{},data:e}):(g=b&&b.logInText,f=_typeof(g)===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'</p>\n    <div class="login-box__close"></div>\n  </div>\n  <div class="login-box__lower">\n    <a class="mmooc-button mmooc-button-primary" href="/courses?login=1&design=udir">\n    </a>\n    <a class="mmooc-button mmooc-button-secondary" href="/login/canvas?normalLogin=1&design=udir">\n      ',(g=c.logInCanvasText)?f=g.call(b,{hash:{},data:e}):(g=b&&b.logInCanvasText,f=_typeof(g)===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+"\n    </a>\n  </div>\n</div>\n"}),this.mmooc.templates.moduleitems=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n<div class="header">\n    ',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=_typeof(e)===B?e.call(a,{hash:{},data:b}):e),f+=C(d)+"\n</div>\n",d=c.if.call(a,a&&a.items,{hash:{},inverse:A.noop,fn:A.program(2,g,b),data:b}),(d||0===d)&&(f+=d),f+=" "}function g(a,b){var d,e="";return e+='\n    <nav aria-label="content" role="navigation">\n        <ul class="mmooc-module-items">\n            ',d=c.each.call(a,a&&a.items,{hash:{},inverse:A.noop,fn:A.program(3,h,b),data:b}),(d||0===d)&&(e+=d),e+="\n        </ul>\n    </nav>\n"}function h(a,b){var d,e="";return e+=" \n                ",d=c.unless.call(a,a&&a.indent,{hash:{},inverse:A.noop,fn:A.program(4,i,b),data:b}),(d||0===d)&&(e+=d),e+="\n            "}function i(a,b){var d,e,f,g="";return g+="\n                    ",e=c.ifEquals||a&&a.ifEquals,f={hash:{},inverse:A.program(23,t,b),fn:A.program(5,j,b),data:b},d=e?e.call(a,a&&a.type,"SubHeader",f):D.call(a,"ifEquals",a&&a.type,"SubHeader",f),(d||0===d)&&(g+=d),g+=" \n                "}function j(a,b){var d,e,f="";return f+='\n                        </ul>\n                        <ul class="mmooc-module-items \n                                            ',d=c.if.call(a,null==b||!1===b?b:b.first,{hash:{},inverse:A.program(8,l,b),fn:A.program(6,k,b),data:b}),(d||0===d)&&(f+=d),f+='\n                                            " />\n                            <li class="mmooc-module-item-reveal">\n                                <a class="mmooc-reveal-trigger" ',d=c.if.call(a,a&&a.isCurrentHeader,{hash:{},inverse:A.noop,fn:A.program(13,o,b),data:b}),(d||0===d)&&(f+=d),f+=' href="#mmooc-reveal-',(e=c.id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.id,d=_typeof(e)===B?e.call(a,{hash:{},data:b}):e),f+=C(d)+'">\n                                    <span class="mmooc-module-items-icons-page ',d=c.if.call(a,a&&a.done,{hash:{},inverse:A.noop,fn:A.program(15,p,b),data:b}),(d||0===d)&&(f+=d),f+='">\n                                        ',d=c.if.call(a,a&&a.isCurrentHeader,{hash:{},inverse:A.program(19,r,b),fn:A.program(17,q,b),data:b}),(d||0===d)&&(f+=d),f+='\n                                            </i>\n                                    </span>\n                                    <span class="mmooc-module-item-title mmooc-module-item-header-title">',(e=c.title)?d=e.call(a,{hash:{},data:b}):(e=a&&a.title,d=_typeof(e)===B?e.call(a,{hash:{},data:b}):e),f+=C(d)+"</span>\n                                </a>\n                            </li>\n                        </ul>\n                        <ul ",d=c.unless.call(a,a&&a.isCurrentHeader,{hash:{},inverse:A.noop,fn:A.program(21,s,b),data:b}),(d||0===d)&&(f+=d),f+=' id="mmooc-reveal-',(e=c.id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.id,d=_typeof(e)===B?e.call(a,{hash:{},data:b}):e),f+=C(d)+'" class="mmooc-module-items">\n                    '}function k(a,b){return" mmooc-module-items-header-first\n                                            "}function l(a,b){var d,e="";return d=c.if.call(a,null==b||!1===b?b:b.last,{hash:{},inverse:A.program(11,n,b),fn:A.program(9,m,b),data:b}),(d||0===d)&&(e+=d),e+="\n                                            "}
function m(a,b){return" mmooc-module-items-header-last\n                                            "}function n(a,b){return" mmooc-module-items-header\n                                                "}function o(a,b){return' id="mmooc-module-item-active-header" '}function p(a,b){return"done"}function q(a,b){return'\n                                        <i class="icon-mini-arrow-down">\n                                            '}function r(a,b){return'\n                                            <i class="icon-mini-arrow-right">\n                                                '}function s(a,b){return'style="display:none" '}function t(a,b){var d,e,f,g="";return g+='\n                        <li class="mmooc-module-item mmooc-module-item-icon">\n                            <a class="',d=c.if.call(a,a&&a.isCurrent,{hash:{},inverse:A.noop,fn:A.program(24,u,b),data:b}),(d||0===d)&&(g+=d),g+='" href="',(e=c.html_url)?d=e.call(a,{hash:{},data:b}):(e=a&&a.html_url,d=_typeof(e)===B?e.call(a,{hash:{},data:b}):e),g+=C(d)+'">\n                                <span class="mmooc-module-item-title">',(e=c.title)?d=e.call(a,{hash:{},data:b}):(e=a&&a.title,d=_typeof(e)===B?e.call(a,{hash:{},data:b}):e),g+=C(d)+'</span>\n                                <span class="mmooc-module-items-icons-',(e=c.type)?d=e.call(a,{hash:{},data:b}):(e=a&&a.type,d=_typeof(e)===B?e.call(a,{hash:{},data:b}):e),g+=C(d),e=c.ifItemIsCompleted||a&&a.ifItemIsCompleted,f={hash:{},inverse:A.noop,fn:A.program(26,v,b),data:b},d=e?e.call(a,a&&a.completion_requirement,f):D.call(a,"ifItemIsCompleted",a&&a.completion_requirement,f),(d||0===d)&&(g+=d),g+='" href="',(e=c.html_url)?d=e.call(a,{hash:{},data:b}):(e=a&&a.html_url,d=_typeof(e)===B?e.call(a,{hash:{},data:b}):e),g+=C(d)+'">\n                                    <i class="icon-'+C((e=c.lowercase||a&&a.lowercase,f={hash:{},data:b},e?e.call(a,a&&a.type,f):D.call(a,"lowercase",a&&a.type,f)))+C((e=c.overrideIconClassByTitle||a&&a.overrideIconClassByTitle,f={hash:{},data:b},e?e.call(a,a&&a.title,f):D.call(a,"overrideIconClassByTitle",a&&a.title,f)))+'">\n                                    </i>\n                                </span>\n                            </a>\n                        </li>\n                    '}function u(a,b){return"active"}function v(a,b){return" done"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var w,x,y,z="",A=this,B="function",C=this.escapeExpression,D=c.helperMissing;return z+='<div class="mmooc-module-items-back-to-course-button mmooc-back-button">\n    <a href="'+C((x=c.urlForCourseId||b&&b.urlForCourseId,y={hash:{},data:e},x?x.call(b,b&&b.courseId,y):D.call(b,"urlForCourseId",b&&b.courseId,y)))+'">',(x=c.backToCoursePage)?w=x.call(b,{hash:{},data:e}):(x=b&&b.backToCoursePage,w=_typeof(x)===B?x.call(b,{hash:{},data:e}):x),z+=C(w)+"</a>\n</div>\n\n",w=c.with.call(b,b&&b.module,{hash:{},inverse:A.noop,fn:A.program(1,f,e),data:e}),(w||0===w)&&(z+=w),z}),this.mmooc.templates.moduleitemsprincipal=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n<div class="header">\n    ',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=_typeof(e)===D?e.call(a,{hash:{},data:b}):e),f+=E(d)+"\n</div>\n",d=c.if.call(a,a&&a.items,{hash:{},inverse:C.noop,fn:C.program(2,g,b),data:b}),(d||0===d)&&(f+=d),f+=" "}function g(a,b){var d,e="";return e+='\n    <nav aria-label="content" role="navigation">\n        <ul class="mmooc-module-items">\n            ',d=c.each.call(a,a&&a.items,{hash:{},inverse:C.noop,fn:C.program(3,h,b),data:b}),(d||0===d)&&(e+=d),e+="\n        </ul>\n    </nav>\n"}function h(a,b){var d,e,f,g="";return g+=" \n                ",e=c.ifEquals||a&&a.ifEquals,f={hash:{},inverse:C.program(22,s,b),fn:C.program(4,i,b),data:b},d=e?e.call(a,a&&a.type,"SubHeader",f):F.call(a,"ifEquals",a&&a.type,"SubHeader",f),(d||0===d)&&(g+=d),g+=" \n            "}function i(a,b){var d,e,f="";return f+='\n                    </ul>\n                    <ul class="mmooc-module-items \n                                        ',d=c.if.call(a,null==b||!1===b?b:b.first,{hash:{},inverse:C.program(7,k,b),fn:C.program(5,j,b),data:b}),(d||0===d)&&(f+=d),f+='\n                                        " />\n                        <li class="mmooc-module-item-reveal">\n                            <a class="mmooc-reveal-trigger" ',d=c.if.call(a,a&&a.isCurrentHeader,{hash:{},inverse:C.noop,fn:C.program(12,n,b),data:b}),(d||0===d)&&(f+=d),f+=' href="#mmooc-reveal-',(e=c.id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.id,d=_typeof(e)===D?e.call(a,{hash:{},data:b}):e),f+=E(d)+'">\n                                <span class="mmooc-module-items-icons-page ',d=c.if.call(a,a&&a.done,{hash:{},inverse:C.noop,fn:C.program(14,o,b),data:b}),(d||0===d)&&(f+=d),f+='">\n                                    ',d=c.if.call(a,a&&a.isCurrentHeader,{hash:{},inverse:C.program(18,q,b),fn:C.program(16,p,b),data:b}),(d||0===d)&&(f+=d),f+='\n                                        </i>\n                                </span>\n                                <span class="mmooc-module-item-title mmooc-module-item-header-title">',(e=c.title)?d=e.call(a,{hash:{},data:b}):(e=a&&a.title,d=_typeof(e)===D?e.call(a,{hash:{},data:b}):e),f+=E(d)+"</span>\n                            </a>\n                        </li>\n                    </ul>\n                    <ul ",d=c.unless.call(a,a&&a.isCurrentHeader,{hash:{},inverse:C.noop,fn:C.program(20,r,b),data:b}),(d||0===d)&&(f+=d),f+=' id="mmooc-reveal-',(e=c.id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.id,d=_typeof(e)===D?e.call(a,{hash:{},data:b}):e),f+=E(d)+'" class="mmooc-module-items">\n                '}function j(a,b){return" mmooc-module-items-header-first\n                                        "}function k(a,b){var d,e="";return d=c.if.call(a,null==b||!1===b?b:b.last,{hash:{},inverse:C.program(10,m,b),fn:C.program(8,l,b),data:b}),(d||0===d)&&(e+=d),e+="\n                                        "}function l(a,b){return" mmooc-module-items-header-last\n                                        "}function m(a,b){return" mmooc-module-items-header\n                                            "}function n(a,b){return' id="mmooc-module-item-active-header" '}function o(a,b){return"done"}function p(a,b){return'\n                                    <i class="icon-mini-arrow-down">\n                                        '}function q(a,b){return'\n                                        <i class="icon-mini-arrow-right">\n                                            '}function r(a,b){return'style="display:none" '}function s(a,b){var d,e,f,g="";return g+='\n                    <li class="mmooc-module-item mmooc-module-item-icon">\n                        <a class="',d=c.if.call(a,a&&a.isCurrent,{hash:{},inverse:C.noop,fn:C.program(23,t,b),data:b}),(d||0===d)&&(g+=d),g+='" href="',(e=c.html_url)?d=e.call(a,{hash:{},data:b}):(e=a&&a.html_url,d=_typeof(e)===D?e.call(a,{hash:{},data:b}):e),g+=E(d)+'">\n                            <span class="mmooc-module-item-title">',(e=c.title)?d=e.call(a,{hash:{},data:b}):(e=a&&a.title,d=_typeof(e)===D?e.call(a,{hash:{},data:b}):e),g+=E(d)+'</span>\n                            <span class="mmooc-module-items-icons-',(e=c.type)?d=e.call(a,{hash:{},data:b}):(e=a&&a.type,d=_typeof(e)===D?e.call(a,{hash:{},data:b}):e),g+=E(d),e=c.ifItemIsCompleted||a&&a.ifItemIsCompleted,f={hash:{},inverse:C.noop,fn:C.program(25,u,b),data:b},d=e?e.call(a,a&&a.completion_requirement,f):F.call(a,"ifItemIsCompleted",a&&a.completion_requirement,f),(d||0===d)&&(g+=d),g+='" href="',(e=c.html_url)?d=e.call(a,{hash:{},data:b}):(e=a&&a.html_url,d=_typeof(e)===D?e.call(a,{hash:{},data:b}):e),g+=E(d)+'">\n                                <i class="icon-'+E((e=c.lowercase||a&&a.lowercase,f={hash:{},data:b},e?e.call(a,a&&a.type,f):F.call(a,"lowercase",a&&a.type,f)))+E((e=c.overrideIconClassByTitle||a&&a.overrideIconClassByTitle,f={hash:{},data:b},e?e.call(a,a&&a.title,f):F.call(a,"overrideIconClassByTitle",a&&a.title,f)))+'">\n                                    ',f={hash:{},inverse:C.noop,fn:C.program(27,v,b),data:b},(e=c.ifIsIndented)?d=e.call(a,f):(e=a&&a.ifIsIndented,d=_typeof(e)===D?e.call(a,f):e),c.ifIsIndented||(d=G.call(a,d,{hash:{},inverse:C.noop,fn:C.program(27,v,b),data:b})),(d||0===d)&&(g+=d),g+="\n                                </i>\n                            </span>\n                        </a>\n                    </li>\n                "}function t(a,b){return"active"}function u(a,b){return" done"}function v(a,b){var d,e,f,g="";return g+='\n                                        <div class="mmooc-icon-principal-tag\n                                            ',e=c.ifItemIsCompleted||a&&a.ifItemIsCompleted,f={hash:{},inverse:C.program(30,x,b),fn:C.program(28,w,b),data:b},d=e?e.call(a,a&&a.completion_requirement,f):F.call(a,"ifItemIsCompleted",a&&a.completion_requirement,f),(d||0===d)&&(g+=d),g+='\n                                        ">\n                                            <div class="mmooc-icon-principal-symbol"></div>\n                                        </div> \n                                    '}function w(a,b){return" \n                                                done\n                                            "}function x(a,b){return"\n                                                not_done\n                                            "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var y,z,A,B="",C=this,D="function",E=this.escapeExpression,F=c.helperMissing,G=c.blockHelperMissing;return B+='<div class="mmooc-module-items-back-to-course-button mmooc-back-button">\n    <a href="'+E((z=c.urlForCourseId||b&&b.urlForCourseId,A={hash:{},data:e},z?z.call(b,b&&b.courseId,A):F.call(b,"urlForCourseId",b&&b.courseId,A)))+'">',(z=c.backToCoursePage)?y=z.call(b,{hash:{},data:e}):(z=b&&b.backToCoursePage,y=_typeof(z)===D?z.call(b,{hash:{},data:e}):z),B+=E(y)+"</a>\n</div>\n\n",y=c.with.call(b,b&&b.module,{hash:{},inverse:C.noop,fn:C.program(1,f,e),data:e}),(y||0===y)&&(B+=y),B}),this.mmooc.templates.modules=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f,h="";return h+='\n    <div class="mmooc-module">\n        <h2 class="light">\n            <a href="'+t((e=c.urlForFirstNoneCompleteItem||a&&a.urlForFirstNoneCompleteItem,f={hash:{},data:b},e?e.call(a,a&&a.items,f):u.call(a,"urlForFirstNoneCompleteItem",a&&a.items,f)))+'">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=_typeof(e)===s?e.call(a,{hash:{},data:b}):e),h+=t(d)+"</a>\n        </h2>\n        ",d=c.if.call(a,a&&a.items,{hash:{},inverse:r.noop,fn:r.program(2,g,b),data:b}),(d||0===d)&&(h+=d),h+="\n    </div>\n    "}function g(a,b){var d,e="";return e+='\n            <ul class="mmooc-module-items-icons">\n                ',d=c.each.call(a,a&&a.items,{hash:{},inverse:r.noop,fn:r.program(3,h,b),data:b}),(d||0===d)&&(e+=d),e+="\n            </ul>\n        "}function h(a,b){var d,e="";return e+=" \n                    ",d=c.unless.call(a,a&&a.indent,{hash:{},inverse:r.noop,fn:r.program(4,i,b),data:b}),(d||0===d)&&(e+=d),e+="\n                "}function i(a,b){var d,e,f,g="";return g+="\n                        ",e=c.ifEquals||a&&a.ifEquals,f={hash:{},inverse:r.program(8,l,b),fn:r.program(5,j,b),data:b},d=e?e.call(a,a&&a.type,"SubHeader",f):u.call(a,"ifEquals",a&&a.type,"SubHeader",f),(d||0===d)&&(g+=d),g+=" \n                    "}function j(a,b){var d,e="";return e+=" \n                            ",d=c.unless.call(a,null==b||!1===b?b:b.first,{hash:{},inverse:r.noop,fn:r.program(6,k,b),data:b}),(d||0===d)&&(e+=d),e+=" \n                        "}function k(a,b){return" \n                            "}function l(a,b){var d,e,f,g="";return g+='\n                            <li class="mmooc-module-item-icon">\n                                <div class="tooltip">\n                                    <a class="mmooc-module-items-icons-',(e=c.type)?d=e.call(a,{hash:{},data:b}):(e=a&&a.type,d=_typeof(e)===s?e.call(a,{hash:{},data:b}):e),g+=t(d)+" \n                                                ",e=c.ifItemIsCompleted||a&&a.ifItemIsCompleted,f={hash:{},inverse:r.noop,fn:r.program(9,m,b),data:b},d=e?e.call(a,a&&a.completion_requirement,f):u.call(a,"ifItemIsCompleted",a&&a.completion_requirement,f),(d||0===d)&&(g+=d),g+='" href="',(e=c.html_url)?d=e.call(a,{hash:{},data:b}):(e=a&&a.html_url,d=_typeof(e)===s?e.call(a,{hash:{},data:b}):e),g+=t(d)+'">\n                                        <i class="icon-'+t((e=c.lowercase||a&&a.lowercase,f={hash:{},data:b},e?e.call(a,a&&a.type,f):u.call(a,"lowercase",a&&a.type,f)))+t((e=c.overrideIconClassByTitle||a&&a.overrideIconClassByTitle,f={hash:{},data:b},e?e.call(a,a&&a.title,f):u.call(a,"overrideIconClassByTitle",a&&a.title,f)))+'"></i>\n                                        ',e=c.ifItemTypeDiscussion||a&&a.ifItemTypeDiscussion,f={hash:{},inverse:r.noop,fn:r.program(11,n,b),data:b},d=e?e.call(a,a&&a.type,f):u.call(a,"ifItemTypeDiscussion",a&&a.type,f),(d||0===d)&&(g+=d),g+='\n                                    </a>\n                                    <div class="tooltiptext">',(e=c.title)?d=e.call(a,{hash:{},data:b}):(e=a&&a.title,d=_typeof(e)===s?e.call(a,{hash:{},data:b}):e),g+=t(d)+"</div>\n                                </div>\n                            </li>\n                        "}function m(a,b){return"done"}function n(a,b){var c,d="";return d+='\n                                        <div class="discussion-unread-tag discussion-id-'+t((c=a&&a.content_id,_typeof(c)===s?c.apply(a):c))+'"></div>\n                                        '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var o,p,q="",r=this,s="function",t=this.escapeExpression,u=c.helperMissing;return q+='<div class="mmooc-modules">\n    <h2 class="h3">',(p=c.coursemodules)?o=p.call(b,{hash:{},data:e}):(p=b&&b.coursemodules,o=_typeof(p)===s?p.call(b,{hash:{},data:e}):p),q+=t(o)+"</h2>\n    ",o=c.each.call(b,b&&b.modules,{hash:{},inverse:r.noop,fn:r.program(1,f,e),data:e}),(o||0===o)&&(q+=o),q+="\n</div>"}),this.mmooc.templates.modulesprincipal=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f,h="";return h+='\n    <div class="mmooc-module">\n        <h2 class="light">\n            <a href="'+v((e=c.urlForFirstNoneCompletePrincipalItem||a&&a.urlForFirstNoneCompletePrincipalItem,f={hash:{},data:b},e?e.call(a,a&&a.items,f):w.call(a,"urlForFirstNoneCompletePrincipalItem",a&&a.items,f)))+'">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=_typeof(e)===u?e.call(a,{hash:{},data:b}):e),h+=v(d)+"</a>\n        </h2>\n        ",d=c.if.call(a,a&&a.items,{hash:{},inverse:t.noop,fn:t.program(2,g,b),data:b}),(d||0===d)&&(h+=d),h+="\n    </div>\n    "}function g(a,b){var d,e="";return e+='\n        <ul class="mmooc-module-items-icons">\n            ',d=c.each.call(a,a&&a.items,{hash:{},inverse:t.noop,fn:t.program(3,h,b),data:b}),(d||0===d)&&(e+=d),e+="\n        </ul>\n        "}function h(a,b){var d,e,f,g="";return g+=" ",e=c.ifEquals||a&&a.ifEquals,f={hash:{},inverse:t.program(7,k,b),fn:t.program(4,i,b),data:b},d=e?e.call(a,a&&a.type,"SubHeader",f):w.call(a,"ifEquals",a&&a.type,"SubHeader",f),(d||0===d)&&(g+=d),g+=" "}function i(a,b){var d,e="";return e+=" ",d=c.unless.call(a,null==b||!1===b?b:b.first,{hash:{},inverse:t.noop,fn:t.program(5,j,b),data:b}),(d||0===d)&&(e+=d),e+=" "}function j(a,b){return" "}function k(a,b){var d,e,f,g="";return g+='\n            <li class="mmooc-module-item-icon">\n                <div class="tooltip">\n                    <a class="mmooc-module-items-icons-',(e=c.type)?d=e.call(a,{hash:{},data:b}):(e=a&&a.type,d=_typeof(e)===u?e.call(a,{hash:{},data:b}):e),g+=v(d)+" \n                                 ",e=c.ifItemIsCompleted||a&&a.ifItemIsCompleted,f={hash:{},inverse:t.noop,fn:t.program(8,l,b),data:b},d=e?e.call(a,a&&a.completion_requirement,f):w.call(a,"ifItemIsCompleted",a&&a.completion_requirement,f),(d||0===d)&&(g+=d),g+='" href="',(e=c.html_url)?d=e.call(a,{hash:{},data:b}):(e=a&&a.html_url,d=_typeof(e)===u?e.call(a,{hash:{},data:b}):e),g+=v(d)+'">\n                        <i class="icon-'+v((e=c.lowercase||a&&a.lowercase,f={hash:{},data:b},e?e.call(a,a&&a.type,f):w.call(a,"lowercase",a&&a.type,f)))+v((e=c.overrideIconClassByTitle||a&&a.overrideIconClassByTitle,f={hash:{},data:b},e?e.call(a,a&&a.title,f):w.call(a,"overrideIconClassByTitle",a&&a.title,f)))+'"></i>\n                        ',e=c.ifItemTypeDiscussion||a&&a.ifItemTypeDiscussion,f={hash:{},inverse:t.noop,fn:t.program(10,m,b),data:b},d=e?e.call(a,a&&a.type,f):w.call(a,"ifItemTypeDiscussion",a&&a.type,f),(d||0===d)&&(g+=d),g+="\n                        ",f={hash:{},inverse:t.noop,fn:t.program(12,n,b),data:b},(e=c.ifIsIndented)?d=e.call(a,f):(e=a&&a.ifIsIndented,d=_typeof(e)===u?e.call(a,f):e),c.ifIsIndented||(d=x.call(a,d,{hash:{},inverse:t.noop,fn:t.program(12,n,b),data:b})),(d||0===d)&&(g+=d),g+='                    \n                    </a>\n                    <div class="tooltiptext">',(e=c.title)?d=e.call(a,{hash:{},data:b}):(e=a&&a.title,d=_typeof(e)===u?e.call(a,{hash:{},data:b}):e),g+=v(d)+"</div>\n                </div>\n            </li>\n            "}function l(a,b){return"done"}function m(a,b){var c,d="";return d+='\n                        <div class="discussion-unread-tag discussion-id-'+v((c=a&&a.content_id,_typeof(c)===u?c.apply(a):c))+'"></div>\n                        '}function n(a,b){var d,e,f,g="";return g+='\n                            <div class="mmooc-icon-principal-tag\n                                ',e=c.ifItemIsCompleted||a&&a.ifItemIsCompleted,f={hash:{},inverse:t.program(15,p,b),fn:t.program(13,o,b),data:b},d=e?e.call(a,a&&a.completion_requirement,f):w.call(a,"ifItemIsCompleted",a&&a.completion_requirement,f),(d||0===d)&&(g+=d),g+='\n                            ">\n                                <div class="mmooc-icon-principal-symbol"></div>\n                            </div> \n                        '}function o(a,b){return"\n                                    done\n                                "}function p(a,b){return"\n                                    not_done\n                                "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var q,r,s="",t=this,u="function",v=this.escapeExpression,w=c.helperMissing,x=c.blockHelperMissing;return s+='<div class="mmooc-modules">\n    <h2 class="h3">',(r=c.coursemodules)?q=r.call(b,{hash:{},data:e}):(r=b&&b.coursemodules,q=_typeof(r)===u?r.call(b,{hash:{},data:e}):r),s+=v(q)+"</h2>\n    ",q=c.each.call(b,b&&b.modules,{hash:{},inverse:t.noop,fn:t.program(1,f,e),data:e}),(q||0===q)&&(s+=q),s+="\n</div>"}),this.mmooc.templates.navigateToPreviousPage=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=this.escapeExpression;return h+='<nav class="mmooc-module-items-back-to-course-button mmooc-back-button">\n    <span href="#" onclick="mmooc.util.goBack()">\n        ',(g=c.linkText)?f=g.call(b,{hash:{},data:e}):(g=b&&b.linkText,f="function"===_typeof(g)?g.call(b,{hash:{},data:e}):g),h+=i(f)+"\n    </span>\n</nav>"}),this.mmooc.templates.noLoggedInHeader=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=this.escapeExpression;return h+='<div class="mmooc-header">\n  <button class="mmooc-header__login-button">',(g=c.logInText)?f=g.call(b,{hash:{},data:e}):(g=b&&b.logInText,f="function"===_typeof(g)?g.call(b,{hash:{},data:e}):g),h+=i(f)+"</button>\n</div>\n"}),this.mmooc.templates.notifications=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<a href="/profile/communication" class="edit_settings_link btn button-sidebar-wide">\n  <i class="icon-edit"></i> Rediger varslingsinnstillinger</a>'}),this.mmooc.templates["powerfunctions/account-picker"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n      <option value="',(e=c.id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.id,d=_typeof(e)===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=_typeof(e)===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</option>\n      "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i,j="",k="function",l=this.escapeExpression,m=this,n=c.blockHelperMissing;return j+='<div>\n  <form>\n    <select name="account">\n      <option value="">Choose the account...</option>\n      ',i={hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e},(h=c.accounts)?g=h.call(b,i):(h=b&&b.accounts,g=_typeof(h)===k?h.call(b,i):h),c.accounts||(g=n.call(b,g,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e})),(g||0===g)&&(j+=g),j+="\n    </select>\n  </form>\n</div>"}),this.mmooc.templates["powerfunctions/assign-process"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n    <tr id="mmpf-assign-'+j((d=null==b||!1===b?b:b.index,_typeof(d)===i?d.apply(a):d))+'">\n      <td>',(e=c.group_id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.group_id,d=_typeof(e)===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+"</td>\n      <td>",(e=c.user_id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.user_id,d=_typeof(e)===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+'</td>\n      <td class="status waiting">Waiting</td>\n      '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return h+="<table>\n  <thead>\n    <tr>\n      <th>Group ID</th>\n      <th>Student ID</th>\n      <th>Status</th>\n    </tr>\n  </thead>\n  <tbody>\n    ",g=c.each.call(b,b&&b.assigns,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="\n  </tbody>\n  <table>"}),this.mmooc.templates["powerfunctions/assign"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<form>\n  <dl>\n    <dt>\n      <label for="csv">Upload CSV file</label>\n    </dt>\n    <dd>\n      <input type="file" name="csv">\n    </dd>\n  </dl>\n  <input type="submit" />\n</form>\n\n<div class="side-information">\n  <h3>Decription of CSV format</h3>\n  <p>First line of the file must be the name of the columns. Column separators are commas. Fields optionally encloused by double\n    quotes (").\n    <dl>\n      <dt>group_id [Integer]\n        <dd>The group ID\n          <dt>user_id [String]\n            <dd>The FEIDE user ID\n    </dl>\n</div>'}),this.mmooc.templates["powerfunctions/course-groups"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){return'\n        <option value="">No courses defined for account</option>\n        '}function g(a,b){var d,e="";return e+='\n        <option value="">Choose a course</option>\n        ',d=c.each.call(a,a&&a.courses,{hash:{},inverse:m.noop,fn:m.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+=" "}function h(a,b){var d,e,f="";return f+='\n        <option value="',(e=c.id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.id,d=_typeof(e)===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=_typeof(e)===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</option>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k="function",l=this.escapeExpression,m=this;return j+='<form>\n  <ol>\n    <li class="step-1">\n      <select id="mmpf-course-select">\n        ',i=c.unless.call(b,b&&b.courses,{hash:{},inverse:m.program(3,g,e),fn:m.program(1,f,e),data:e}),(i||0===i)&&(j+=i),j+='\n      </select>\n      <li class="step-2">\n        <select name="category" onchange="$(\'.step-3\').css(\'display\', \'list-item\')">\n          <option value="">No group sets defined for course</option>\n        </select>\n        <li class="step-3">\n          <input type="file" name="csv" onchange="$(\'.step-4\').css(\'display\', \'list-item\')">\n          <li class="step-4">\n            <input type="submit" />\n  </ol>\n</form>\n\n<div class="side-information">\n  <h3>Decription of CSV format</h3>\n  <p>First line of the file must be the name of the columns. Column separators are commas. Fields optionally encloused by double\n    quotes (").\n    <dl>\n      <dt>name [String]\n        <dd>The name of the group\n          <dt>description [String]\n            <dd>A description of the group\n    </dl>\n</div>'}),this.mmooc.templates["powerfunctions/group-category"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){return'\n        <option value="">No group sets defined for account</option>\n        '}function g(a,b){var d,e="";return e+='\n        <option value="">Choose a group set</option>\n        ',d=c.each.call(a,a&&a.categories,{hash:{},inverse:m.noop,fn:m.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+=" "}function h(a,b){var d,e,f="";return f+='\n        <option value="',(e=c.id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.id,d=_typeof(e)===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=_typeof(e)===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</option>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k="function",l=this.escapeExpression,m=this;return j+="<form>\n  <ol>\n    <li class=\"step-1\">\n      <select name=\"category\" onchange=\"$('.step-2').css('display', 'list-item')\">\n        ",i=c.unless.call(b,b&&b.categories,{hash:{},inverse:m.program(3,g,e),fn:m.program(1,f,e),data:e}),(i||0===i)&&(j+=i),j+='\n      </select>\n      <li class="step-2">\n        <input type="file" name="csv" onchange="$(\'.step-3\').css(\'display\', \'list-item\')">\n        <li class="step-3">\n          <input type="submit" />\n  </ol>\n</form>\n\n<div class="side-information">\n  <h3>Decription of CSV format</h3>\n  <p>First line of the file must be the name of the columns. Column separators are commas. Fields optionally encloused by double\n    quotes (").\n    <dl>\n      <dt>name [String]\n        <dd>The name of the group\n          <dt>description [String]\n            <dd>A description of the group\n    </dl>\n</div>'}),this.mmooc.templates["powerfunctions/groups-process"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n    <tr id="mmpf-group-'+l((d=null==b||!1===b?b:b.index,_typeof(d)===k?d.apply(a):d))+'">\n      <td>',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=_typeof(e)===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</td>\n      <td>",(e=c.description)?d=e.call(a,{hash:{},data:b}):(e=a&&a.description,d=_typeof(e)===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'</td>\n      <td class="status waiting">Waiting</td>\n      '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i,j="",k="function",l=this.escapeExpression,m=this,n=c.blockHelperMissing;return j+="<table>\n  <thead>\n    <tr>\n      <th>Name</th>\n      <th>Description</th>\n      <th>Status</th>\n    </tr>\n  </thead>\n  <tbody>\n    ",i={hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e},(h=c.groups)?g=h.call(b,i):(h=b&&b.groups,g=_typeof(h)===k?h.call(b,i):h),c.groups||(g=n.call(b,g,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e})),(g||0===g)&&(j+=g),j+="\n  </tbody>\n  <table>"}),this.mmooc.templates["powerfunctions/head"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=this.escapeExpression;return h+='<div class="mmooc-power-functions">\n  <h1 class="xl">Power Functions</h1>\n  <h2>',(g=c.heading)?f=g.call(b,{hash:{},data:e}):(g=b&&b.heading,f="function"===_typeof(g)?g.call(b,{hash:{},data:e}):g),h+=i(f)+'</h2>\n  <p>\n    <a href="/?mmpf">Back</a>\n  </p>'}),this.mmooc.templates["powerfunctions/headteacher"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=this.escapeExpression;return h+='<div class="mmooc-power-functions">\r\n  <h1 class="xl">Power Functions</h1>\r\n  <h2>',(g=c.heading)?f=g.call(b,{hash:{},data:e}):(g=b&&b.heading,f="function"===_typeof(g)?g.call(b,{hash:{},data:e}):g),h+=i(f)+"</h2>"}),this.mmooc.templates["powerfunctions/list-groups"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){return"\n<p>No groups found for account</p>\n"}function g(a,b){var d,e="";return e+="\n<table>\n  <tr>\n    <th>ID</th>\n    <th>Name</th>\n    <th>Description</th>\n  </tr>\n  ",d=c.each.call(a,a&&a.groups,{hash:{},inverse:l.noop,fn:l.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+="\n</table>\n"}function h(a,b){var d,e,f="";return f+='\n  <tr>\n    <td class="right">',(e=c.id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.id,d=_typeof(e)===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+"</td>\n    <td>",(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=_typeof(e)===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+"</td>\n    <td>",(e=c.description)?d=e.call(a,{hash:{},data:b}):(e=a&&a.description,d=_typeof(e)===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+"</td>\n  </tr>\n  "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="function",k=this.escapeExpression,l=this;return i=c.unless.call(b,b&&b.groups,{hash:{},inverse:l.program(3,g,e),fn:l.program(1,f,e),data:e}),i||0===i?i:""}),this.mmooc.templates["powerfunctions/logins-process"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n    <tr id="mmpf-logins-'+j((d=null==b||!1===b?b:b.index,_typeof(d)===i?d.apply(a):d))+'">\n      <td>',(e=c.user_id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.user_id,d=_typeof(e)===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+"</td>\n      <td>",(e=c.login_id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.login_id,d=_typeof(e)===i?e.call(a,{hash:{},data:b}):e),f+=j(d)+'</td>\n      <td class="status waiting">Waiting</td>\n      '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return h+="<table>\n  <thead>\n    <tr>\n      <th>User ID</th>\n      <th>Login ID</th>\n      <th>Status</th>\n    </tr>\n  </thead>\n  <tbody>\n    ",g=c.each.call(b,b&&b.logins,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+="\n  </tbody>\n  <table>"}),this.mmooc.templates["powerfunctions/logins"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<form>\n  <dl>\n    <dt>\n      <label for="csv">Upload CSV file</label>\n    </dt>\n    <dd>\n      <input type="file" name="csv">\n    </dd>\n  </dl>\n  <input type="submit" />\n</form>\n\n<div class="side-information">\n  <h3>Decription of CSV format</h3>\n  <p>First line of the file must be the name of the columns. Column separators are commas. Fields optionally encloused by double\n    quotes (").\n    <dl>\n      <dt>current_id [String]\n        <dd>The current FEIDE user ID\n          <dt>new_id [String]\n            <dd>The new FEIDE user ID\n    </dl>\n</div>'}),this.mmooc.templates["powerfunctions/main"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div class="mmooc-pf-main">\n\t<h3>Teacher functions</h3>\n\t<div class="mmooc-pf-list">\n\t\t<div id="mmooc-pf-peer-review-btn" class="item">Peer review</div>\n\t\t<div id="mmooc-pf-student-progress-btn" class="item">Student progress</div>\n\t</div>\n\t<h3>Administrator functions</h3>\n\t<div class="mmooc-pf-list">\n\t\t<div id="mmooc-pf-list-group-btn" class="item">List groups</div>\n\t\t<div id="mmooc-pf-group-btn" class="item">Create account groups</div>\n\t\t<div id="mmooc-pf-course-group-btn" class="item">Create course groups</div>\n\t\t<div id="mmooc-pf-assign-btn" class="item">Assign students to groups</div>\n\t\t<div id="mmooc-pf-logins-btn" class="item">Add new logins</div>\n\t</div>\n</div>'}),this.mmooc.templates["powerfunctions/mainteacher"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},
'<div class="mmooc-pf-main">\r\n\t<h3>Teacher functions</h3>\r\n\t<div class="mmooc-pf-list">\r\n\t\t<div id="mmooc-pf-peer-review-btn" class="item">Peer review</div>\r\n\t\t<div id="mmooc-pf-student-progress-btn" class="item">Student progress</div>\r\n\t</div>\r\n</div>'}),this.mmooc.templates["powerfunctions/peer-review"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){return'\n        <option value="" disabled>No courses defined for account</option>\n        '}function g(a,b){var d,e="";return e+='\n        <option value="">Choose a course</option>\n        ',d=c.each.call(a,a&&a.courses,{hash:{},inverse:m.noop,fn:m.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+=" "}function h(a,b){var d,e,f="";return f+='\n        <option value="',(e=c.id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.id,d=_typeof(e)===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=_typeof(e)===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</option>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k="function",l=this.escapeExpression,m=this;return j+='<form>\n  <ol>\n    <li class="step-1">\n      <select id="mmpf-course-select">\n        ',i=c.unless.call(b,b&&b.courses,{hash:{},inverse:m.program(3,g,e),fn:m.program(1,f,e),data:e}),(i||0===i)&&(j+=i),j+='\n      </select>\n      <li class="step-2">\n        <select id="mmpf-category-select" name="category">\n          <option value="" disabled>No group sets defined for course</option>\n        </select>\n        <li class="step-3">\n          <select id="mmpf-group-select" name="group" multiple>\n            <option value="" disabled>No groups defined for course</option>\n          </select>\n          <li class="step-4">\n            <select id="mmpf-assignment-select" name="assignment">\n              <option value="" disabled>No assignments defined for course</option>\n            </select>\n  </ol>\n  <div class="assignment-info"></div>\n  <div class="progress-info"></div>\n  <div id="progress">\n    <div id="bar"></div>\n  </div>\n  <div class="peer-review-list"></div>\n  <div class="peer-review-create"></div>\n</form>'}),this.mmooc.templates["powerfunctions/student-progress"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){return'\n        <option value="">No courses defined for account</option>\n        '}function g(a,b){var d,e="";return e+='\n        <option value="">Choose a course</option>\n        ',d=c.each.call(a,a&&a.courses,{hash:{},inverse:m.noop,fn:m.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+=" "}function h(a,b){var d,e,f="";return f+='\n        <option value="',(e=c.id)?d=e.call(a,{hash:{},data:b}):(e=a&&a.id,d=_typeof(e)===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+'">',(e=c.name)?d=e.call(a,{hash:{},data:b}):(e=a&&a.name,d=_typeof(e)===k?e.call(a,{hash:{},data:b}):e),f+=l(d)+"</option>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k="function",l=this.escapeExpression,m=this;return j+='<form>\n  <ol>\n    <li class="step-1">\n      <select id="mmpf-course-select">\n        ',i=c.unless.call(b,b&&b.courses,{hash:{},inverse:m.program(3,g,e),fn:m.program(1,f,e),data:e}),(i||0===i)&&(j+=i),j+='\n      </select>\n      <li class="step-2">\n        <select id="mmpf-section-select" name="section">\n          <option value="">No sections defined for course</option>\n        </select>\n        <li class="step-3">\n          <select id="mmpf-module-select" name="module">\n            <option value="">No modules defined for course</option>\n          </select>\n  </ol>\n  <div id="progress">\n    <div id="bar"></div>\n  </div>\n  <div class="student-progress-table"></div>\n</form>'}),this.mmooc.templates["powerfunctions/tail"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},"</div>"}),this.mmooc.templates.uidp=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'I denne kompetansepakken benytter vi oss av rollestyring fra UIDP. For  se\n dine roller m du logge deg p UIDP.<div>\n <button class="button" id="uidpPopupLogin">Login UIDP</button>\n </div>\n'}),this.mmooc.templates.usermenu=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<ul id="user-menu">\n    <li class="mmooc-menu-item">\n        <a href="/conversations',(g=c.queryString)?f=g.call(b,{hash:{},data:e}):(g=b&&b.queryString,f=_typeof(g)===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'" class="mmooc-menu-item-title conversations">\n            <span id="mmooc-unread-messages-count"></span>\n        </a>\n    </li>\n    <li class="mmooc-menu-item" id="mmooc-menu-item-varsler">\n        <a href="#" class="mmooc-menu-item-title notifications">\n            <span id="mmooc-notification-count"></span>\n        </a>\n        <div class="mmooc-menu-item-drop" id="mmooc-activity-stream">\n        </div>\n    </li>\n    <li class="mmooc-menu-item profile-settings" id="mmooc-menu-item-profile-settings">\n        <a href="#" class="mmooc-menu-item-title">\n            <div class="ic-avatar" aria-hidden="true">\n                <img src="'+j((f=b&&b.user,f=null==f||!1===f?f:f.avatar_image_url,_typeof(f)===i?f.apply(b):f))+'" alt="'+j((f=b&&b.user,f=null==f||!1===f?f:f.display_name,_typeof(f)===i?f.apply(b):f))+'" />\n            </div>\n            <i class="icon-mini-arrow-down"></i>\n        </a>\n        <div class="mmooc-menu-item-drop" id="mmooc-profile-settings">\n            <ul>\n                <li>\n                    <a href="/profile/settings',(g=c.queryString)?f=g.call(b,{hash:{},data:e}):(g=b&&b.queryString,f=_typeof(g)===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'">Innstillinger</a>\n                </li>\n                <li>\n                    <a href="/logout',(g=c.queryString)?f=g.call(b,{hash:{},data:e}):(g=b&&b.queryString,f=_typeof(g)===i?g.call(b,{hash:{},data:e}):g),h+=j(f)+'">Logg ut</a>\n                </li>\n            </ul>\n        </div>\n    </li>\n</ul>'}),this.mmooc.templates.waitIcon=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<div id="fountainG">\n    <div id="fountainG_1" class="fountainG">\n    </div>\n    <div id="fountainG_2" class="fountainG">\n    </div>\n    <div id="fountainG_3" class="fountainG">\n    </div>\n    <div id="fountainG_4" class="fountainG">\n    </div>\n    <div id="fountainG_5" class="fountainG">\n    </div>\n    <div id="fountainG_6" class="fountainG">\n    </div>\n    <div id="fountainG_7" class="fountainG">\n    </div>\n    <div id="fountainG_8" class="fountainG">\n    </div>\n</div>'}),this.mmooc=this.mmooc||{},this.mmooc.api=function(){var a,b=[];return b.quizzes="Quiz",b.assignments="Assignment",b.discussion_topics="Discussion",a={_ajax:"undefined"!=typeof $?$:{},_env:"undefined"!=typeof ENV?ENV:{},_location:"undefined"!=typeof document?document.location:{search:"",href:""},_uriPrefix:"/api/v1",_defaultError:function(a,b,c,d){console.log(a,b,c,d)},_sendRequest:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=b.error||this._defaultError;a(this._uriPrefix+b.uri,b.params||{},b.callback).fail(c)},_get:function(a){var b=this._uriPrefix+a.uri,c=a.params||{},d=a.callback;$.ajax({url:b,type:"GET",data:c,success:function(a){if("student_id"in c&&(a=a.map(function(a){return a.student_id=c.student_id,a})),b.includes("/groups/")&&b.includes("/users")){var e=b.split("/groups/");_readOnlyError("groupId"),e=e[1].split("/users"),_readOnlyError("groupId"),e=parseInt(e[0]),a=a.map(function(a){return a.group_id=e,a})}d(a)},error:function(a,b,c){console.log("Error during GET")}})},_post:function(a){this._sendRequest(this._ajax.post,a)},_put:function(a){var b=this._uriPrefix+a.uri,c=a.params||{},d=a.callback;$.ajax({url:b,type:"PUT",data:c,success:function(a){d(a)},error:function(a,b,c){console.log("Error during PUT")}})},listModulesForCourse:function(a,b,c){var d="/api/v1/courses/".concat(c,"/modules?per_page=100");$.getJSON(d,function(b){var d=b.length,e=0;b.forEach(function(f,g){var h="/api/v1/courses/".concat(c,"/modules/").concat(f.id,"/items?per_page=100");$.getJSON(h,function(c){return function(f){b[c].items=f,++e===d&&a(b)}}(g))})})},getCurrentModuleItemId:function(){var a,b=location.pathname;if(/\/courses\/\d+\/modules\/items\/\d+$/.test(b)){var c=b.lastIndexOf("/");a=b.substring(c+1)}else{var d="module_item_id",e=""+this._location.search;if(void 0===e||-1==e.indexOf(d))return null;a=e.substring(e.indexOf(d)+d.length+1,e.length),-1!=a.indexOf("&")&&(a=a.substring(0,a.indexOf("&")))}return parseInt(a,10)},getCurrentTypeAndContentId:function(){if(/\/courses\/\d+\/\w+\/\d+/.test(""+this._location.pathname)){var a=this._location.pathname.split("/");if(a.length>=5){var c=b[a[3]];return{contentId:parseInt(a[4],10),type:c}}}return null},getAllCourses:function(a,b){this._get({callback:function(b){var c=b.filter(mmooc.util.filterSearchAllCourse);a(c)},error:b,uri:"/search/all_courses",params:{per_page:999}})},getAllPublicCourses:function(a,b){this._get({callback:function(b){var c=b.filter(mmooc.util.filterSearchAllCourse);a(c)},error:b,uri:"/search/all_courses?open_enrollment_only=true",params:{per_page:999}})},getEnrolledCourses:function(a,b){if(!mmooc.util.isAuthenticated())return a([]),!1;this._get({callback:function(b){if(mmooc.settings.filterCourses){var c=b.filter(mmooc.util.filterCourse);a(c)}else a(b)},error:b,uri:"/courses",params:{include:["syllabus_body","course_progress"],per_page:"100"}})},getModulesForCurrentCourse:function(a,b){var c=this.getCurrentCourseId();this.listModulesForCourse(a,b,c)},getModulesForCourseId:function(a,b,c){this._get({callback:a,error:b,uri:"/courses/".concat(c,"/modules"),params:{per_page:999}})},getItemsForModuleId:function(a,b,c,d,e){this._get({callback:a,error:b,uri:"/courses/".concat(c,"/modules/").concat(d,"/items"),params:e})},getCurrentCourseId:function(){var a=""+this._location.pathname,b=a.match(/\/courses\/(\d+)/);if(null!=b)return parseInt(b[1],10);if(this._env.group)return this._env.group.context_id;if($("#discussion_container").size()>0){var c=$("#discussion_topic div.entry-content header div div.pull-left span a");if(c.length){var d=c.attr("href");if(d.length){var e=d.split("/");if(3==e.length)return parseInt(e[2],10)}}}return null},getModuleItemSequence:function(a,b,c,d){this._get({callback:function(b){c(a,b)},error:d,uri:"/courses/".concat(a,"/module_item_sequence"),params:{asset_id:b,asset_type:"ModuleItem"}})},getCourse:function(a,b,c){this._get({callback:b,error:c,uri:"/courses/".concat(a),params:{}})},isGroupDiscussion:function(a,b,c){void 0!==ENV.DISCUSSION.IS_GROUP&&c(ENV.DISCUSSION.IS_GROUP),this.getDiscussionTopic(a,b,function(a){c(!!a.group_category_id)})},getCurrentGroupId:function(){var a=""+this._location.pathname,b=a.match(/\/groups\/(\d+)/);return null!=b?parseInt(b[1],10):null},getGroup:function(a,b,c){this._get({callback:b,error:c,uri:"/groups/".concat(a),params:{}})},getGroupMembers:function(a,b,c){this._get({callback:b,error:c,uri:"/groups/".concat(a,"/users"),params:{include:["avatar_url"],per_page:999}})},getCurrentModuleForItemOrTypeAndContentId:function(a,b,c,d){this.getModulesForCurrentCourse(function(d){for(var e=!1,f=null,g=0;g<d.length;g++){for(var h=d[g],i=h.items,j=0,k=0,l=0;l<i.length;l++){var m=i[l];(m.id==a||null!=b&&b.contentId==m.content_id&&b.type==m.type)&&(m.isCurrent=!0,e=!0,f&&(f.isCurrentHeader=!0)),"SubHeader"==m.type?(f&&k==j&&(f.done=!0),f=m,j=0,k=0):k++,m.completion_requirement&&m.completion_requirement.completed&&j++}if(f&&k==j&&(f.passed=!0),e)return void c(h)}},d)},getCurrentModuleItemForGroupDiscussion:function(a,b){var c,d,e,f=/\/groups\/\d+\/discussion_topics\/\d+/;if(f.test(""+this._location.pathname)&&(c=this._location.pathname.split("/"),c.length>=5&&(e=c[4],d=c[2])),null!=e){var g=this;this.getSpecificGroupDiscussionTopic(d,e,function(c){g.getUserGroups(function(e){for(var f=0;f<e.length;f++)if(e[f].id==d){var h=null,i={contentId:c.root_topic_id,type:"Discussion"};g.getCurrentModuleForItemOrTypeAndContentId(h,i,a,b);break}})})}},getCurrentModule:function(a,b){var c=this.getCurrentModuleItemId(),d=null,e=!0;null==c&&null==(d=this.getCurrentTypeAndContentId())&&(e=!1,this.getCurrentModuleItemForGroupDiscussion(a,b)),e&&this.getCurrentModuleForItemOrTypeAndContentId(c,d,a,b)},getLocale:function(){return this._env.LOCALE},usesFrontPage:function(){return"wiki"==this._env.COURSE.default_view},getRoles:function(){return this._env.current_user_roles},getUser:function(){return this._env.current_user},getUserProfile:function(a,b){this._get({callback:a,error:b,uri:"/users/self/profile",params:{}})},getActivityStreamForUser:function(a,b){this._get({callback:a,error:b,uri:"/users/self/activity_stream",params:{}})},currentPageIsAnnouncement:function(){return 1==$("#section-tabs").find("a.announcements.active").size()},currentPageIsModuleItem:function(){return null!=this.getCurrentModuleItemId()||null!=this.getCurrentTypeAndContentId()},getUnreadMessageSize:function(a,b){this._get({callback:a,error:b,uri:"/conversations/unread_count",params:{}})},getSectionRecipients:function(a,b,c){var d="course_".concat(a,"_sections");this._get({callback:b,error:c,uri:"/search/recipients",params:{permissions:["send_messages_all"],messageable_only:!0,synthetic_contexts:!0,context:d,per_page:999}})},postMessageToConversation:function(a,b,c,d,e,f){var g="course_".concat(a);this._post({callback:e,error:f,uri:"/conversations",params:{course:g,recipients:[b],subject:c,body:d}})},getAccounts:function(a,b){this._get({callback:a,error:b,uri:"/accounts",params:{}})},getUsersForAccount:function(a,b,c){this._get({callback:b,error:c,uri:"/accounts/".concat(a,"/users"),params:{}})},getCoursesForAccount:function(a,b,c){this._get({callback:b,error:c,uri:"/accounts/".concat(a,"/courses"),params:{per_page:999}})},getCoursesForUser:function(a,b){this._get({callback:a,error:b,uri:"/courses",params:{per_page:999}})},getGroupCategoriesForAccount:function(a,b,c){this._get({callback:b,error:c,uri:"/accounts/".concat(a,"/group_categories"),params:{}})},getGroupCategoriesForCourse:function(a,b,c){this._get({callback:b,error:c,uri:"/courses/".concat(a,"/group_categories"),params:{per_page:999}})},_getGroupsForAccountHelper:function(a,b,c){var d=this;return function(e,f,g){Array.prototype.push.apply(a,e);var h=g.getResponseHeader("Link").split(",").find(function(a){return a.match('rel="next"')});if(void 0===h)b(a);else{var i=h.match("<([^>]+)>")[1];d._get({callback:d._getGroupsForAccountHelper(a,b,c),error:c,uri:i.split("api/v1")[1],params:{}})}}},getGroupsForAccount:function(a,b,c){this._get({callback:this._getGroupsForAccountHelper([],b,c),error:c,uri:"/accounts/".concat(a,"/groups"),params:{per_page:999}})},getGroupCategory:function(a,b,c){this._get({callback:b,error:c,uri:"/group_categories/".concat(a),params:{}})},getGroupsInCategory:function(a,b,c){this._get({callback:b,error:c,uri:"/group_categories/".concat(a,"/groups"),params:{per_page:999}})},getGroupsInCourse:function(a,b,c){this._get({callback:b,error:c,uri:"/courses/".concat(a,"/groups"),params:{per_page:999}})},getUserGroups:function(a,b){this._get({callback:a,error:b,uri:"/users/self/groups",params:{per_page:999}})},getUserGroupsForCourse:function(a,b,c){this.getUserGroups(function(a){return function(c){for(var d=[],e=0;e<c.length;e++){var f=c[e];f.course_id==a&&d.push(f)}b(d)}}(a))},getSectionsForCourse:function(a,b,c,d){this._get({callback:c,error:d,uri:"/courses/".concat(a,"/sections"),params:b})},getSingleSection:function(a,b,c){this._get({callback:b,error:c,uri:"/sections/".concat(a),params:{}})},getSingleAssignment:function(a,b,c,d){this._get({callback:c,error:d,uri:"/courses/".concat(a,"/assignments/").concat(b),params:{}})},getAssignmentsForCourse:function(a,b,c){this._get({callback:b,error:c,uri:"/courses/".concat(a,"/assignments"),params:{per_page:999}})},getPagesForCourse:function(a,b){this._get({callback:b,uri:"/courses/".concat(a,"/pages"),params:{per_page:999}})},getDiscussionTopicsForCourse:function(a,b){this._get({callback:b,uri:"/courses/".concat(a,"/discussion_topics"),params:{per_page:999}})},getQuizzesForCourse:function(a,b){this._get({callback:b,uri:"/courses/".concat(a,"/quizzes"),params:{per_page:999}})},getSingleSubmissionForUser:function(a,b,c,d,e){this._get({callback:d,error:e,uri:"/courses/".concat(a,"/assignments/").concat(b,"/submissions/").concat(c),params:{include:["submission_history","submission_comments","rubric_assessment","visibility","course","user"]}})},getPeerReviewsForSubmissionId:function(a,b,c,d,e){this._get({callback:d,error:e,uri:"/courses/".concat(a,"/assignments/").concat(b,"/submissions/").concat(c,"/peer_reviews"),params:{include:["user"]}})},getPeerReviewsForAssignment:function(a,b,c,d){this._get({callback:c,error:d,uri:"/courses/".concat(a,"/assignments/").concat(b,"/peer_reviews"),params:{include:["user"]}})},createPeerReview:function(a,b,c,d,e,f){this._post({callback:e,error:f,uri:"/courses/".concat(a,"/assignments/").concat(b,"/submissions/").concat(c,"/peer_reviews"),params:{user_id:d}})},enrollUser:function(a,b){$.post(a,function(a){b(a)})},enrollUserIdInSection:function(a,b,c,d,e){return this._post({callback:d,error:e,uri:"/sections/".concat(b,"/enrollments/"),params:{"enrollment[user_id]":a,"enrollment[type]":c,"enrollment[enrollment_state]":"active","enrollment[limit_privileges_to_course_section]":!0}}),!0},createGroup:function(a,b,c,d){this._post({callback:c,error:d,uri:"/group_categories/".concat(a,"/groups"),params:{name:b}})},createSection:function(a,b,c,d){this._post({callback:c,error:d,uri:"/courses/".concat(a,"/sections"),params:{"course_section[name]":b}})},createGroupMembership:function(a,b,c,d){this._post({callback:c,error:d,uri:"/groups/".concat(a,"/memberships"),params:{user_id:b}})},createUserLogin:function(a,b,c){var d=a.account_id;delete a.account_id,this._post({callback:b,error:c,uri:"/accounts/".concat(d,"/logins"),params:a})},getDiscussionTopic:function(a,b,c){this._get({callback:c,uri:"/courses/".concat(a,"/discussion_topics/").concat(b),params:{per_page:999}})},getQuiz:function(a,b,c){this._get({callback:c,uri:"/courses/".concat(a,"/quizzes/").concat(b),params:{per_page:999}})},getSpecificGroupDiscussionTopic:function(a,b,c){this._get({callback:c,uri:"/groups/".concat(a,"/discussion_topics/").concat(b),params:{per_page:999}})},getGroupDiscussionTopics:function(a,b){this._get({callback:b,uri:"/groups/".concat(a,"/discussion_topics/"),params:{per_page:999}})},getAnnouncementsForCourse:function(a,b){this._get({callback:b,uri:"/courses/".concat(a,"/discussion_topics"),params:{only_announcements:!0,per_page:999}})},getEnrollmentsForCourse:function(a,b,c){this._get({callback:c,uri:"/courses/".concat(a,"/enrollments"),params:b})},getEnrollmentsForSection:function(a,b,c){this._get({callback:c,uri:"/sections/".concat(a,"/enrollments"),params:b})},getUsersEnrollmentsForCourse:function(a,b){this._get({callback:function(c){var d=c.filter(function(b){return b.course_id==a});b(d)},uri:"/users/self/enrollments",params:{per_page:999}})}},_defineProperty(a,"getEnrollmentsForSection",function(a,b,c){this._get({callback:c,uri:"/sections/".concat(a,"/enrollments"),params:b})}),_defineProperty(a,"getCaledarEvents",function(a,b){this._get({callback:b,uri:"/calendar_events/",params:a})}),_defineProperty(a,"markDiscussionTopicAsRead",function(a,b,c){this._put({callback:c,uri:"/courses/".concat(a,"/discussion_topics/").concat(b,"/read_all"),params:{forced_read_state:"false"}})}),a}(),"undefined"!=typeof module&&null!==module&&(module.exports=this.mmooc.api),this.mmooc=this.mmooc||{},this.mmooc.hrefQueryString="?design=udir",this.mmooc.settingsRoot={feideEnrollRefferers:[this.mmooc.hrefQueryString]},this.mmooc=this.mmooc||{},this.mmooc.utilRoot=function(){return{_env:"undefined"!=typeof ENV?ENV:{},getRoles:function(){return this._env.current_user_roles},isAuthenticated:function(){return null!==this.getRoles()},getLinkToMyCourses:function(){return"/courses"+mmooc.hrefQueryString},parse_query_string:function(a){for(var b=a.split("&"),c={},d=0;d<b.length;d++){var e=b[d].split("="),f=decodeURIComponent(e[0]),g=decodeURIComponent(e[1]);if(void 0===c[f])c[f]=decodeURIComponent(g);else if("string"==typeof c[f]){var h=[c[f],decodeURIComponent(g)];c[f]=h}else c[f].push(decodeURIComponent(g))}return c},urlParamsToObject:function(){if(""===document.location.search)return{};var a=location.search.substring(1);return mmooc.utilRoot.parse_query_string(a)},checkReferrer:function(a){return document.referrer.endsWith(a)},isEnrollReferrer:function(){var a=mmooc.settingsRoot.feideEnrollRefferers,b=a.some(mmooc.utilRoot.checkReferrer);return!(mmooc.utilRoot.isAuthenticated()||!b)},redirectFeideAuthIfEnrollReferrer:function(){if(mmooc.utilRoot.isEnrollReferrer()){if(!document.location.search.includes("normalLogin=1"))return window.location.href="/login/saml",!0;$("#content > div > div > div > div > div.ic-Login-header > div.ic-Login-header__links").hide()}return!1},isEnrollCodeParamPassed:function(a){var b=a&&a.enroll_code;return void 0!==b?b:null},isLoginParamPassed:function(a){return void 0!==(a&&a.login)},redirectToEnrollIfCodeParamPassed:function(){if(""!==document.location.search){var a=mmooc.utilRoot.urlParamsToObject(),b=mmooc.utilRoot.isEnrollCodeParamPassed(a);if(b)return window.location.href="/enroll/"+b+mmooc.hrefQueryString,!0;if(mmooc.utilRoot.isLoginParamPassed(a)){var c=mmooc.utilRoot.getLinkToMyCourses();return window.location.href=c,!0}}return!1}}}(),this.mmooc=this.mmooc||{},this.mmooc.announcements=function(){var a=function(){$("#markAllAsReadButton").hide(),mmooc.menu.updateNotificationsForUser()};return{addMarkAsReadButton:function(){var b=mmooc.api.getCurrentTypeAndContentId().contentId,c=mmooc.api.getCurrentCourseId();mmooc.api.getDiscussionTopic(c,b,function(d){if("read"!==d.read_state){var e=mmooc.util.renderTemplateWithData("actionbutton",{id:"markAllAsReadButton",title:"Marker som lest"});document.getElementById("content-wrapper").insertAdjacentHTML("afterbegin",e),$("#markAllAsReadButton").click(function(){mmooc.api.markDiscussionTopicAsRead(c,b,a)})}})},printAnnouncementsUnreadCount:function(){var a=mmooc.api.getCurrentCourseId();mmooc.api.getAnnouncementsForCourse(a,function(a){var b=0;a.forEach(function(a){("unread"==a.read_state||a.unread_count>0)&&b++}),b>0&&mmooc.announcements.printUnreadCountInTab(b)})},printUnreadCountInTab:function(a){var b=this;$(".mmooc-course-tab a").each(function(){"Kunngjringer"==$(b).text()&&$(b).parent().append("<span class='discussion-unread-value discussion-unread-tab'>".concat(a,"</span>"))})},setAnnouncementsListUnreadClass:function(){var a=this,b=setInterval(function(){$("body.announcements .discussionTopicIndexList .discussion-topic").length&&(clearInterval(b),$("body.announcements .discussionTopicIndexList .discussion-topic").each(function(){-1==$(a).find(".new-items").attr("title").indexOf("Ingen uleste svar.")&&($(a).addClass("unread"),$(a).removeClass("read"))}))},100)}}}(),this.mmooc=this.mmooc||{},this.mmooc.badges=function(){var a=function(){mmooc.util.adaptHeightToIframeContentForId("tool_content_wrapper","tool_content")};return{initPage:function(){a();var b;$(window).resize(function(){clearTimeout(b),b=setTimeout(a,42)})},claimBadge:function(a,b,c){a.issue_no_modal(b,c)}}}(),this.mmooc=this.mmooc||{},this.mmooc.courseList=function(){return{listCourses:function(a,b){0===document.getElementsByClassName("reaccept_terms").length&&mmooc.api.getEnrolledCourses(function(c){$("#".concat(a)).children().appendTo("#right-side-wrapper #right-side"),$("#".concat(a)).html("<div>Laster ".concat(mmooc.i18n.CoursePlural.toLowerCase(),"....</div>"));var d="",e=mmooc.util.getLinkToAvailableCourses();if(0==c.length)d="<h1>Mine ".concat(mmooc.i18n.CoursePlural.toLowerCase(),"</h1><p>").concat(mmooc.i18n.NoEnrollments,"</p><a class='btn' href='").concat(e,"'>Se tilgjengelige ").concat(mmooc.i18n.CoursePlural.toLowerCase(),"</a>"),$("#".concat(a)).html(d);else{d=mmooc.util.renderTemplateWithData("courselistcontainer",{courseLabel:mmooc.i18n.CoursePlural.toLowerCase(),queryString:mmooc.hrefQueryString}),$("#".concat(a)).html(d);var f=mmooc.util.sortCourses(c),g=mmooc.util.getCourseCategories(f);mmooc.util.getCoursesCategorized(f,g).forEach(function(a){d=mmooc.util.renderTemplateWithData("courselist",{title:a.title,courses:a.courses,courseLabel:mmooc.i18n.Course.toLowerCase()}),$(".mmooc-course-list-container").append(d)}),mmooc.util.updateProgressForRoleBasedCourses(c)}document.title=mmooc.i18n.CoursePlural,$.isFunction(b)&&b()})},showAddCourseButton:function(){var a=$("#start_new_course");a.length&&($("#content").append(a),a.html(mmooc.i18n.AddACourse))},showFilter:function(a){var b=["Alle"];$(a).each(function(c){var d=a[c].course_code.split("::");d.length>1&&-1==b.indexOf(d[0])&&b.push(d[0])}),b.push("Andre");var c="";b.forEach(function(a){c+=(_readOnlyError("options"),'<option value="'.concat(a,'">').concat(a,"</option>"))}),$("#filter").append(c)},applyFilter:function(a){var b=this;"Alle"==$("#filter").val()?$(a).each(function(){$("#course_".concat(this.id)).show()}):"Andre"==$("#filter").val()?$(a).each(function(){b.course_code.indexOf("::")>=0?$("#course_".concat(b.id)).hide():$("#course_".concat(b.id)).show()}):$(a).each(function(){var a=b.course_code.split("::")[0];$("#filter").val()==a?$("#course_".concat(b.id)).show():$("#course_".concat(b.id)).hide()})},isCourseCompleted:function(a){for(var b=0;b<a.length;b++)for(var c=a[b],d=0;d<c.items.length;d++){var e=c.items[d];if(e.completion_requirement&&!e.completion_requirement.completed)return!1}return!0}}}(),this.mmooc=this.mmooc||{},this.mmooc.coursePage=function(){return{showCourseInvitation:function(){if(!mmooc.util.isAuthenticated()){var a=$(".course_enrollment_link"),b=window.location.href.split("/"),c=b[b.length-1];a&&(a.text(mmooc.i18n.EnrollButton),a.click(function(a){a.preventDefault(),window.location.href="/search/all_courses"+mmooc.hrefQueryString+"#"+c}))}},listModulesAndShowProgressBar:function(){mmooc.api.getModulesForCurrentCourse(function(a){var b="",c="";mmooc.util.isActiveCourseRoleBased()&&mmooc.util.isPrincipal()?(b=mmooc.util.renderTemplateWithData("courseprogress",{title:mmooc.i18n.CourseProgressionTitle,modules:a}),c=mmooc.util.renderTemplateWithData("modulesprincipal",{navname:mmooc.i18n.GoToModule,coursemodules:mmooc.i18n.ModulePlural,modules:a,course:mmooc.util.course})):(b=mmooc.util.renderTemplateWithData("courseprogressforstudent",{title:mmooc.i18n.CourseProgressionTitle,modules:a}),c=mmooc.util.renderTemplateWithData("modules",{navname:mmooc.i18n.GoToModule,coursemodules:mmooc.i18n.ModulePlural,modules:a,course:mmooc.util.course})),mmooc.util.isMMOOCLicense()&&mmooc.footer.addLicenseInFooter(),document.getElementById("course_home_content").insertAdjacentHTML("beforebegin",b),document.getElementById("course_home_content").insertAdjacentHTML("beforebegin",c),mmooc.discussionTopics.printDiscussionUnreadCount(a,"coursepage")})},hideCourseInvitationsForAllUsers:function(){$(".ic-notification__message.notification_message:contains('invitert til  delta')").closest(".ic-notification.ic-notification--success").hide(),$("ul#flash_message_holder li:contains('delta i dette kurset')").hide()},overrideUnregisterDialog:function(){var a=$(".self_unenrollment_link"),b=$("#self_unenrollment_dialog");a.length&&(a.text(a.text().replace("Slipp dette emnet",mmooc.i18n.DropCourse)),a.on("click",function(a){setTimeout(function(){$("#ui-id-1").html(mmooc.i18n.DropCourse)},200)})),b.length&&(b.find("h2").hide(),b.find(".button-container a span").text("OK"),b.find(".button-container a i").hide(),$("#self_unenrollment_dialog").contents().filter(function(){return 3==this.nodeType}).each(function(){this.textContent=""}),$("#self_unenrollment_dialog").prepend("<div/><p/><p>"+mmooc.i18n.DropCourseDialogText+"<span class='unenroll_dialog_sad'></span><p>"+mmooc.i18n.JoinCourseDialogText+"<span class='unenroll_dialog_happy'></span></p>"))},replaceUpcomingInSidebar:function(){var a=$("body.home .coming_up");return!!a.length&&(a.replaceWith("<div class='deadlines-container'><h2>"+mmooc.i18n.eventsAndDeadlinesTitle+"</h2><div class='deadlines-scroll-up'></div><div class='deadlines-list'></div><div class='deadlines-scroll-down'></div></div>"),!0)},_displayDeadlines:function(a){a.sort(function(a,b){return a.date-b.date});for(var b="<table>",c=0;c<a.length;c++){var d=mmooc.util.getMonthShortName(a[c].date);"url"in a[c]?b+="<tr id='deadline-"+c+"'><div></div><td class='deadline-date'>"+a[c].date.getDate()+". "+d+"</td><td class='deadline-title'><a href='"+a[c].url+"' title='"+a[c].title+"'>"+a[c].title+"</a></td></tr>":b+="<tr id='deadline-"+c+"'><td class='deadline-date'>"+a[c].date.getDate()+". "+d+"</td><td class='deadline-title'>"+a[c].title+"</td></tr>"}b+="</table>",$("body.home .deadlines-list").html(b);var e=mmooc.coursePage.findUpcomingDate(a);$("#deadline-"+e).addClass("upcoming");var f=$("body.home .deadlines-list"),g=$("#deadline-"+e);f.scrollTop(f.scrollTop()+g.position().top-f.height()/2+g.height()/2),$(".deadlines-scroll-up").click(function(){var a=f.scrollTop()-50;$(f).animate({scrollTop:a},200)}),$(".deadlines-scroll-down").click(function(){var a=f.scrollTop()+50;$(f).animate({scrollTop:a},200)})},printDeadlinesForCourse:function(){var a=mmooc.api.getCurrentCourseId(),b=[],c={all_events:1,type:"event",context_codes:["course_"+a]};mmooc.api.getCaledarEvents(c,function(c){for(var d=0;d<c.length;d++)if(c[d].end_at){var e=new Date(c[d].end_at),f={date:e,title:c[d].title};b.push(f)}var g={all_events:1,type:"assignment",context_codes:["course_"+a]};mmooc.api.getCaledarEvents(g,function(a){for(var c=0;c<a.length;c++)if(a[c].all_day_date){var d=new Date(a[c].all_day_date),e={date:d,title:a[c].title,url:a[c].html_url};b.push(e)}b.length&&mmooc.coursePage._displayDeadlines(b)})})},findUpcomingDate:function(a){for(var b,c=Date.now(),d=1/0,e=!0,f=0;f<a.length;f++){var g=+a[f].date-c;g>0&&g<d&&(d=g,b=f,e=!1)}return e?a.length-1:b}}}(),this.mmooc=this.mmooc||{},this.mmooc.coursesettings=function(){function a(a,b){return"style='background-color:"+b+";color:"+a+"'"}function b(b){return b?a("white","green")+">JA":a("white","red")+">NEI"}function c(a,b,c){var d="<tr><td>"+b+"</td><td>"+c+"</td></tr>";$("#"+a).append(d)}function d(b,c,d,e,f){var g="<tr><td "+a(e,f)+">"+c+"</td><td "+a(e,f)+">"+d+"</td></tr>";$("#"+b).append(g)}function e(a,b,c){d(a,b,c,"white","red")}function f(a,b,c){d(a,b,c,"white","green")}function g(b,c,d,e){return"<tr><td"+a(d,e)+">"+b+"</td><td>"+c+"</td></tr>"}function h(a,b){return g(a,b,"white","red")}function i(a,b,c){return"Sanity"+a+b+c}function j(a){return"Wait"+a}function k(a){$("#"+a).append("<tr id='"+j(a)+"'>td><img src='https://kompetanseudirno.azureedge.net/udirdesign/bitmaps/loading.gif'/>")}function l(a){$("#"+j(a)).remove()}function m(a,b,c){return""}function n(a,b,d){var f=i(a,b,d.id),g=d.completion_requirement;if(g){var h=g.type;"must_mark_done"!=h&&e(f,"Krav:",h+"(Vi anbefaler merk som ferdig for innholdssider.)")}else c(f,"Ingen","");l(f)}function o(a,b,c){return""}function p(a,b,d){var e=i(a,b,d.id);c(e,"Ingen",""),l(e)}function q(a,b,c){var d="",e=c.completion_requirement;if(e){var f=e.type;"must_mark_done"!=f&&(d+=h("Krav:",f))}return d}function r(a,b,d){var e=i(a,b,d.id);c(e,"Ingen",""),l(e)}function s(a,b,c){var d="",e=c.completion_requirement;if(e){var f=e.type;"must_contribute"!=f&&(d+=h("Krav:",f))}return d}function t(a,b,c){var d=i(a,b,c.id),g=c.content_id;mmooc.api.getDiscussionTopic(a,g,function(a){return function(b){l(a),"side_comment"!=b.discussion_type&&e(a,"Trdtype:",b.discussion_type+"(Vi anbefaler side_comment.)");var c=b.group_category_id
;c?f(a,"Gruppekategori:",c):e(a,"Gruppekategori:","Mangler (Dette blir en diskusjon hvor samtlige studenter deltar. Vi anbefaler gruppediskusjoner dersom det er mange studenter.)")}}(d))}function u(a,b,c){var d="",e=c.completion_requirement;if(e){var f=e.type;"must_submit"!=f&&(d+=h("Krav:",f+" p innleveringsoppgave."))}return d}function v(a,b,d){var g=d.content_id,h=i(a,b,d.id);mmooc.api.getSingleAssignment(a,g,function(a){return function(b){if(l(a),c(a,"Type:",b.submission_types),console.log("Assignment submission type: "+b.submission_types),b.submission_types.indexOf("online_upload")>-1&&(b.allowed_extensions?c(a,"Tillatte filendelser:",b.allowed_extensions):e(a,"Ingen tillatte filendelser spesifisert. Vi anbefaler  sette dette.")),b.due_at?c(a,"Frist:",b.due_at):e(a,"Frist:","Ingen. (Vi anbefaler  ha en frist)"),c(a,"Hverandrevurdering:",b.peer_reviews),b.peer_reviews)if(b.automatic_peer_reviews){var d="ingen";d=b.peer_reviews_assign_at,e(a,"Tildeling av hverandrevurdering:",d+" (Vi anbefaler ikke automatisk tildeling."),c(a,"Antall vurderinger:",b.peer_review_count)}else f(a,"Tildeling av hverandrevurdering: ","Manuell. Dette er anbefalt. Husk  legge fristen i kalenderen.")}}(h),V)}function w(a,b,c){var d="",e=c.completion_requirement;if(e){var f=e.type;"min_score"!=f&&(d+=h("Krav:",f+" p quiz."))}return d}function x(a,b,d){var e=d.content_id,f=i(a,b,d.id);mmooc.api.getQuiz(a,e,function(a){return function(b){l(a),c(a,"Frist:",b.due_at)}}(f))}function y(a,b,c){var d=i(a,b,c.id),e="<table id='"+d+"'>",f=c.type;return console.log("Item type:"+f),"Assignment"==f?e+=u(a,b,c):"Discussion"==f?e+=s(a,b,c):"Page"==f?e+=m(a,b,c):"Quiz"==f?e+=w(a,b,c):"File"==f?e+=q(a,b,c):"SubHeader"==f&&(e+=o(a,b,c)),k(d),e+="</table>"}function z(a,b,c){var d=c.type;"Assignment"==d?v(a,b,c):"Discussion"==d?t(a,b,c):"Page"==d?n(a,b,c):"Quiz"==d?x(a,b,c):"File"==d?r(a,b,c):"SubHeader"==d&&p(a,b,c)}function A(a){var b="",c="/courses",d=a.indexOf(c);return d>-1?b=a.substr(d):console.log("getCommonUrlKey: Could not find key for url: "+a),b}function B(a){if("SubHeader"!=a.type&&a.url){var b=a.url,c=A(b);U[c]=a}}function C(a,c){for(var d="<table class='table'><thead><tr><th>Innholdselement</th><th>Publisert</th><th>Krav</th><th>Type</th><th>Detaljer</th></tr></thead><tbody>",e=c.items,f=c.id,g=0;g<e.length;g++){var h=e[g];B(h),d+="<td>"+h.title+"</td>",d+="<td "+b(h.published)+"</td>";var i=h.completion_requirement;if("SubHeader"==h.type?d+="<td>":d+="<td "+b(i),i){var j=i.type;if(d+=" ("+j+")",d+=" ","min_score"==j){d+="<br/>Min score: "+i.min_score}}d+="</td><td>",d+=h.type,d+="</td><td>",d+=y(a,f,h),d+="</td>",d+="</tr>"}return d+="</tbody></table>"}function D(a,b){for(var c=b.items,d=b.id,e=0;e<c.length;e++){z(a,d,c[e])}}function E(a,c){for(var d="",e=0;e<c.length;e++){var f=c[e];d+="<p><b>Modulnavn:"+f.name+"</b></p>",d+="<p>Publisert: <span "+b(f.published)+"</span></p>",d+=C(a,f),d+="<hr/>"}return d}function F(a,b){for(var c=0;c<b.length;c++){D(a,b[c])}}function G(a,b){return b==Q||b==T?a.title:a.name}function H(a){var b="NEI";return a.published&&(b="<span style='bgcolor=red;color=white'>JA</span>"),b}function I(a){return"pageType"+a}function J(a,b){var c="<h2>"+b+"</h2><table class='table' id='"+I(a)+"'>";return c+="<thead><tr><th>Publisert</th><th>Tittel</th><th>Lenke</th></tr></thead><tbody></tbody></table>"}function K(b,c,d,e,f,g){var h="<tr><td "+a(f,g)+">"+c+"</td><td "+a(f,g)+">"+d+"</td><td "+a(f,g)+">"+e+"</td></tr>";$("#"+I(b)).append(h)}function L(a,b,c,d){K(a,b,c,d,"white","red")}function M(a,b,c,d){K(a,b,c,d,"white","green")}function N(a,b){for(var c=!1,d=0;d<a.length;d++){var e=a[d],f=A(e.html_url);if(!U[f]){var g=G(e,b);L(b,H(e),g,f),c=!0}}c||M(b,"Ingen","","")}function O(a){return"pfdkGroupCategory_"+a}function P(a){return"pfdkSection_"+a}var Q=0,R=1,S=2,T=3,U=[],V=function(a){console.error("error calling api",a)};return{addSanityCheckButton:function(){$("#right-side table.summary").before("<a id='pfdksanitycheck' class='Button Button--link Button--link--has-divider Button--course-settings' href='#'><i class='icon-student-view' />Sanity check</a>"),$("#pfdksanitycheck").on("click",function(){bCancel=!1;var a=$("#content"),c="";a.html('<h1>Sanity check</h1>        <div id="mmoocOverallProgress"></div>        <div id="resultarea"></div>');var d=mmooc.api.getCurrentCourseId();mmooc.api.getCourse(d,function(a){c+="<p><b>Kursnavn:</b> "+a.name+"</p>";var e="available"==a.workflow_state;c+="<p>Publisert: <span "+b(e)+"</span></p>",c+=J(T,"Lsrevne sider"),c+=J(R,"Lsrevne oppgaver"),c+=J(Q,"Lsrevne diskusjoner"),c+=J(S,"Lsrevne quizer"),mmooc.api.getModulesForCurrentCourse(function(a){c+=E(d,a),$("#resultarea").html(c),F(d,a),mmooc.api.getPagesForCourse(d,function(a){N(a,T)}),mmooc.api.getAssignmentsForCourse(d,function(a){N(a,R)}),mmooc.api.getDiscussionTopicsForCourse(d,function(a){N(a,Q)}),mmooc.api.getQuizzesForCourse(d,function(a){N(a,S)})},V)},V)})},addListSectionsButton:function(){$("#right-side table.summary").before("<a id='pfdklistsections' class='Button Button--link Button--link--has-divider Button--course-settings' href='#'><i class='icon-student-view' />List sections</a>"),$("#pfdklistsections").on("click",function(){$("#content").html('<h1>Seksjoner</h1><div id="resultarea"></div>');var a=mmooc.api.getCurrentCourseId(),b={per_page:999};mmooc.api.getSectionsForCourse(a,b,function(a){for(var b="<table class='table'><tr><th>Section name</th><th>Section id</th></tr>",c=0;c<a.length;c++)b=b+"<tr><td>"+a[c].name+"</td><td>"+a[c].id+"</td></tr>";b+="</table>",$("#resultarea").html(b)})})},addListUsersButton:function(){$("#right-side table.summary").before("<a id='pfdklistusers' class='Button Button--link Button--link--has-divider Button--course-settings' href='#'><i class='icon-student-view' />List users</a>"),$("#pfdklistusers").on("click",function(){$("#content").html('<h1>Brukere</h1><div id="resultarea"></div>');var a=mmooc.api.getCurrentCourseId(),b={per_page:999};mmooc.api.getSectionsForCourse(a,b,function(a){for(var b="",c=0;c<a.length;c++){var d=a[c],e=P(d.id);b="<h2>"+d.name+"</h2><table class='table' id='"+e+"'>",b+="<thead><tr><th>User id</th><th>SIS user id</th></tr></thead><tbody></tbody></table>",$("#resultarea").append(b);var f={per_page:999};mmooc.api.getEnrollmentsForSection(d.id,f,function(a){for(var b=0;b<a.length;b++){var c=a[b],d=P(c.course_section_id),e="<tr><td>"+c.user_id+"</td><td>"+c.sis_user_id+"</td></tr>";$("#"+d).append(e)}})}})})},addListAssignmentsButton:function(){$("#right-side table.summary").before("<a id='pfdklistassignments' class='Button Button--link Button--link--has-divider Button--course-settings' href='#'><i class='icon-student-view' />List assignments</a>"),$("#pfdklistassignments").on("click",function(){$("#content").html('<h1>Oppgaver</h1><div id="resultarea"></div>');var a=mmooc.api.getCurrentCourseId();mmooc.api.getAssignmentsForCourse(a,function(a){if(a.length){var b="<table class='table' id='pfdkassignmentstable'>";b+="<thead><tr><th>Oppgave id</th><th>Beskrivelse</th><th>Hverandrevurdering</th></tr></thead><tbody></tbody></table>",$("#resultarea").append(b);for(var c=0;c<a.length;c++){var d=a[c],e="NEI";d.peer_reviews&&(e="JA");var f="<tr><td>"+d.id+"</td><td><a href='"+d.html_url+"' target='_blank'>"+d.name+"</a></td><td>"+e+"</td></tr>";$("#pfdkassignmentstable").append(f)}}else $("#resultarea").append("Ingen oppgaver")})})},addListGroupsButton:function(){$("#right-side table.summary").before("<a id='pfdklistgroups' class='Button Button--link Button--link--has-divider Button--course-settings' href='#'><i class='icon-student-view' />List groups</a>"),$("#pfdklistgroups").on("click",function(){$("#content").html('<h1>Grupper</h1><div id="resultarea"></div>');var a=mmooc.api.getCurrentCourseId();mmooc.api.getGroupCategoriesForCourse(a,function(a){for(var b="",c=0;c<a.length;c++){var d=a[c],e=O(d.id);b="<h2>"+d.name+"</h2><table class='table' id='"+e+"'>",b+="<thead><tr><th>Gruppenavn</th><th>Id</th></tr></thead><tbody></tbody></table>",$("#resultarea").append(b),mmooc.api.getGroupsInCategory(d.id,function(a){for(var b=0;b<a.length;b++){var c=a[b],d=O(c.group_category_id),e="<tr><td>"+c.name+"</td><td>"+c.id+"</td></tr>";$("#"+d).append(e)}})}})})}}}(),this.mmooc=this.mmooc||{},this.mmooc.dataporten=function(){var a=["email","longterm","openid","profile","userid-feide","groups","gk_kpas"],b="https://bibsys.instructure.com/courses/234?dataportenCallback=1",c="823e54e4-9cb7-438f-b551-d1af9de0c2cd",d="https://kpas.dataporten-api.no",e={scopes:{request:a},response_type:"id_token token"},f=new jso.JSO({providerID:"Dataporten",client_id:c,redirect_uri:b,authorization:"https://auth.dataporten.no/oauth/authorization"});return{getSilentOpts:function(){var a=JSON.parse(JSON.stringify(e));return a.request={prompt:"none"},a},getClient:function(){return f},updateStatus:function(a){var b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];$("#dataportenStatus").html(a),b&&$("#dataportenStatus").append("<span class='loading-gif'></span>")},clearStatus:function(){$("#dataportenStatus").html("")},updateContent:function(a){$("#dataportenContent").html(a)},appendContent:function(a){$("#dataportenContent").append(a)},clearContent:function(){$("#dataportenContent").html(""),$("#dataportenUserInfo").html("")},display:function(){$("#course_home_content").prepend("<div id='dataportenStatus'/><div id='dataportenUserInfo'/><div id='dataportenContent'/><div id='dataportenLoginInfo'/>");var a=this.getSilentOpts();mmooc.dataporten.updateStatus("Sjekker forbindelse til dataporten..."),this.token=f.checkToken(a),this.token?(console.log(this.token.access_token),this.tokenBelongsToLoggedInUser(function(a,b,c){if(a)mmooc.dataporten.validToken();else{var d="Du er logget inn med "+b+" i Canvas og "+c.user.userid;c.user.userid_sec.length&&(d+="/"+c.user.userid_sec[0]),d+=" i dataporten. Du m vre logget inn med samme bruker i de to systemene.",mmooc.dataporten.updateStatus(d,!1),mmooc.dataporten.printLogoutOptions()}})):this.hiddenIframeLogin()},displayUserInfo:function(){mmooc.dataporten.getUserInfo(function(a){var b="Du er logget inn p dataporten som "+a.user.name;$("#dataportenUserInfo").html(b)})},validToken:function(){mmooc.dataporten.displayUserInfo(),mmooc.dataporten.displayGroups(),mmooc.dataporten.printLogoutOptions()},getFeideIdFromDataportenUserInfo:function(a){var b=a.indexOf(":")+1;return a.substr(b)},tokenBelongsToLoggedInUser:function(a){this.getUserInfo(function(b){mmooc.api.getUserProfile(function(c){var d=!1;if(c.login_id==b.user.userid)d=!0;else if(b.user.userid_sec.length){var e=b.user.userid_sec[0],f=mmooc.dataporten.getFeideIdFromDataportenUserInfo(e);c.login_id==f&&(d=!0)}a(d,c.login_id,b)})})},printLogoutOptions:function(){$("#dataportenLoginInfo").html("<div><button class='button' id='dataportenWipeToken'>Logg ut av dataporten</button></div>"),$(document).on("click","#dataportenWipeToken",function(a){mmooc.dataporten.wipeToken(),mmooc.dataporten.clearStatus(),mmooc.dataporten.clearContent(),mmooc.dataporten.printLoginOptions()})},printLoginOptions:function(){var a=mmooc.util.renderTemplateWithData("dataporten",{});$("#dataportenLoginInfo").html(a),$(document).off("click","#dataportenPopupLogin"),$(document).on("click","#dataportenPopupLogin",function(a){mmooc.dataporten.authorizePopup()})},_get:function(a,b){var c=this;$.ajax({url:a,beforeSend:function(a){a.setRequestHeader("Authorization","Bearer "+c.token.access_token)},success:function(a){b(a)},error:function(a,b,d){var e="Det oppstod en feil:"+d;console.log(e),mmooc.dataporten.clearStatus(),c.wipeToken(),c.printLoginOptions()}})},_post:function(a,b,c){var d=this;$.ajax({type:"POST",url:a,beforeSend:function(a){a.setRequestHeader("Authorization","Bearer "+d.token.access_token)},data:b,success:function(a){c(a)},error:function(a,b,c){var d="Det oppstod en feil:"+c;alert(d),console.log(d)}})},getUserInfo:function(a){this._get("https://auth.dataporten.no/userinfo",a)},getGroupCategoriesForCourse:function(a,b){var c=d+"/group_categories.php?course_id="+a;this._get(c,b)},isMemberOf:function(a,b,c){for(var d=!1,e=0;e<c.length;e++)if(c[e].name==a.displayName&&c[e].description==a.id&&c[e].group_category_id==b.id){d=!0;break}return d},addUserToGroup:function(a,b){var c=d+"/addusertogroup.php",e="group="+JSON.stringify(a)+'&unenrollFrom={"unenrollmentIds":'+JSON.stringify(b)+"}";this._post(c,e,function(a){mmooc.dataporten.displayGroups()})},displayOneGroup:function(a,b,c,d,e){var f=mmooc.dataporten.isMemberOf(c,d,e),g={name:c.displayName,description:c.id,membership:c.membership.basic,group_category_id:d.id,course_id:a},h=""+c.id;h=h.replace(/[-&\/\\#,+()$~%.'":*?<>{}]/g,"_");var i=mmooc.util.renderTemplateWithData("dataportenGroups",{member:f,id:h,dataportenGroup:c});mmooc.dataporten.appendContent(i),function(a,b){$(document).off("click","#"+h),$(document).on("click","#"+h,function(c){mmooc.dataporten.clearContent(),mmooc.dataporten.updateStatus("Melder deg inn i gruppe..."),mmooc.dataporten.addUserToGroup(a,b)})}(g,b)},displayGroups:function(){mmooc.dataporten.clearContent(),mmooc.dataporten.updateStatus("Henter grupper fra dataporten..."),this._get("https://groups-api.dataporten.no/groups/me/groups",function(a){mmooc.dataporten.updateStatus("Henter grupper fra Canvas..."),mmooc.api.getUserGroups(function(b){var c=mmooc.api.getCurrentCourseId();mmooc.dataporten.updateStatus("Henter gruppekategorier fra Canvas..."),mmooc.dataporten.getGroupCategoriesForCourse(c,function(d){var e=d.data;mmooc.dataporten.updateStatus("Sjekker din gruppetilhrighet i Canvas..."),mmooc.api.getUsersEnrollmentsForCourse(c,function(c,d){return function(e){for(var f=Array(),g=0;g<e.length;g++)f.push(e[g].id);for(var h=0;h<d.length;h++){var i=d[h];mmooc.dataporten.appendContent("<h1>"+i.name+"</h1>");for(var j=0;j<a.length;j++){var k=a[j];mmooc.dataporten.displayOneGroup(c,f,k,i,b)}}mmooc.dataporten.clearStatus()}}(c,e))})})})},wipeToken:function(){f.wipeTokens()},authorizePopup:function(){var b=this,c={scopes:{request:a},response_type:"id_token token"};f.setLoader(jso.Popup),f.getToken(c).then(function(a){console.log("I got the token: "+a.access_token),b.token=a,b.validToken()}).catch(function(a){console.error("Error from popup loader",a)})},hiddenIframeLogin:function(){var a=this,b=this.getSilentOpts();f.setLoader(jso.IFramePassive),f.getToken(b).then(function(b){console.log("I got the token: ",b),a.token=b,a.validToken()}).catch(function(b){console.log("Error from passive loader",b),mmooc.dataporten.clearStatus(),a.printLoginOptions()})}}}(),this.mmooc=this.mmooc||{},this.mmooc.discussionTopics=function(){return{setDiscussionTopicPubDate:function(a){if(a){var b=mmooc.util.formattedDate(a.posted_at),c=$("<div class='publication-date'>"+b+"</div>");$(c).prependTo("#discussion_topic .discussion-header-right")}},setDiscussionsListUnreadClass:function(){var a=setInterval(function(){$("body.discussions #open-discussions .ig-list .discussion").length&&(clearInterval(a),$("body.discussions #open-discussions .ig-list .discussion").each(function(){-1==$(this).find(".new-items").text().indexOf("0")&&$(this).addClass("unread")}))},100)},insertSearchButton:function(){$(".index_view_filter_form").append('<button class="btn btn-discussion-search">')},printDiscussionUnreadCount:function(a,b){for(var c=mmooc.discussionTopics.getDiscussionItems(a),d=mmooc.api.getCurrentCourseId(),e=0,f=0,g=[],h=0;h<c.length;h++){var i=c[h].content_id;mmooc.api.getDiscussionTopic(d,i,function(a){if(a&&(a.group_category_id?g.push(a):a.unread_count>0&&("coursepage"==b&&mmooc.discussionTopics.printUnreadCountOnIcon(a.unread_count,a.id),e+=a.unread_count)),++f==c.length)if(e>0&&0==g.length){if(mmooc.discussionTopics.printUnreadCountInTab(e),"discussionslist"==b)return}else{if(!(g.length>0))return;mmooc.discussionTopics.printGroupDiscussionUnreadCount(d,g,e,b)}})}},printGroupDiscussionUnreadCount:function(a,b,c,d){if(mmooc.util.isTeacherOrAdmin()){var e={user_id:"self",per_page:999},f=0,g=[];mmooc.api.getEnrollmentsForCourse(a,e,function(e){for(var h=0;h<e.length;h++){var i=e[h].course_section_id;mmooc.api.getSingleSection(i,function(h){g.push(h.name),++f==e.length&&mmooc.api.getGroupsInCourse(a,function(a){var e=0,h=[];f=0;for(var i=0;i<a.length;i++)for(var j=0;j<g.length;j++)if(a[i].name==g[j]){var k=a[i].id;e++,mmooc.api.getGroupDiscussionTopics(k,function(a){for(var g=0;g<a.length;g++)for(var i=0;i<b.length;i++)if(a[g].root_topic_id==b[i].id&&a[g].unread_count>0){var j={rootTopicId:a[g].root_topic_id,unreadCount:a[g].unread_count};h.push(j),c+=a[g].unread_count}if(++f==e&&(mmooc.discussionTopics.printUnreadCountInTab(c),"coursepage"==d||"discussionslist"==d)){for(var k=0,l=[],m=0;m<h.length;m++){for(var n=0;n<h.length;n++)h[m].rootTopicId==h[n].rootTopicId&&(k+=h[n].unreadCount);var o={rootTopicId:h[m].rootTopicId,unreadCount:k};l.push(o),k=0}for(var p=[],q=[],r=0;r<l.length;r++)if(-1==q.indexOf(l[r].rootTopicId)){var o={rootTopicId:l[r].rootTopicId,unreadCount:l[r].unreadCount};p.push(o),q.push(l[r].rootTopicId)}if("coursepage"==d)for(var s=0;s<p.length;s++)mmooc.discussionTopics.printUnreadCountOnIcon(p[s].unreadCount,p[s].rootTopicId);"discussionslist"==d&&mmooc.discussionTopics.printUnreadCountInDiscussionsList(p)}})}})})}})}else mmooc.api.getUserGroups(function(e){0==e.length&&c>0&&mmooc.discussionTopics.printUnreadCountInTab(c);for(var f=0;f<e.length;f++)for(var g=0;g<b.length;g++)if(e[f].course_id==a&&e[f].group_category_id==b[g].group_category_id){groupId=e[f].id,mmooc.api.getGroupDiscussionTopics(groupId,function(a){for(var b=[],e=0;e<a.length;e++)if(a[e].unread_count>0){if("coursepage"==d&&mmooc.discussionTopics.printUnreadCountOnIcon(a[e].unread_count,a[e].root_topic_id),"discussionslist"==d){var f={rootTopicId:a[e].root_topic_id,unreadCount:a[e].unread_count};b.push(f)}c+=a[e].unread_count}c>0&&mmooc.discussionTopics.printUnreadCountInTab(c),"discussionslist"==d&&mmooc.discussionTopics.printUnreadCountInDiscussionsList(b)});break}})},getDiscussionItems:function(a){for(var b=[],c=0;c<a.length;c++)for(var d=0;d<a[c].items.length;d++)"Discussion"==a[c].items[d].type&&b.push(a[c].items[d]);return b},printUnreadCountOnIcon:function(a,b){$(".discussion-unread-tag.discussion-id-"+b).html("<div class='discussion-unread-value discussion-unread-item'>"+a+"</div>")},printUnreadCountInTab:function(a){$(".mmooc-course-tab a").each(function(){"Diskusjoner"==$(this).text()&&$(this).parent().append("<div class='discussion-unread-value discussion-unread-tab'>"+a+"</div>")})},printUnreadCountInDiscussionsList:function(a){var b=setInterval(function(){$("#open-discussions .ig-list .discussion").length&&(clearInterval(b),$("#open-discussions .ig-list .discussion").each(function(){for(var b=0;b<a.length;b++)$(this).attr("data-id")==a[b].rootTopicId&&($(this).find(".new-items").text(a[b].unreadCount),$(this).addClass("unread"))}),mmooc.discussionTopics.showUnreadCountInDiscussionList())},100)},hideUnreadCountInDiscussionList:function(){var a=setInterval(function(){$("#open-discussions .ig-list .discussion").length&&(clearInterval(a),$("#open-discussions .ig-list .discussion").each(function(){$(this).find(".new-items").hide(),$(this).find(".new-items").parent().prepend("<span class='loading-gif loading-unread'></span>")}))},100)},showUnreadCountInDiscussionList:function(){$("#open-discussions .ig-list .discussion .loading-gif").remove(),$("#open-discussions .ig-list .discussion").each(function(){$(this).find(".new-items").show()})}}}(),this.mmooc=this.mmooc||{},this.mmooc.enroll=function(){return{changeEnrollConfirmationButton:function(){var a=$("#enroll_form");a.find(".btn").text("G til mine "+mmooc.i18n.CoursePlural.toLowerCase()),a.find(".btn").attr("href","/courses"),a.find(".btn-primary").hide()},changeEnrollTitle:function(a){$(".ic-Login-confirmation__headline").text(a)},getEnrollInformationElement:function(){return $("#enroll_form > p:first")},getEnrollAction:function(){return $("#enroll_form").attr("action")},changeEnrollInformation:function(a,b){var c=this.getEnrollInformationElement();c.text(c.text().replace(a,b))},hideEnrollInformationPolicy:function(){$(".ic-Self-enrollment-footer__Secondary").hide()},changeEnrollButton:function(){$("#enroll_form").find(".btn").text("Ja takk, jeg vil registrere meg!")},hideEnrollButton:function(){$("#enroll_form").find(".btn").hide()},isAlreadyEnrolled:function(){return confirmEnrollmentElement=this.getEnrollInformationElement(),-1!=confirmEnrollmentElement.text().indexOf("Du er allerede registrert i")},selectRegisterUserCheckbox:function(){setTimeout(function(){$("#selfEnrollmentAuthRegCreate").click()},1e3)},updatePrivacyPolicyLinks:function(){html=mmooc.util.renderTemplateWithData("enrollprivacypolicy",{privacypolicylink:mmooc.settings.privacyPolicyLink}),$("label[for='selfEnrollmentAuthRegLoginAgreeTerms']").html(html)},isSelfEnrollmentPage:function(){return-1!=this.getEnrollInformationElement().text().indexOf("Du registrerer deg i")},changeEnrollPage:function(){if(this.changeEnrollTitle("Pmelding"),this.isAlreadyEnrolled())this.changeEnrollConfirmationButton();else if(this.hideEnrollInformationPolicy(),this.isSelfEnrollmentPage())this.getEnrollInformationElement().text(""),$("#enroll_form > p:nth-child(2)").text("Vennligst fyll inn informasjonen nedenfor for  registrere deg p "+mmooc.settings.platformName),this.selectRegisterUserCheckbox(),this.updatePrivacyPolicyLinks(),this.changeEnrollButton();else{this.hideEnrollButton(),this.changeEnrollInformation("Du registrere deg p ","Vi registrerer deg p "+mmooc.i18n.CourseDefinite.toLowerCase()+" ");var a=this.getEnrollInformationElement();a.html(" <span class='loading-gif'></span>");var b=this.getEnrollAction();mmooc.api.enrollUser(b,function(a){$(".loading-gif").remove(),window.location.href="/search/all_courses"+mmooc.hrefQueryString})}},printAllCoursesContainer:function(){html=mmooc.util.renderTemplateWithData("allcoursescontainer",{courseLabel:mmooc.i18n.CoursePlural.toLowerCase(),allAvailableCoursesIngress:mmooc.i18n.AllAvailableCoursesIngress,linkToMyCourses:mmooc.utilRoot.getLinkToMyCourses(),isAuthenticated:mmooc.util.isAuthenticated()}),document.title="Tilgjengelige "+mmooc.i18n.CoursePlural.toLowerCase(),document.getElementById("content").innerHTML=html},goToAllCourses:function(){$("#mmooc-all-courses-btn").click(function(){var a=mmooc.utilRoot.getLinkToMyCourses();window.location.href=a})},printAllCourses:function(){var a=this;html="<div class='mmooc-loader-wrapper'><span class='loading-gif'></span></div>",$(".mmooc-all-courses-list").append(html),mmooc.api.getAllPublicCourses(function(b){mmooc.api.getEnrolledCourses(function(c){var d=mmooc.enroll.setCourseEnrolledStatus(b,c);allCoursesWithStatusSorted=mmooc.util.sortCourses(d);var e=mmooc.util.getCourseCategories(allCoursesWithStatusSorted),f=mmooc.util.getCoursesCategorized(allCoursesWithStatusSorted,e);$(".mmooc-loader-wrapper").remove();for(var g=0;g<f.length;g++){var h=f[g],i=mmooc.util.filter(h.courses,function(a){return!0===a.enrolled}).length,j=h.courses&&h.courses.length,k=mmooc.util.isAuthenticated(),l=mmooc.i18n.LogInCanvas;k&&(l=mmooc.i18n.CourseRegisterWhenAuthenticated),html=mmooc.util.renderTemplateWithData("allcourseslist",{queryString:mmooc.hrefQueryString,title:h.title,isAuthenticated:k,courses:h.courses,coursesEnrolledAmount:i,coursesAmount:j,coursesAmountText:mmooc.i18n.CoursesAmount(j),courseLabel:mmooc.i18n.Course.toLowerCase(),goToCourse:mmooc.i18n.GoToCourse,courseRegister:l,openCoursesGroupText:mmooc.i18n.OpenCoursesGroup,closeCoursesGroupText:mmooc.i18n.CloseCoursesGroup,YouAreRegisteredToXCoursesText:mmooc.i18n.YouAreRegisteredToXCourses(i),index:g}),$(".mmooc-all-courses-list").append(html)}0==f.length&&(html='<p class="text-center">'+mmooc.i18n.NoCoursesInfo+"</p>",$(".mmooc-all-courses-list").append(html)),mmooc.enroll.insertModalAndOverlay(),mmooc.enroll.setClickHandlers(),$(".mmooc-accordion-header").click(function(a){var b=a.target.getAttribute("index");$("#mmooc-accordion-header-".concat(b)).hasClass("mmooc-accordion-header-active")?$("#mmooc-accordion-header-".concat(b)).toggleClass("mmooc-accordion-header-active"):($(".mmooc-accordion-header-active").removeClass("mmooc-accordion-header-active"),$("#mmooc-accordion-header-".concat(b)).addClass("mmooc-accordion-header-active")),$(".mmooc-tab-head").removeClass("mmooc-tab-head-active"),$(".mmooc-tab-content").removeClass("mmooc-tab-content-active"),$(".mmooc-tabs-mobile-header-active").removeClass("mmooc-tabs-mobile-header-active"),$(".mmooc-tabs-mobile-content-active").removeClass("mmooc-tabs-mobile-content-active"),$(".mmooc-tab-head-0").addClass("mmooc-tab-head-active"),$(".mmooc-tab-content-0").addClass("mmooc-tab-content-active")}),$(".mmooc-tab-head").click(function(a){var b=a.target.getAttribute("index");$(".mmooc-tab-head").removeClass("mmooc-tab-head-active"),$("#mmooc-tab-head-".concat(b)).addClass("mmooc-tab-head-active"),$(".mmooc-tab-content").removeClass("mmooc-tab-content-active"),$("#mmooc-tab-content-".concat(b)).addClass("mmooc-tab-content-active")}),$(".mmooc-tabs-mobile-header").click(function(a){var b=a.target.getAttribute("index");$("#mmooc-tabs-mobile-header-".concat(b)).hasClass("mmooc-tabs-mobile-header-active")?($("#mmooc-tabs-mobile-header-".concat(b)).toggleClass("mmooc-tabs-mobile-header-active"),$("#mmooc-tabs-mobile-content-".concat(b)).toggleClass("mmooc-tabs-mobile-content-active")):($(".mmooc-tabs-mobile-header-active").removeClass("mmooc-tabs-mobile-header-active"),$(".mmooc-tabs-mobile-content-active").removeClass("mmooc-tabs-mobile-content-active"),$("#mmooc-tabs-mobile-header-".concat(b)).addClass("mmooc-tabs-mobile-header-active"),$("#mmooc-tabs-mobile-content-".concat(b)).addClass("mmooc-tabs-mobile-content-active"))}),a.createHashTags(),a.scrollToCourse()})})},createHashTags:function(){$("span").click(function(a){if($(this).filter("[data-name='course']")){var b=$(a.currentTarget).attr("class");window.location.hash=b}}),$("button[data-title]").click(function(a){var b=$(this).siblings().find("span").eq(0).attr("class"),c=b;window.location.hash=c})},scrollToCourse:function(){var a=window.location.hash.split("#");$("span").filter("[data-name='course']").each(function(b,c){var d=$(c).attr("class");a[1]===d&&($(c).closest("section").find("button").eq(0).trigger("click"),window.matchMedia("(max-width: 650px)").matches?$([document.documentElement,document.body]).animate({scrollTop:$(c).find("button").offset().top},500):$([document.documentElement,document.body]).animate({scrollTop:$("."+d).offset().top},500),$(c).find("button").trigger("click"))})},setCourseEnrolledStatus:function(a,b){for(var c=[],d=0;d<a.length;d++){a[d].course.enrolled=!1;for(var e=0;e<b.length;e++)a[d].course.id==b[e].id&&(a[d].course.enrolled=!0);c.push(a[d].course)}return c},insertModalAndOverlay:function(){$("body").append("<div class='mmooc-modal-overlay'></div>"),$("body").append("<div class='mmooc-modal'></div>")},handleEnrollClick:function(a,b){$(".mmooc-modal").html(b),$(".mmooc-modal-overlay").show(),$(".mmooc-modal").show(),$(".mmooc-modal .modal-back").click(function(a){a.preventDefault(),$(".mmooc-modal-overlay").hide(),$(".mmooc-modal").hide()})},setClickHandlers:function(){$(".notenrolled").click(function(a){a.preventDefault();var b=$(this).next().html();mmooc.enroll.handleEnrollClick(a,b)}),$(".all-courses-show-modal").click(function(a){a.preventDefault();var b=$(this).parent().next().html();mmooc.enroll.handleEnrollClick(a,b)}),$(".mmooc-modal-overlay").click(function(a){a.preventDefault(),$(".mmooc-modal-overlay").hide(),$(".mmooc-modal").hide()}),$(document).on("keydown",function(a){27===a.keyCode&&($(".mmooc-modal-overlay").hide(),$(".mmooc-modal").hide())})},populateFilter:function(a){for(var b='<option value="Alle">Alle tilgjengelige '+mmooc.i18n.CoursePlural.toLowerCase()+"</option>",c=0;c<a.length;c++)b+='<option value="'+a[c]+'">'+a[c]+"</option>";$("#filter").append(b)},applyFilter:function(){var a=$("#filter").val();"Alle"==a?($(".mmooc-all-courses-list").removeClass("filter-active"),$(".mmooc-all-courses-list h2").each(function(){$(this).show(),$(this).next().show()})):($(".mmooc-all-courses-list").addClass("filter-active"),$(".mmooc-all-courses-list h2").each(function(){$(this).text()==a?($(this).show(),$(this).next().show()):($(this).hide(),$(this).next().hide())}))}}}(),this.mmooc=this.mmooc||{},this.mmooc.footer=function(){return{addLicenseInFooter:function(){$(".public-license").hide();var a=$("#mmoocLicense"),b=mmooc.util.renderTemplateWithData("footer-license",{});a.html(b)},changeFooter:function(){var a=$("#application.ic-app #wrapper"),b=mmooc.util.renderTemplateWithData("footer",{privacyPolicyLink:mmooc.settings.privacyPolicyLink,homeOrganization:mmooc.settings.homeOrganization,contactPoint:mmooc.settings.contactPoint,about:mmooc.settings.aboutThePlatform});a.append(b)}}}(),mmooc=mmooc||{},mmooc.greeting=function(){function a(){$("#wrapper").addClass("diploma-page")}function b(b){b.find(".alert li > a").size()<=0||(a(),mmooc.api.getModulesForCurrentCourse(function(a){var b={};for(var c in a)b[a[c].id]=a[c].items[0];$(".alert li > a").each(function(){var a=$(this).attr("href"),c=/courses\/\d+\/modules\/(\d+)/.exec(a);c.length>0&&$(this).attr("href",b[c[1]].html_url)})}))}return{enableGreetingButtonIfNecessary:function(){var c=$("#content"),d=c.find(".sikt-diploma-button"),e=c.find(".sikt-diploma-formId"),f=c.find(".sikt-diploma-nameEntryId"),g=c.find(".sikt-diploma-emailEntryId");d.length&&e.length&&f.length&&g.length&&($("body").on("click",".sikt-diploma-button",function(){if(!d.hasClass("btn-done")){$("#info").html(mmooc.util.renderTemplateWithData("waitIcon",{}));var a=e.text(),b=f.text(),c=g.text(),h="https://docs.google.com/forms/d/",i="/formResponse",j=h.concat(a,i);h="entry.";var k=h.concat(b),l=h.concat(c);mmooc.api.getUserProfile(function(a){var b={};b[k]=a.name,b[l]=a.primary_email,$.ajax({url:j,data:b,type:"POST",dataType:"xml",complete:function(b){switch(b.status){case 0:h="Diplom ble sendt til denne eposten:";var c=h.concat(a.primary_email);$("#info").html(c),d.addClass("btn-done");break;default:$("#info").addClass("error"),$("#info").html("En feil oppstod. Ta kontakt med kursansvarlig for &aring; f&aring; hjelp.")}}})})}}),a()),b(c)},enableNewGreetingButtonIfNecessary:function(){var c=$("#content"),d=c.find(".new-sikt-diploma-button"),e=c.find(".new-sikt-diploma-scriptId");d.length&&e.length&&($("body").on("click",".new-sikt-diploma-button",function(){if(!d.hasClass("btn-done")){$("#info").html(mmooc.util.renderTemplateWithData("waitIcon",{}));var a=e.text();mmooc.api.getUserProfile(function(b){var c={};c.Navn=b.name,c.Epost=b.primary_email,$.ajax({url:a,data:c,type:"POST",dataType:"json",beforeSend:function(){console.log("Loading")},error:function(a,b,c){console.log(a),console.log(b),console.log(c);var d="Diplom ble ikke sendt. Flgende gikk galt: "+a+b+c;$("#info").html(d),$(".new-sikt-diploma-button").addClass("btn-done")},success:function(a){if(console.log(a),"success"==a.result){var c="Diplom ble sendt til "+b.name+" med denne eposten: "+b.primary_email;$("#info").html(c)}else{var c="Diplom kunne ikke sendes fordi: "+a.result;$("#info").html(c)}$(".new-sikt-diploma-button").addClass("btn-done")},complete:function(){console.log("Finished all tasks")}})})}}),a()),b(c)}}}(),this.mmooc=this.mmooc||{},this.mmooc.groups=function(){function a(a,b){/\/groups\/\d+$/.test(a)&&(b.preventDefault(),location.href=a+"/discussion_topics")}return{interceptLinksToGroupPage:function(){$("#content").on("click",".student-group-title a",function(b){a($(this).attr("href"),b)}),$("#right-side").on("click",".group_list a",function(b){a($(this).attr("href"),b)}),$("#content-wrapper").on("click",".visit-group",function(b){a($(this).attr("href"),b)})},interceptLinksToTeacherGroupPage:function(){$("#left-side").on("click",".ui-menu-item a",function(b){a($(this).attr("href"),b)})},
showGroupHeader:function(a,b){mmooc.api.getGroupMembers(a,function(c){var d=mmooc.util.renderTemplateWithData("groupheader",{groupId:a,courseId:b,members:c});document.getElementById("content-wrapper").insertAdjacentHTML("afterbegin",d),$("body").addClass("group-header")})},changeGroupListURLs:function(a){if(/\/groups(\/)?$/.test(a)||/(\/groups(\??([A-Za-z0-9\=\&]{0,})))$/.test(a)){return $(".context_list li a").each(function(a){this.setAttribute("href",this.getAttribute("href")+"/discussion_topics")}),!0}return!1},moveSequenceLinks:function(){var a=$("#module_sequence_footer"),b=$("#discussion_container");a.addClass("module-sequence-top"),a.insertBefore(b)}}}(),this.mmooc=this.mmooc||{},this.mmooc.login=function(){return{handleLoginButtonClick:function(){$(".mmooc-header__login-button").click(function(){if(!$(".login-box").length){var a=mmooc.util.renderTemplateWithData("loginPopup",{logInText:mmooc.i18n.LogInPopup,logInCanvasText:mmooc.i18n.LogInCanvas});document.getElementById("wrapper").insertAdjacentHTML("afterend",a),$("#application").before('<div class="overlay"></div>'),$(".login-box__close, .overlay").click(function(){$(".login-box, .overlay").remove()})}})}}}(),this.mmooc=this.mmooc||{},this.mmooc.menu=function(){function a(a,b,c,e){function f(a,b,c,d){var e=a.name;null==c&&(c=a.name,e="");var f=mmooc.util.renderTemplateWithData("coursemenu",{course:a,menuItems:d,selectedMenuItem:b,title:c,subtitle:e});document.getElementById("header").insertAdjacentHTML("afterend",f)}var g=[],h=a.id;if(!e){g[g.length]={title:"Forside",url:"/courses/"+h},g[g.length]={title:"Kunngjringer",url:"/courses/"+h+"/announcements"};var i="/courses/"+h+"/groups";mmooc.settings.useDataportenGroups&&(i="/courses/"+h+"?dataportengroups=1"),mmooc.settings.displayGroupsTab&&(g[g.length]={title:"Grupper",url:i}),mmooc.settings.displayDiscussionsTab&&(g[g.length]={title:"Diskusjoner",url:"/courses/"+h+"/discussion_topics"});var j=mmooc.util.getToolsInLeftMenu(b);if(1==j.toolList.length){var k=j.toolList[0];k.activeTool&&(b=k.title),g[g.length]={title:k.title,url:k.href}}else g[g.length]={title:j.activeToolName,toolList:j.toolList,url:j.activeToolPath};mmooc.util.isTeacherOrAdmin()&&(g[g.length]={title:"Faglrer",url:"/courses/"+h+"/?mmpf"});var l=mmooc.menu.extractBadgesLinkFromPage();l.url?(g[g.length]=l,f(a,b,c,g)):mmooc.settings.useCanvaBadge?mmooc.menu.setCanvaBadgesLink(a,function(d){d.url&&(g[g.length]=d),f(a,b,c,g)}):f(a,b,c,g),$("#mmooc-menu-item-verktoy").click(function(a){d("#mmooc-menu-item-verktoy","#mmooc-verktoy-list",400)})}}function b(){var a=document.createElement("style");return a.appendChild(document.createTextNode("")),document.head.appendChild(a),a.sheet}function c(a,b){var c=document.getElementById("menu");c&&c.insertAdjacentHTML("afterbegin",'<li class="menu-item custom-item ic-app-header__menu-list-item"><a href="'+b+'" class="menu-item-no-drop ic-app-header__menu-list-link">'+a+"</a></li>")}function d(a,b,c){"none"!=$(b).css("display")?($(b).slideUp(c),$(a).off("mouseleave")):($(b).slideDown(c),$(a).mouseleave(function(){$(b).slideUp(c)}))}var e=b();return{listModuleItems:function(){mmooc.api.getCurrentModule(function(a){var b=mmooc.api.getCurrentCourseId(),c="";mmooc.util.isActiveCourseRoleBased()&&mmooc.util.isPrincipal()?c=mmooc.util.renderTemplateWithData("moduleitemsprincipal",{backToCoursePage:mmooc.i18n.BackToCoursePage,module:a,courseId:b,course:mmooc.util.course}):(c=mmooc.util.renderTemplateWithData("moduleitems",{backToCoursePage:mmooc.i18n.BackToCoursePage,module:a,courseId:b,course:mmooc.util.course}),mmooc.util.isActiveCourseRoleBased()&&mmooc.menu.updatePrevAndNextButtons(b,a)),document.getElementById("left-side")&&document.getElementById("left-side").insertAdjacentHTML("afterbegin",c),$(".mmooc-reveal-trigger").click(function(a){var b=$(this),c=b.attr("href"),d=b.find("i");return"none"!=$(c).css("display")?($(c).slideUp(400),"mmooc-module-item-active-header"==b.attr("id")&&b.attr("class","active mmooc-reveal-trigger"),d.attr("class","icon-mini-arrow-right")):($(c).slideDown(400),"mmooc-module-item-active-header"==b.attr("id")&&b.attr("class","mmooc-reveal-trigger"),d.attr("class","icon-mini-arrow-down")),!1})})},handlePrevModuleItem:function(a,b){if(b&&b.items.length&&b.items[0].prev){var c=b.items[0].prev;if(c.indent)id=c.id,mmooc.api.getModuleItemSequence(a,id,mmooc.menu.handlePrevModuleItem);else{var d=$(".module-sequence-footer-button--previous");d.attr("href",c.html_url),mmooc.menu.updateButtonTooltip(d,c),d.show()}}},handleNextModuleItem:function(a,b){if(b&&b.items.length&&b.items[0].next){var c=b.items[0].next;if(c.indent)id=c.id,mmooc.api.getModuleItemSequence(a,id,mmooc.menu.handleNextModuleItem);else{var d=$(".module-sequence-footer-button--next");$(".module-sequence-footer-button--next a").attr("href",c.html_url),mmooc.menu.updateButtonTooltip(d,c),d.show()}}},updateButtonTooltip:function(a,b){var c=a.attr("data-html-tooltip-title");if(c){var d=c.replace(/<\/i>.*$/,"</i>"+b.title);a.attr("data-html-tooltip-title",d)}},updatePrevAndNextButtons:function(a,b){for(var c="",d="",e=null,f=null,g=!1,h=!1,i=!1,j=0;j<b.items.length;j++){var k=b.items[j];if(!k.indent&&"SubHeader"!=k.type)if(e||(e=k),f=k,k.isCurrent)i=!0;else if(i){if(!h){d=k,h=!0;break}}else c=k,g=!0}var l=$(".module-sequence-footer-button--previous"),m=$(".module-sequence-footer-button--next");if(g)l.attr("href",c.html_url),mmooc.menu.updateButtonTooltip(l,c);else{l.hide();var n=e.id;mmooc.api.getModuleItemSequence(a,n,mmooc.menu.handlePrevModuleItem)}if(h){$(".module-sequence-footer-button--next a").attr("href",d.html_url),mmooc.menu.updateButtonTooltip(m,d)}else{m.hide();var n=f.id;mmooc.api.getModuleItemSequence(a,n,mmooc.menu.handleNextModuleItem)}},showLeftMenu:function(){e.insertRule("body.with-left-side #main { margin-left: 305px !important }",e.cssRules.length),e.insertRule(".with-left-side #left-side { display: block !important }",e.cssRules.length),$("body").addClass("useFullWidth")},renderLeftHeaderMenu:function(){if(mmooc.util.isAuthenticated()){c("Kalender","/calendar"+mmooc.hrefQueryString),0==mmooc.settings.removeGlobalGradesLink&&c("Karakterer","/grades"+mmooc.hrefQueryString),0==mmooc.settings.removeGroupsLink&&c("Grupper","/groups"+mmooc.hrefQueryString);var a=mmooc.utilRoot.getLinkToMyCourses();c(mmooc.i18n.CoursePlural,a),mmooc.util.isTeacherOrAdmin()&&(this.showLeftMenu(),$("#section-tabs-header").show(),$("nav[aria-label='context']").show(),$("nav[aria-label='Emner-navigasjonsmeny']").show(),$("#edit_discussions_settings").show(),$("#availability_options").show(),$("#group_category_options").show(),$("#editor_tabs").show(),e.insertRule("body.pages .header-bar-outer-container { display: block }",e.cssRules.length),e.insertRule("#discussion-managebar { display: block }",e.cssRules.length))}var b=mmooc.api.getRoles();null!=b&&-1!=b.indexOf("admin")&&(c("Admin","/accounts"+mmooc.hrefQueryString),$(".add_access_token_link").show(),$("body.profile_settings").find("#content > table, #content > h2, #content > p").show())},renderUnauthenticatedMenu:function(){var a=this;if(!mmooc.util.isAuthenticated()){$("#global_nav_login_link").hide();var b=mmooc.util.getLinkToAvailableCourses();this.alterHomeLink(b);var c=mmooc.util.renderTemplateWithData("noLoggedInHeader",{logInText:mmooc.i18n.LogIn});$("#menu").append(c),$(".ic-app-header__main-navigation").append(c),this.unAuthenticatedMobileMenu(),$(window).on("resize",function(){a.unAuthenticatedMobileMenu()}),mmooc.login.handleLoginButtonClick()}},unAuthenticatedMobileMenu:function(){window.matchMedia("(max-width: 768px)").matches?($("#header").addClass("ic-app-header--mobile"),$(".mmooc-header").addClass("mmooc-header--mobile")):($(".mmooc-header").removeClass("mmooc-header--mobile"),$("#header").removeClass("ic-app-header--mobile"))},hideRightMenu:function(){$("#right-side").hide(),$("body").removeClass("with-right-side")},showMobileTabs:function(){var a=document.querySelector(".selected");a&&a.insertAdjacentHTML("beforeend",'<div class="tabs-hamburger"></div>'),$(".tabs-hamburger").click(function(a){var b=$(".mmooc-course-tab").filter(".selected"),c=$('.mmooc-course-tabs li:not(".selected")'),d=$(".mmooc-course-tab");"none"!=$(d).css("display")?($(c).slideUp(100),b.insertBefore(".mmooc-course-tab:first-of-type"),$(c).show()):$(c).show(),b.insertBefore(".mmooc-course-tab:first-of-type")}),$(window).on("resize",function(a){var b=window.matchMedia("(max-width: 1050px)"),c=$('.mmooc-course-tabs li:not(".selected")'),d=$(".tabs-hamburger");b.matches?$(d).css("display","block"):$(d).css("display","none"),b.matches?c.css("display","none"):c.css("display","flex")})},hideSectionTabsHeader:function(){$("#section-tabs-header-subtitle").hide()},showHamburger:function(){if(mmooc.util.isAuthenticated()){var a=document.querySelector(".ic-app-header__main-navigation");a&&a.insertAdjacentHTML("afterbegin",'<div class="menu-mobile"></div>')}},showMobileMenu:function(){mmooc.util.isAuthenticated&&($(".menu-mobile").click(function(a){var b=$("#menu"),c=100;"none"!=b.css("display")?b.slideUp(c):b.slideDown(c)}),$(window).on("resize",function(a){window.matchMedia("(min-width: 1051px)").matches?$("#menu").css("display","flex"):$("#menu").css("display","none")}))},showUserMenu:function(){var a=document.getElementById("menu");if(null!=a&&mmooc.util.isAuthenticated()){var b=mmooc.util.renderTemplateWithData("usermenu",{user:mmooc.api.getUser(),queryString:mmooc.hrefQueryString});a.insertAdjacentHTML("afterend",b),$("#mmooc-menu-item-varsler").click(function(a){d("#mmooc-menu-item-varsler","#mmooc-activity-stream",400)}),$("#mmooc-menu-item-profile-settings").click(function(a){d("#mmooc-menu-item-profile-settings","#mmooc-profile-settings",400)});var c=mmooc.utilRoot.getLinkToMyCourses();this.alterHomeLink(c),mmooc.api.getUnreadMessageSize(function(a){var b=$("#mmooc-unread-messages-count");"0"!=a.unread_count?(b.html(a.unread_count),b.show()):b.hide()}),this.updateNotificationsForUser()}},setMenuActiveLink:function(){$(".ic-app-header__menu-list li a ").each(function(a,b){window.location.pathname.includes($(b).attr("href"))&&$(b).addClass("active")})},updateNotificationsForUser:function(){mmooc.api.getActivityStreamForUser(function(a){for(var b=0,c=0;c<a.length;c++)mmooc.menu.checkReadStateFor(a[c])&&b++,a[c].created_at=mmooc.util.formattedDate(a[c].created_at);var d=$("#mmooc-notification-count");0==b?d.hide():(d.html(b),d.show()),document.getElementById("mmooc-activity-stream").innerHTML=mmooc.util.renderTemplateWithData("activitystream",{activities:a});var e=$("#mmooc-notifications").find("li"),f=$("#mmooc-notifications-showall");e.size()>10?(e.slice(10).addClass("hidden"),f.click(function(){e.removeClass("hidden"),f.hide()})):f.hide()})},showCourseMenu:function(b,c,d,e){e=e||!1,$("body").addClass("with-course-menu"),mmooc.api.getCourse(b,function(b){a(b,c,d,e),mmooc.menu.showMobileTabs()})},showBackButton:function(a,b){var c=mmooc.util.renderTemplateWithData("backbutton",{url:a,title:b});document.getElementById("content-wrapper").insertAdjacentHTML("afterbegin",c)},showGroupHeader:function(){var a=mmooc.api.getCurrentGroupId(),b=mmooc.util.renderTemplateWithData("backbutton",{groupId:a});document.getElementById("content-wrapper").insertAdjacentHTML("afterbegin",b)},showDiscussionGroupMenu:function(){function a(a,b){return-1==a.indexOf(b)|""==b?"":a.split(b)[0]}function b(b){function c(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.name==b)return d.id}return null}function d(){$("#mmooc-get-teachers-help").addClass("btn-failure"),$("#mmooc-get-teachers-help").html("Tilkall veileder feilet")}function e(){var b=mmooc.api.getCurrentCourseId();mmooc.api.getUserGroupsForCourse(b,function(b){if(0==b.length||b.length>1)d(),alert("Det er noe galt med gruppeoppsettet ditt.\nDu er medlem i "+b.length+" grupper.");else{var e=b[0],f=e.name,g=e.course_id;mmooc.api.getSectionRecipients(g,function(b){return function(e){var g=c(e,f);if(null==g)d(),alert("Det er noe galt med gruppeoppsettet ditt.\nFant ikke seksjonen til "+f);else{var h=g+"_teachers",i=f+" "+mmooc.i18n.GroupGetInTouchSubject,j=window.location.href,k=$(".discussion-title").text(),l=a(k," - "),m="\n",n=mmooc.i18n.WeHaveAQuestionToTeacherInTheDiscussion+' "'+l+'":'+m+j;$("#mmooc-get-teachers-help").html("Sender melding..."),mmooc.api.postMessageToConversation(b,h,i,n,function(a){console.log(a),$("#mmooc-get-teachers-help").addClass("btn-done"),$("#mmooc-get-teachers-help").html("Veileder tilkalt")},function(a){d(),alert("Tilkall veileder feilet. Gruppen har ingen veileder."),console.log(a)})}}}(g))}})}function f(){$("#mmooc-get-teachers-help").click(function(){$("#mmooc-get-teachers-help").off("click"),$("#mmooc-get-teachers-help").html("Finner veileder..."),e()})}var g=mmooc.util.renderTemplateWithData("groupdiscussionGetHelpFromTeacher",{hoverOverText:mmooc.i18n.CallForInstructorHoverOverText});$("#discussion-managebar > div > div > div.pull-right").append(g),f()}var c=mmooc.api.getCurrentGroupId();null!=c&&mmooc.api.getGroup(c,function(a){var c=mmooc.util.getPageTitleAfterColon();mmooc.menu.showCourseMenu(a.course_id,"Grupper",c,!0),mmooc.settings.displayCallForAssistanceButtonInGroupDisccussions&&b(a)})},checkReadStateFor:function(a){return!1===a.read_state},extractBadgesLinkFromPage:function(){var a=null,b=null,c=$('li.section:contains("BadgeSafe")');return c&&(b=c.find("a")),b&&(a=b.attr("href")),{title:mmooc.i18n.Badgesafe,url:a}},setCanvaBadgesLink:function(a,b){var c=mmooc.api.getUser().id,d=location.host,e=mmooc.settings.CanvaBadgeProtocolAndHost+"/api/v1/badges/public/"+c+"/"+encodeURIComponent(d)+".json";$.ajax({type:"GET",crossDomain:!0,dataType:"jsonp",url:e,timeout:5e3,success:function(c){$.isFunction(b)&&b({title:mmooc.i18n.Badgesafe,url:"/courses/"+a.id+"?allcanvabadges"})},error:function(a){$.isFunction(b)&&b({title:mmooc.i18n.Badgesafe,url:void 0})}})},injectGroupsPage:function(){$("#courses_menu_item").after('<li class="menu-item"><a href="/groups" class="menu-item-no-drop">Grupper</a></li>')},alterHomeLink:function(a){$("#header-logo").attr("href",a),$("a.ic-app-header__logomark").attr("href",a),$("a.ic-app-header__logomark").attr("src","https://kompetanseudirno.azureedge.net/udirdesign/Ny-Udir-Logo-RGB-Neg.png"),$(".ic-app-header__logomark-container").detach().prependTo(".ic-app-header__main-navigation")},alterCourseLink:function(){}}}(),this.mmooc=this.mmooc||{},this.mmooc.pages=function(){function a(a,b,c){b.is(":checked")?(c.html("Marker som ulest"),a.addClass("is-done")):(c.html("Marker som lest"),a.removeClass("is-done"))}function b(){var a="after",b=$("#wiki_page_show > div.header-bar-outer-container > div > div.header-bar.flex-container > div.header-bar-right.header-right-flex");return b.length||(b=$("#quiz_show > div.header-bar > div")),b.length||(b=$("#assignment_show > div.assignment-title > div.assignment-buttons")),b.length||(b=$("#discussion-managebar > div > div > div.pull-right")),b.length||(b=$("#content"),a="before"),{headerBar:b,position:a}}function c(a){var d=b();d.headerBar.length?"after"==d.position?d.headerBar.append(a):d.headerBar.before(a):setTimeout(function(){c(a)},500)}return{modifyMarkAsDoneButton:function(){$("body").bind("wiki-page-rendered",function(){var b=$("#mark-as-done-container");b.appendTo("#content .usercontent");var c=b.find("input"),d=b.find("label");c.change(function(){a(b,c,d)}),a(b,c,d),b.show()})},addGotoModuleButton:function(){var a=mmooc.api.getCurrentModuleItemId();c("<a class='btn' href='/courses/"+mmooc.api.getCurrentCourseId()+"/modules#context_module_item_"+a+"'>G til modul</a>")},addStudentViewButton:function(){var a=(mmooc.api.getCurrentCourseId(),'<a class="btn student_view_button" ');a+='rel="nofollow" data-method="post" href="/courses/'+ENV.COURSE_ID+'/student_view">',a+='<i class="icon-student-view"></i>Studentvisning</a>',c(a)},updateSidebarWhenMarkedAsDone:function(){$("body").on("click","#mark-as-done-checkbox",function(){var a=$("ul.mmooc-module-items .active span:last-child");a.hasClass("done")?a.removeClass("done"):a.addClass("done");var b=a.find(".mmooc-icon-principal-tag");b&&b.hasClass("done")?(b.removeClass("done"),b.addClass("not_done")):(b.removeClass("not_done"),b.addClass("done"));var c=$("#mmooc-module-item-active-header"),d=c.attr("href"),e=$(d),f=e.find("li").length,g=e.find("li").find(".done").length,h=c.find("span:last-child");g<f?h.removeClass("done"):h.addClass("done")})},updateSidebarWhenContributedToDiscussion:function(){$("#discussion_container").on("click",".btn-primary",function(){var a=$("ul.mmooc-module-items .active span:last-child");a.hasClass("done")||a.addClass("done")})},duplicateMarkedAsDoneButton:function(){var a=setInterval(function(){$(".module-sequence-footer-content").length&&(clearInterval(a),$("#mark-as-done-checkbox").clone().prependTo(".module-sequence-footer-content"),$(document).on("click","#mark-as-done-checkbox",function(){var a=$(this);setTimeout(function(){"module-sequence-footer-content"==a.parent().attr("class")?($(".header-bar-right #mark-as-done-checkbox").remove(),a.clone().prependTo(".header-bar-right")):($(".module-sequence-footer-content #mark-as-done-checkbox").remove(),a.clone().prependTo(".module-sequence-footer-content"))},800)}))},100)},showInformationPane:function(a,b,c){var d=mmooc.util.renderTemplateWithData("informationpane",{observer:a,pfdk:b,unmaintainedSince:c});document.getElementById("wrapper").insertAdjacentHTML("afterend",d)},showBackLinkIfNecessary:function(){if($("#left-side").is(":hidden")){var a=mmooc.util.renderTemplateWithData("navigateToPreviousPage",{linkText:mmooc.i18n.LinkBack});$(a).prependTo($("#content"))}},redesignAssignmentPage:function(){function a(){var a=!1,b=mmooc.i18n.PeerReviewer;return $("#right-side .details .content > h4:contains('"+b.toLowerCase()+"')").length&&(a=!0),a}function b(){function a(a){var b="";return"icon-warning"==a?b="assigned":"icon-check"==a&&(b="completed"),b}var b,c,d=$("#right-side .details .content > h4 + ul.unstyled_list a"),e=[];return d.each(function(d){c=$(this).find("i").attr("class"),b=a(c),e[e.length]={workflow_state:b,assessor:{display_name:$(this).text(),mmooc_url:$(this).attr("href")}}}),console.log("Custom peerReview array:"),console.log(e),e}function c(a,b){var c=mmooc.util.renderTemplateWithData("assignmentPageWithPeerReviewRightSide",{submission:a,peerReview:b});$(c).insertBefore("body.assignments #application.ic-app #right-side .details")}function d(a,b){if($("#right-side .details .content > h4 + ul.unstyled_list a.warning").length){var c=mmooc.util.renderTemplateWithData("assignmentPageWithPeerReviewWarning",{submission:a,peerReview:b});$("body.assignments #application.ic-app ul.student-assignment-overview").after(c)}}function e(){$("#right-side .details").show()}var f=mmooc.api.getCurrentCourseId(),g=mmooc.api.getCurrentTypeAndContentId().contentId,h=mmooc.api.getUser().id;a()?mmooc.api.getSingleSubmissionForUser(f,g,h,function(a){console.log("submission"),console.log(a);var e=b();c(a,e),d(a,e)}):(e(),$("#submission_comment.submission_comment_textarea").show())},redesignPeerReviewAndOwnSubmissionDetailsPage:function(){function a(){var a=!0;return ENV.SUBMISSION&&ENV.SUBMISSION.user_id&&(a=!1),a}function b(){var a,b=mmooc.api.getUser().id;return o?a=mmooc.i18n.PeerReview:(a=mmooc.i18n.DetailsAboutYourDelivery,b!=q&&(a=mmooc.i18n.DetailsAboutDelivery)),a}function c(){var a=!1,b=mmooc.api.getUser().id;return o||b==q||(a=!0),a}function d(){var a=!1;return"none"==$(".assessment_request_incomplete_message").css("display")&&(a=!0),a}function e(){var a=!1;return $(".assess_submission_link").length&&(a=!0),a}function f(){$(document).on("click",".open-assessment-dialog-button",function(a){a.preventDefault(),$("#rubric_holder").show()})}function g(a){function d(a,d,e){var f=b(),g=c(),h=!0,i={assignment:a,submission:d,peerReview:e,submissionTitle:f,isPeerReview:o,isPeerReviewFinished:h,isTeacherViewingStudentsSubmission:g},j=mmooc.util.renderTemplateWithData("assignmentSubmission",i);$(".mmooc-assignment-submission, .mmooc-assignment-submission-answers").remove(),$("body.assignments #application.ic-app #content .submission_details").after(j)}console.log("_updateDomAfterSaveRubricButtonClick is running"),mmooc.api.getSingleAssignment(l,m,function(a){mmooc.api.getSingleSubmissionForUser(l,m,q,function(b){var c=b.id;mmooc.api.getPeerReviewsForSubmissionId(l,m,c,function(c){j(a,b,c),d(a,b,c)})})})}function h(){var a=!1,b=mmooc.i18n.PeerReviewer;return $("body.assignments #application.ic-app #content .submission_details h2.submission_header:contains('"+b+"')").length&&(a=!0),a}function i(){var a=!1,b=mmooc.i18n.Delivery;return $("body.assignments #application.ic-app #content .submission_details h2.submission_header:contains('"+b+"')").length&&(a=!0),a}function j(a,b,c){console.log("submission_user_id:"+q),console.log("Assignment:"),console.log(a),console.log("Submission:"),console.log(b),console.log("peerReview for submission id"),console.log(c)}function k(a,e,f){var g=b(),h=c(),i=d(),j={assignment:a,submission:e,peerReview:f,submissionTitle:g,isPeerReview:o,isPeerReviewFinished:i,isTeacherViewingStudentsSubmission:h},k=mmooc.util.renderTemplateWithData("assignmentSubmission",j);$("body.assignments #application.ic-app #content .submission_details").after(k)}if(a())return!1;var l=mmooc.api.getCurrentCourseId(),m=mmooc.api.getCurrentTypeAndContentId().contentId,n=e(),o=h(),p=i(),q=ENV.SUBMISSION.user_id;n?(o||p)&&mmooc.api.getSingleAssignment(l,m,function(a){mmooc.api.getSingleSubmissionForUser(l,m,q,function(b){var c=b.id;mmooc.api.getPeerReviewsForSubmissionId(l,m,c,function(c){j(a,b,c),k(a,b,c),f(),$(document).on("click","button.save_rubric_button",g)})})}):($(".submission-details-header.submission_details").show(),$(".submission-details-comments").show(),$("#submission_comment.submission_comment_textarea").show())}}}(),this.mmooc=this.mmooc||{},this.mmooc.powerFunctions=function(){var a=void 0;return _render=function(b,c,d){var e=mmooc.util.renderTemplateWithData("powerfunctions/head",{heading:c})+mmooc.util.renderTemplateWithData(b,d)+mmooc.util.renderTemplateWithData("powerfunctions/tail",{});document.getElementById(a).innerHTML=e},AssignPeerReviewsForGroup=function(){return _renderView=function(){mmooc.api.getCoursesForUser(function(a){_render("powerfunctions/peer-review","Assign peer reviews by group",{courses:a});var b=[];$("#mmpf-course-select").change(function(){var a=$("#mmpf-course-select option:selected").val();mmooc.api.getGroupCategoriesForCourse(a,function(a){$(".step-2").css("display","list-item"),$(".step-3").css("display","none"),$(".step-4").css("display","none");var b="".concat(b,"<option value=''>Choose a group set</option>");a.forEach(function(a){b="".concat(b,"<option value='").concat(a.id,"'>").concat(a.name,"</option>")}),$("#mmpf-category-select").html(b),$(".peer-review-list").html(""),$(".assignment-info").html("")})}),$("#mmpf-category-select").change(function(){var a=$("#mmpf-category-select option:selected").val();mmooc.api.getGroupsInCategory(a,function(a){$(".step-3").css("display","list-item"),$(".step-4").css("display","none");var b="".concat(b,"<option value='' disabled>Choose groups</option>");a.forEach(function(a){return b="".concat(b,'<option value="').concat(a.id,'">').concat(a.name,"</option>")}),$("#mmpf-group-select").html(b),$(".peer-review-list").html(""),$(".assignment-info").html("")})}),$("#mmpf-group-select").change(function(){var a=$("#mmpf-course-select option:selected").val();mmooc.api.getAssignmentsForCourse(a,function(a){b=[],a.forEach(function(a){a.peer_reviews&&b.push(a)});var c="<option value=''>Choose an assignment</option>";b.forEach(function(a){return c="".concat(c,'<option value="').concat(a.id,'">').concat(a.name,"</option>")}),$("#mmpf-assignment-select").html(c),$(".peer-review-list").html(""),$(".assignment-info").html(""),$(".step-4").css("display","list-item")})}),$("#mmpf-assignment-select").change(function(){for(var a=$("#mmpf-assignment-select option:selected").val(),c=0;c<b.length;c++)if(b[c].id==a)var d=b[c];var e=new Date(d.due_at);if(void 0!==d.peer_reviews_assign_at){var f=new Date(d.peer_reviews_assign_at);f="0".concat(f.getDate().slice(-2),".0").concat(f.getMonth().slice(-2),".").concat(f.getFullYear())}else peerReviewDue="Ikke satt";e="0".concat(e.getDate().slice(-2),".0").concat(e.getMonth().slice(-2),".").concat(e.getFullYear());var g="<h3>".concat(d.name,"</h3><p><span class='bold'>Innleveringsfrist: </span>").concat(e,"<br>\n\t\t\t\t\t\t<span class='bold'>Hverandrevurderingsfrist: </span>").concat(peerReviewDue,"</p>");$(".assignment-info").html(g);var h=[];$("#mmpf-group-select option:selected").each(function(){h.push(_this6)}),$(".peer-review-list").html(""),_listPeerReviewsForGroup(h,a),_showInput()})})},_listPeerReviewsForGroup=function(a,b){$(".peer-review-list").html(""),$(".progress-info").html("<p>Laster hverandrevurderinger... (Kan ta opptil 1 minutt)</p>");var c=$("#mmpf-course-select option:selected").val(),d="",e=[],f=0,g=0,h=!1,i=[],j=[],k=[],l=[];mmooc.api.getPeerReviewsForAssignment(c,b,function(m){for(var n=0;n<a.length;n++)mmooc.api.getGroupMembers(a[n].value,function(b){i.push(b),g++,$(".progress-info").html("Laster grupper"),$("#progress").show();var c=100/a.length*g+"%";if($("#bar").width(c),g==a.length){for(var d=[],e=0;e<a.length;e++)for(var f=0;f<i.length;f++)if(a[e].value==i[f][0].group_id){d.push(i[f]);break}_findSubmissionsForGroups(d)}});_findSubmissionsForGroups=function(a){var d=0;g=0;for(var e=0;e<a.length;e++)for(var f=0;f<a[e].length;f++)_readOnlyError("totalMembers"),d++;for(var h=0;h<a.length;h++)for(var i=0;i<a[h].length;i++)mmooc.api.getSingleSubmissionForUser(c,b,a[h][i].id,function(b){if($(".progress-info").html("Laster besvarelser"),"submitted"!=b.workflow_state&&"graded"!=b.workflow_state||j.push(b),g++,width=100/d*g+"%",$("#bar").width(width),g==d)for(var c=0;c<a.length;c++)_printSingleGroup(a[c],j)})},_printSingleGroup=function(g,n){e=[],h=!1,f=0;var o;g.forEach(function(a){return l[a.id]=0});for(var p=0;p<a.length;p++)a[p].value==g[0].group_id&&(o=a[p].text);d="<h3>".concat(o,"</h3><ul>");for(var q=0;q<m.length;q++)for(var r=0;r<g.length;r++){for(var s=0;s<e.length;s++)e[s]===m[q]&&(h=!0);m[q].assessor_id!=g[r].id||h||(e[f]=m[q],f++),h=!1}h=!1;for(var t=0;t<g.length;t++){var u=0;if(f=0,n){for(var v=0;v<n.length;v++)if(n[v].user_id==g[t].id){d="".concat(d,"<li><a href='/courses/").concat(c,"/assignments/").concat(b,"/submissions/").concat(g[t].id,"' target='_blank'>").concat(g[t].name,"</a></li><ul>"),h=!0;break}h||(d="".concat(d,"<li>").concat(g[t].name,"<span class='no-submission'>Ikke levert besvarelse</span></li><ul>"))}else d="".concat(d,"<li>").concat(g[t].name,"</li><ul>");for(var w=0;w<e.length;w++)g[t].id==e[w].assessor_id&&(u++,l[e[w].user.id]++,d="completed"==e[w].workflow_state?"".concat(d,"<li>\n\t\t\t\t\t\t\t\t\t\t<a href='/courses/").concat(c,"/assignments/").concat(b,"/submissions/").concat(e[w].user.id,"' target='_blank'>\n\t\t\t\t\t\t\t\t\t\t").concat(e[w].user.display_name,"</a><span style='color:green;'>Fullfrt</span></li>"):"".concat(d,"<li>\n\t\t\t\t\t\t\t\t\t\t<a href='/courses/").concat(c,"/assignments/").concat(b,"/submissions/").concat(e[w].user.id,"' target='_blank'>\n\t\t\t\t\t\t\t\t\t\t").concat(e[w].user.display_name,"</a><span style='color:red;'>Ikke fullfrt</span></li>"),f++);d="".concat(d,"</ul>"),0==f&&(d="".concat(d,"<div>Ingen tildelt</div>")),h=!1,k[g[t].id]=u}$("#progress").hide(),$(".peer-review-list").append("".concat(d,"</ul>")),$(".progress-info").html(""),$(".input-wrapper").show(),$(".btn-create-pr").unbind().click(function(){var d=$(".number-of-reviews").val();!_isNormalInteger(d)||d<1?alert("Antall gjennomganger m vre et positivt heltall"):($(".input-wrapper").hide(),_createPeerReviewsForGroups(c,b,d,j,i,a,e,k,l))})}})},_createPeerReviewsForGroups=function(a,b,c,d,e,f,g,h,i){$(".peer-review-list").html(""),$("#progress").show();for(var j=0,k=0,l=[],m=0,n=0,o=0;o<e.length;o++){$("#bar").width("0%"),l=[],$(".progress-info").html("Finner innleveringene for gruppe ".concat(o+1," av ").concat(e.length));for(var p=0;p<d.length;p++)for(var q=0;q<e[o].length;q++)n=100/d.length*p+"%",$("#bar").width(n),d[p].user_id==e[o][q].id&&l.push(d[p]);if(c>l.length-1)m+=l.length,alert("For mange gjennomganger i forhold til antall besvarelser for gruppe ".concat(f[o].text));else{$(".progress-info").html("Tildeler hverandrevurderinger..."),$("#bar").width(0);for(var r=0;r<c;r++)for(var s=0;s<l.length;s++){k=s+1+r,k>=l.length&&(k-=l.length);for(var t=l[k].user_id,u=0;u<c;u++)for(var v=0;v<g.length;v++)(g[v].assessor_id==t&&g[v].user_id==l[s].user_id||t==l[s].user_id)&&(k++,k>=l.length&&(k-=l.length),t=l[k].user_id);h[t]<c&&i[l[s].user_id]<c?(h[t]++,i[l[s].user_id]++,mmooc.api.createPeerReview(a,b,l[s].id,t,function(a){_readOnlyError("asyncsDone"),j++,n=100/(c*d.length)*j+"%",$("#bar").width(n),j==d.length*c-m&&($("#progress").hide(),_listPeerReviewsForGroup(f,b),m>0&&alert("Klarte ikke tildele hverandrevurderinger for ".concat(m," studenter. (Studentene har allerede nok hverandrevurderinger eller hverandrevurderere.)")))})):(m++,j==d.length*c-m&&($("#progress").hide(),_listPeerReviewsForGroup(f,b),m>0&&alert("Klarte ikke tildele hverandrevurderinger for ".concat(m," studenter. (Studentene har allerede nok hverandrevurderinger eller hverandrevurderere.)"))))}}}},_isNormalInteger=function(a){return/^\+?(0|[1-9]\d*)$/.test(a)},_showInput=function(){$(".peer-review-create").html("<div class='input-wrapper'><input type='text' value='".concat(mmooc.settings.defaultNumberOfReviews,"' style='width:25px;' class='number-of-reviews'>\n\t\t\t\tgjennomganger per bruker<br><input type='button' value='Tildel hverandrevurderinger' class='button btn-create-pr'></div>"))},{run:function(){return _renderView()}}},ListStudentProgress=function(){var a=function(a){return console.error("error calling api",a)};return _renderView=function(){mmooc.api.getCoursesForUser(function(b){_render("powerfunctions/student-progress","List student progress by section",{courses:b}),$("#mmpf-course-select").change(function(){var a=$("#mmpf-course-select option:selected").val(),b={per_page:999};mmooc.api.getSectionsForCourse(a,b,function(a){$(".step-2").css("display","list-item"),$(".step-3").css("display","none");var b="".concat(b,"<option value=''>Choose a section</option>");a.forEach(function(a){return b="".concat(b,'<option value="').concat(i,'">').concat(a.name,"</option>")}),$("#mmpf-section-select").html(b),$(".student-progress-table").html("")})}),$("#mmpf-section-select").change(function(){var b=$("#mmpf-course-select option:selected").val();mmooc.api.getModulesForCourseId(function(a){$(".step-3").css("display","list-item");var b="".concat(b,"<option value=''>Choose a module</option>");a.forEach(function(a){return b="".concat(b,'<option value="').concat(a.id,'">').concat(a.name,"</option>")}),$("#mmpf-module-select").html(b),$(".student-progress-table").html("")},a,b)}),$("#mmpf-module-select").change(function(){_printStudentProgressForSection(),$(".student-progress-table").html("")})})},_printStudentProgressForSection=function(){$("#progress").hide();var b=$("#mmpf-course-select option:selected").val(),c=$("#mmpf-module-select option:selected").val(),d=$("#mmpf-section-select option:selected").val(),e={per_page:999,include:["students"]},f={per_page:999},g="<table><tr><th>Navn</th>",h=0;mmooc.api.getItemsForModuleId(function(i){i.forEach(function(a){return g="".concat(g,"<th>").concat(a.title,"</th>")}),g="".concat(g,"</tr>"),mmooc.api.getSectionsForCourse(b,e,function(e){e[d].students.length<1&&$(".student-progress-table").html("Ingen studenter funnet i klasse ".concat(e[d].name));for(var i=0;i<e[d].students.length;i++)f={student_id:e[d].students[i].id,per_page:999},mmooc.api.getItemsForModuleId(function(a){
for(var b=0;b<e[d].students.length;b++)e[d].students[b].id==a[0].student_id&&(g="".concat(g,"<tr><td>").concat(e[d].students[b].name,"</td>"));a.length<1&&(g="".concat(g,"<td>Ingen krav</td>"));for(var c=0;c<a.length;c++)g="completion_requirement"in a[c]?a[c].completion_requirement.completed?"".concat(g,"<td class='ok' />"):"".concat(g,"<td class='nok' />"):"".concat(g,"<td>Ingen krav</td>");_readOnlyError("asyncsDone"),h++;var f=100/e[d].students.length*h+"%";$("#bar").width(f),$("#progress").show(),h==e[d].students.length&&($("#progress").hide(),$(".student-progress-table").html("".concat(g,"</table>")))},a,b,c,f),g="".concat(g,"</tr>")})},a,b,c,f)},{run:function(){_renderView()}}},Menu=function(){return _setUpClickHandlers=function(){$("#mmooc-pf-peer-review-btn").click(function(){(new AssignPeerReviewsForGroup).run()}),$("#mmooc-pf-student-progress-btn").click(function(){(new ListStudentProgress).run()})},{run:function(){try{_render("powerfunctions/mainteacher","Choose function"),_setUpClickHandlers()}catch(a){alert(a.message),console.log(a)}}}},{show:function(b){a=b,(new Menu).run()}}}(),this.mmooc=this.mmooc||{},this.mmooc.routes=function(){function a(a,b,c){this.paths=null!=a?a instanceof Array?a:[a]:null,this.queryStrings=null!=b?b instanceof Array?b:[b]:null,this.handler=c,this.isAlreadyHandled=!1}var b=[];return{addRouteForPath:function(c,d){b.push(new a(c,null,d))},addRouteForQueryString:function(c,d){b.push(new a(null,c,d))},addRouteForPathOrQueryString:function(c,d,e){b.push(new a(c,d,e))},performHandlerForUrl:function(a){for(var c=a.pathname,d=a.search,e=0;e<b.length;e++){var f=b[e];if(null!=f.paths)for(var g=0;g<f.paths.length;g++)f.paths[g].test(c)&&!f.isAlreadyHandled&&(f.hasQueryString=d.length,f.path=c,f.isAlreadyHandled=!0,console.log("Handle route: "+f.paths[g]),f.handler());if(null!=f.queryStrings)for(var h=0;h<f.queryStrings.length;h++)if(f.queryStrings[h].test(d)&&!f.isAlreadyHandled)return f.isAlreadyHandled=!0,console.log("Handle query string: "+f.queryStrings[h]),void f.handler()}}}}(),"undefined"!=typeof module&&null!==module&&(module.exports=this.mmooc.routes),Handlebars.registerHelper("lowercase",function(a){return(""+a).toLowerCase()}),Handlebars.registerHelper("uppercase",function(a){return(""+a).toUpperCase()}),Handlebars.registerHelper("percentage",function(a,b){return 0==b?0:Math.round(100*a/b)}),Handlebars.registerHelper("ifEquals",function(a,b,c){return a==b?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("getCourseUrl",function(){return mmooc.util.isAuthenticated()?"/courses/"+this.id:"/enroll/"+this.self_enrollment_code}),Handlebars.registerHelper("ifHasRole",function(a,b,c){for(var d=0;d<a.length;d++)if(a[d].role==b)return c.fn(this)}),Handlebars.registerHelper("ifGreaterThan",function(a,b,c){return a>b?c.fn(this):c.inverse(this)}),Handlebars.registerHelper("overrideIconClassByTitle",function(a){return a=a.toLowerCase(),-1!=a.indexOf("utmerkelse")?" mmooc-icon-badge":-1!=a.indexOf("video")?" mmooc-icon-video":-1!=a.indexOf("aktivitet")?" mmooc-icon-interactive":""}),Handlebars.registerHelper("ifIsPrincipal",function(a,b){if(mmooc.util.isTeacherOrAdmin())return b.fn(this);for(var c=0;c<a.length;c++)if(a[c].role==mmooc.settings.principalRoleType)return b.fn(this)}),Handlebars.registerHelper("ifIsIndented",function(a){return this.indent?a.fn(this):a.inverse(this)}),Handlebars.registerHelper("getPeerReviewWorkflowIconClass",function(a){return"assigned"==a?" warning":"completed"==a?" pass":""}),Handlebars.registerHelper("norwegianDateAndTime",function(a){var b=new Date(a).toString(" yyyy"),c=new Date(a).toString("dd. "),d=new Date(a).toString(" HH:mm"),e=parseInt(new Date(a).toString("M"),10);return c+mmooc.i18n.Months[e-1]+b+d}),Handlebars.registerHelper("getSubmissionAssessmentText",function(a){var b=a.length,c=0;return $.each(a,function(a,b){"completed"==b.workflow_state&&(c+=1)}),0===b?mmooc.i18n.SubmissionIsNotAssessed:b===c?1==c?mmooc.i18n.SubmissionIsAssessedByOne:mmooc.i18n.SubmissionIsAssessedByAll:c.toString()+" "+mmooc.i18n.OutOf+" "+b.toString()+" "+mmooc.i18n.SubmissionAssessmentsAreReady}),Handlebars.registerHelper("ifAtLeastOnePeerReviewIsComplete",function(a,b){var c=!1;return $.each(a,function(a,b){"completed"==b.workflow_state&&(c=!0)}),c?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("ifAllPeerReviewsAreComplete",function(a,b){var c=!0;return $.each(a,function(a,b){"completed"!=b.workflow_state&&(c=!1)}),c?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("getPathFromUrl",function(a){return a.split("?")[0]}),Handlebars.registerHelper("urlForCourseId",function(a){return"/courses/"+a}),Handlebars.registerHelper("urlForGroupId",function(a){return"/groups/"+a+"/discussion_topics"}),Handlebars.registerHelper("ifItemIsCompleted",function(a,b){return a&&a.completed?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("localize",function(a,b){return null!=mmooc.i18n[a]?mmooc.i18n[a]:a}),Handlebars.registerHelper("ifAllItemsCompleted",function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.completion_requirement&&!d.completion_requirement.completed)return b.inverse(this)}return b.fn(this)}),Handlebars.registerHelper("ifAllModulesCompleted",function(a,b){return mmooc.courseList.isCourseCompleted(a)?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("ifAllStudentModulesCompleted",function(a,b){return 100==mmooc.util.percentageProgress(a,!1)?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("percentageForModules",function(a){return mmooc.util.percentageProgress(a,!0)}),Handlebars.registerHelper("percentageForStudentModules",function(a){return mmooc.util.percentageProgress(a,!1)}),Handlebars.registerHelper("urlForFirstNoneCompletePrincipalItem",function(a){return mmooc.util.firstIncompleteItemHtmlUrl(a,!0)}),Handlebars.registerHelper("urlForFirstNoneCompleteItem",function(a){return mmooc.util.firstIncompleteItemHtmlUrl(a,!1)}),Handlebars.registerHelper("ifItemTypeDiscussion",function(a,b){return"Discussion"==a?b.fn(this):b.inverse(this)}),Handlebars.registerHelper("findRightUrlFor",function(a){return"Submission"===a.type?"/courses/"+a.course_id+"/grades":a.html_url}),Handlebars.registerHelper("checkReadStateFor",function(a){return mmooc.menu.checkReadStateFor(a)?"unread":""}),Handlebars.registerHelper("debug",function(a){console.log("Current Context"),console.log("===================="),console.log(this),a&&(console.log("Value"),console.log("===================="),console.log(a))}),this.mmooc=this.mmooc||{},this.mmooc.uidp=function(){var a=["openid","profile"],b="https://localhost/courses/1",c="udir.kompetanseportalen-local",d={scopes:{request:a},response_type:"id_token token"},e=new jso.JSO({providerID:"UIDP",client_id:c,redirect_uri:b,authorization:"https://uidp-dev.udir.no/connect/authorize"});return{getSilentOpts:function(){var a=JSON.parse(JSON.stringify(d));return a.request={prompt:"none"},a},getClient:function(){return e},updateStatus:function(a){var b=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];$("#uidpStatus").html(a),b&&$("#uidpStatus").append("<span class='loading-gif'></span>")},clearStatus:function(){$("#uidpStatus").html("")},updateContent:function(a){$("#uidpContent").html(a)},appendContent:function(a){$("#uidpContent").append(a)},clearContent:function(){$("#uidpContent").html(""),$("#uidpUserInfo").html("")},display:function(){$("#course_home_content").prepend("<div id='uidpStatus'/><div id='uidpUserInfo'/><div id='uidpContent'/><div id='uidpLoginInfo'/>");var a=this.getSilentOpts();mmooc.uidp.updateStatus("Sjekker forbindelse til uidp..."),this.token=e.checkToken(a),this.token?(console.log(this.token.access_token),this.tokenBelongsToLoggedInUser(function(a,b,c){if(a)mmooc.uidp.validToken();else{var d="Du er logget inn med "+b+" i Canvas og "+c.user.userid;c.user.userid_sec.length&&(d+="/"+c.user.userid_sec[0]),d+=" i uidp. Du m vre logget inn med samme bruker i de to systemene.",mmooc.uidp.updateStatus(d,!1),mmooc.uidp.printLogoutOptions()}})):this.hiddenIframeLogin()},displayUserInfo:function(){},validToken:function(){mmooc.uidp.displayUserInfo(),mmooc.uidp.printLogoutOptions()},getFeideIdFromuidpUserInfo:function(a){var b=a.indexOf(":")+1;return a.substr(b)},tokenBelongsToLoggedInUser:function(a){this.getUserInfo(function(b){mmooc.api.getUserProfile(function(c){var d=!1;if(c.login_id==b.user.userid)d=!0;else if(b.user.userid_sec.length){var e=b.user.userid_sec[0],f=mmooc.uidp.getFeideIdFromuidpUserInfo(e);c.login_id==f&&(d=!0)}a(d,c.login_id,b)})})},printLogoutOptions:function(){$("#uidpLoginInfo").html("<div><button class='button' id='uidpWipeToken'>Logg ut av uidp</button></div>"),$(document).on("click","#uidpWipeToken",function(a){mmooc.uidp.wipeToken(),mmooc.uidp.clearStatus(),mmooc.uidp.clearContent(),mmooc.uidp.printLoginOptions()})},printLoginOptions:function(){var a=mmooc.util.renderTemplateWithData("uidp",{});$("#uidpLoginInfo").html(a),$(document).off("click","#uidpPopupLogin"),$(document).on("click","#uidpPopupLogin",function(a){mmooc.uidp.authorizePopup()})},_get:function(a,b){var c=this;$.ajax({url:a,beforeSend:function(a){a.setRequestHeader("Authorization","Bearer "+c.token.access_token)},success:function(a){b(a)},error:function(a,b,d){var e="Det oppstod en feil:"+d;console.log(e),mmooc.uidp.clearStatus(),c.wipeToken(),c.printLoginOptions()}})},_post:function(a,b,c){var d=this;$.ajax({type:"POST",url:a,beforeSend:function(a){a.setRequestHeader("Authorization","Bearer "+d.token.access_token)},data:b,success:function(a){c(a)},error:function(a,b,c){var d="Det oppstod en feil:"+c;alert(d),console.log(d)}})},getUserInfo:function(a){this._get("https://uidp-api-dev.udir.no/Account",a)},wipeToken:function(){e.wipeTokens()},authorizePopup:function(){var b=this,c={scopes:{request:a},response_type:"id_token token"};e.setLoader(jso.Popup),e.getToken(c).then(function(a){console.log("I got the token: "+a.access_token),console.log("I got the idtoken: "+a.id_token),b.token=a,b.validToken()}).catch(function(a){console.error("Error from popup loader",a)})},login:function(){window.loginType="login";e.getToken(d);e.setLoader(jso.HTTPRedirect),e.getToken(d).then(function(a){dashboard.dataporten.valideToken(),console.log("I got the token: ",a),console.log("I got the idtoken: "+a.id_token)})},hiddenIframeLogin:function(){var a=this,b=this.getSilentOpts();e.setLoader(jso.IFramePassive),e.getToken(b).then(function(b){console.log("I got the token: ",b),console.log("I got the idtoken: "+b.id_token),a.token=b,a.validToken()}).catch(function(b){console.log("Error from passive loader",b),mmooc.uidp.clearStatus(),a.printLoginOptions()})}}}(),this.mmooc=this.mmooc||{},this.mmooc.util=function(){return{courseListEnum:{normalCourse:1,allCoursesList:2,myCoursesList:3,dataportenCallback:4,uidpCallback:5},mmoocLoadScript:function(a){var b=document.createElement("script");b.setAttribute("charset","UTF-8"),b.setAttribute("src",a),document.body.appendChild(b)},renderTemplateWithData:function(a,b){var c="";try{c=mmooc.templates[a](b)}catch(a){console.log(a)}return c},getPageTitleBeforeColon:function(){var a=document.title;return a.indexOf(":")&&(a=a.substring(0,a.indexOf(":"))),a},getPageTitleAfterColon:function(){var a=document.title;return a.indexOf(":")&&(a=a.substring(a.indexOf(":")+1,a.length)),a},filterCourse:function(a){return!this.mmooc.settings.filterCourses||this.mmooc.settings.filterCoursesOnAccountId.includes(a.account_id)},filterSearchAllCourse:function(a){return!this.mmooc.settings.filterCourses||this.mmooc.settings.filterCoursesOnAccountId.includes(a.course.account_id)},callWhenElementIsPresent:function(a,b){var c=setInterval(function(){var d=a;$(d).length&&(clearInterval(c),b())},100)},arraySorted:function(a,b){return"[object Array]"===Object.prototype.toString.call(a)&&b?a.sort(function(a,c){if(a.hasOwnProperty(b)&&c.hasOwnProperty(b)){var d=a[b].toLocaleLowerCase(),e=c[b].toLocaleLowerCase();return d.localeCompare(e,"nb",{usage:"sort"})}return 0}):a},goBack:function(a){var b=window.location.hash;return history.back(),window.location.hash!==b||"string"==typeof document.referrer&&""!==document.referrer||window.setTimeout(function(){window.location.href="https://kompetanseudirno.azureedge.net/udirdesign"},1e3),a&&(a.preventDefault&&a.preventDefault(),a.preventPropagation&&a.preventPropagation()),!1},adaptHeightToIframeContentForId:function(a,b){var c=Number(document.getElementById(b).contentWindow.document.body.scrollHeight)+20;document.getElementsByClassName(a)[0].style.height=c+"px"},isEnrolledAsStudent:function(a){for(var b=0;b<a.length;b++)if("StudentEnrollment"==a[b].role)return!0;return!1},isEnrolledAsObserver:function(a){for(var b=0;b<a.length;b++)if("ObserverEnrollment"==a[b].role)return!0;return!1},enrollmentsHasRoleInCourse:function(a,b){for(i=0;i<a.length;i++){if(a[i].role==b)return!0}return!1},hasRoleInCourse:function(a,b,c){return function(b,c){mmooc.api.getUsersEnrollmentsForCourse(a,function(a){b(mmooc.util.enrollmentsHasRoleInCourse(a,c))})}(c,b)},isTeacherOrAdmin:function(){var a=mmooc.api.getRoles();return null!=a&&(-1!=a.indexOf("teacher")||-1!=a.indexOf("admin"))},isObserver:function(a){if(a&&a.enrollments)return this.isEnrolledAsObserver(a.enrollments)},isEnrolledWithRole:function(a,b){if(a&&a.enrollments)for(var c=0;c<a.enrollments.length;c++)if(a.enrollments[c].role==b)return!0;return!1},isPfDKCourse:function(a){return!!(a&&a.course_code.indexOf("::PfDK::")>-1)},isPrincipal:function(){return this.isTeacherOrAdmin()||this.isEnrolledWithRole(mmooc.util.course,mmooc.settings.principalRoleType)},isRoleBasedCourse:function(a){return!!(a&&a.course_code.indexOf("::Role::")>-1)},isMMOOCLicense:function(){return!!(mmooc.util.course&&mmooc.util.course.course_code.indexOf("::MMOOCLICENSE::")>-1)},isUnmaintained:function(a){if(a)for(var b=a.course_code.split("::"),c=0;c<b.length;c++)if("UNMAINTAINED"==b[c])return b[c+1];return""},isActiveCourseRoleBased:function(){return mmooc.util.isRoleBasedCourse(mmooc.util.course)},isAuthenticated:function(){return null!==mmooc.api.getRoles()},firstIncompleteItemHtmlUrl:function(a,b){var c=null,d=null;if(null!=a&&void 0!=a&&a.length>0)for(var e=0;e<a.length;e++){var f=a[e];if(!c&&f.html_url&&(c=f.html_url),f.completion_requirement&&(!f.indent||b)&&(d||(d=f),!f.completion_requirement.completed))return f.html_url}return d?d.html_url:c},percentageProgress:function(a,b){for(var c=0,d=0,e=0;e<a.length;e++)for(var f=a[e],g=0;g<f.items.length;g++){var h=f.items[g];h.indent&&!b||h.completion_requirement&&(c++,h.completion_requirement.completed&&d++)}return Math.round(100*d/c)},updateProgressForRoleBasedCourses:function(a){for(var b=function(a){return console.error("error calling api",a)},c=0;c<a.length;c++){var d=a[c];mmooc.util.isRoleBasedCourse(d)&&!mmooc.util.isEnrolledWithRole(d,mmooc.settings.principalRoleType)&&mmooc.api.listModulesForCourse(function(a){return function(b){var c=!1,d=mmooc.util.percentageProgress(b,c),e="#course_"+a+"> div > div.mmooc-course-list-progress > div ";$(e+" > div").attr("style","width:"+d+"%; -webkit-transition: width 2s; transition: width 2s;"),100==d&&$(e).addClass("mmooc-progress-bar-done")}}(d.id),b,d.id)}},setGlobalPeerReviewButtonState:function(){1==mmooc.settings.disablePeerReviewButton&&$(".assignments #right-side :submit").prop("disabled",!0)},formattedDate:function(a){var a=new Date(a),b=mmooc.util.getMonthShortName(a);return a.getDate()+" "+b+", "+a.getFullYear()+" - "+a.getHours()+":"+(a.getMinutes()<10?"0":"")+a.getMinutes()},getWeekdayShortName:function(a){return["s","ma","ti","on","to","fr","l"][a.getDay()]},getMonthShortName:function(a){return["jan","feb","mar","apr","mai","jun","jul","aug","sep","okt","nov","des"][a.getMonth()]},getCourseCategories:function(a){for(var b=[],c=!1,d=0;d<a.length;d++){var e=mmooc.util.getCourseCategory(a[d].course_code);-1==b.indexOf(e)&&("Andre"==e?c=!0:b.push(e))}return c&&b.push("Andre"),b},sortCourses:function(a){return a.sort(function(a,b){var c=a.course_code.split("::");if(c.length<2)return 1;var d=c[c.length-1],e=b.course_code.split("::");return e.length<2?-1:d<e[e.length-1]?-1:1})},getCoursesCategorized:function(a,b){for(var c=[],d=0;d<b.length;d++){for(var e=[],f=0;f<a.length;f++){var g=mmooc.util.getCourseCategory(a[f].course_code);b[d]==g&&e.push(a[f])}var h={title:b[d],courses:e};c.push(h)}return c},getCourseCategory:function(a){var b="Andre";return a&&a.indexOf("::")>-1&&(b=a.substring(0,a.indexOf("::"))),b},getToolsInLeftMenu:function(a){var b=!1,c=[],d="Verkty",e="";return $("#section-tabs .section > a").each(function(){var f=$(this).attr("class");if(b&&"settings"!=f){var g=$(this).attr("href"),h=$(this).attr("title"),i=!1;g==a&&(i=!0,d=h,e=g),c.push({activeTool:i,href:g,title:h})}else"modules"==f&&(b=!0)}),{activeToolName:d,activeToolPath:e,toolList:c}},debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},filter:function(a,b){var c=a.length;if("function"!=typeof b)throw new TypeError;for(var d=new Array,e=arguments[1],f=0;f<c;f++)if(f in a){var g=a[f];b.call(e,g,f,a)&&d.push(g)}return d},urlHashToObject:function(){if(""===document.location.hash)return{};var a=location.hash.substring(1);return JSON.parse('{"'+a.replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(a,b){return""===a?b:decodeURIComponent(b)})},getLinkToAvailableCourses:function(){return"/search/all_courses"+mmooc.hrefQueryString},isCourseFrontpageForAllCoursesList:function(){return!1}}}(),this.mmooc=this.mmooc||{},this.mmooc.settings={CanvaBadgeProtocolAndHost:"https://canvabadges-beta-iktsenteret.bibsys.no",useCanvaBadge:!1,defaultNumberOfReviews:1,useDataportenGroups:!1,filterCourses:!0,filterCoursesOnAccountId:[99,100,102,103,137,138,139,145],disablePeerReviewButton:!1,principalRoleType:"Skoleleder",removeGlobalGradesLink:!0,removeGroupsLink:!0,displayGroupsTab:!1,displayDiscussionsTab:!1,displayCallForAssistanceButtonInGroupDisccussions:!1,privacyPolicyLink:"https://kompetanseudirno.azureedge.net/udirdesign/privacypolicy.html",contactPoint:"kompetansesupport@udir.no",platformName:"UDIR - kompetanseplattform",homeOrganization:"Udir.no",aboutThePlatform:"https://kompetanseudirno.azureedge.net/udirdesign/omkompetanseudirno.html"},this.mmooc=this.mmooc||{},void 0===this.mmooc.i18n&&("nn"==mmooc.api.getLocale()?this.mmooc.i18n={AllAvailableCoursesIngress:"Oversikt over alle kompetansepakker du er meldt p og som du kan melde deg p.",DropCourseDialogText:"Trykk OK for  melde deg av kompetansepakken ",NoCoursesInfo:"Det finst ingen kompetansepakker du kan registrere deg p for augeblikket",CourseContinue:"Fortsette",CourseRegisterWhenAuthenticated:"Meld deg p",YouAreRegisteredToXCourses:function(a){return"du er registrert i ".concat(a," kompetansepakker")},CoursesAmount:function(a){return"".concat(a," kompetansepakker")},OpenCoursesGroup:"pne",CloseCoursesGroup:"Lukk",LogIn:"Logg inn",LogInPopup:"Logg inn p kompetanseportalen",LogInCanvas:"Har ikke Feide",JoinCourseDialogText:"Du kan melde deg p kompetansepakken igjen seinare om du vil ",DropCourse:"Meld deg av kompetansepakken",CreateAccountTitle:"Har du ikkje konto?",CreateAccountSubtitle:"Klikk her for  lage ein",Course:"Kompetansepakke",CourseDefinite:"Kompetansepakken",CoursePlural:"Kompetansepakker",CourseProgressionTitle:"Din progresjon i kompetansepakken:",GoToCourse:"G til kompetansepakken",GoToModule:"G til modul",BackToCoursePage:"Tilbake til forsida",AddACourse:"Legg til ein kompetansepakke",Module:"Modul",ModulePlural:"Modular",CourseModules:"Kompetansepakkemodular",Assignment:"Oppgve",Discussion:"Diskusjon",Quiz:"Prve",Page:"Innhaldsside",ExternalUrl:"Ekstern lenke",ExternalTool:"Eksternt verkty",File:"Fil",Announcement:"Kunngjering",DiscussionTopic:"Diskusjon",Conversation:"Innboksmelding",Message:"Oppgvevarsel",Submission:"Innlevering",AssessmentRequest:"Vurderingsfrespurnad",Conference:"Conference",Collaboration:"Collaboration",LinkBack:"Tilbake til frre side",Badgesafe:"Utmerkingar",PeerReview:"Kvarandrevurdering",PeerReviewer:"Fagfellevurdering",Delivery:"Innleveringsdetaljar",DetailsAboutYourDelivery:"Detaljar om innleveringa di",DetailsAboutDelivery:"Detaljar om innlevering",SubmissionIsNotAssessed:"Oppgva er ikkje vurdert",SubmissionIsAssessedByOne:"Vurderinga er klar",SubmissionIsAssessedByAll:"Alle vurderingar er klare",SubmissionAssessmentsAreReady:"vurderingar er klare",GroupGetInTouchSubject:"nsker kontakt",eventsAndDeadlinesTitle:"Viktige datoar",WeHaveAQuestionToTeacherInTheDiscussion:"Vi har eit sprsml til rettleiar i diskusjonen",CallForInstructorHoverOverText:"Sender ei melding til rettleiar om at de treng hjelp i denne konkrete gruppediskusjonen. Treng du personleg rettleiing: send melding til din rettleiar i innboks.",NoTeacherFeedbackLink:"No teacher_feedback link. Does the help menu have a link to send feedback to the teacher?",NoEnrollments:"Velkommen til vr kompetanseplattform. Du er ikkje pmeldt nokon kompetansepakker end. Klikk p knappen nedanfor for  sj tilgjengelege kompetansepakker.",OutOf:"av",Months:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"]}:this.mmooc.i18n={AllAvailableCoursesIngress:"Oversikt over alle kompetansepakker du er meldt p og som du kan melde deg p.",DropCourseDialogText:"Trykk OK for  melde deg av kompetansepakken ",NoCoursesInfo:"Det er ingen kompetansepakker du kan registrere deg p for yeblikket",EnrollButton:"Join this Course",CourseContinue:"Fortsette",CourseRegisterWhenAuthenticated:"Meld deg p",YouAreRegisteredToXCourses:function(a){return"du er registert i ".concat(a," kompetansepakker")},CoursesAmount:function(a){return"".concat(a," kompetansepakker")},OpenCoursesGroup:"pne",CloseCoursesGroup:"Lukk",LogInPopup:"Logg inn p kompetanseportalen",LogIn:"Logg inn",LogInCanvas:"Har ikke Feide",JoinCourseDialogText:"Du kan melde deg p kompetansepakken igjen senere om du vil ",DropCourse:"Meld deg av kompetansepakken",CreateAccountTitle:"Har du ikke konto?",CreateAccountSubtitle:"Klikk her for  lage en",Course:"Kompetansepakke",CourseDefinite:"Kompetansepakken",CoursePlural:"Kompetansepakker",CourseProgressionTitle:"Din progresjon i kompetansepakken:",GoToCourse:"G til kompetansepakken",GoToModule:"G til modul",BackToCoursePage:"Tilbake til forsiden",AddACourse:"Legg til en kompetansepakke",Module:"Modul",ModulePlural:"Moduler",CourseModules:"Kompetansepakkemoduler",Assignment:"Oppgave",Discussion:"Diskusjon",Quiz:"Prve",Page:"Innholdsside",ExternalUrl:"Ekstern lenke",ExternalTool:"Eksternt verkty",File:"Fil",Announcement:"Kunngjring",DiscussionTopic:"Diskusjon",Conversation:"Innboksmelding",Message:"Oppgavevarsel",Submission:"Innlevering",AssessmentRequest:"Vurderingsforesprsel",Conference:"Conference",Collaboration:"Collaboration",LinkBack:"Tilbake til forrige side",Badgesafe:"Utmerkelser",PeerReview:"Hverandrevurdering",PeerReviewer:"Hverandrevurdering",Delivery:"innlevering",DetailsAboutYourDelivery:"Detaljer om din innlevering",DetailsAboutDelivery:"Detaljer om innlevering",SubmissionIsNotAssessed:"Oppgaven er ikke vurdert",SubmissionIsAssessedByOne:"Vurderingen er klar",SubmissionIsAssessedByAll:"Alle vurderinger er klare",SubmissionAssessmentsAreReady:"vurderinger er klare",GroupGetInTouchSubject:"nsker kontakt",eventsAndDeadlinesTitle:"Viktige datoer",WeHaveAQuestionToTeacherInTheDiscussion:"Vi har et sprsml til veileder i diskusjonen",CallForInstructorHoverOverText:"Sender en melding til veileder om at dere trenger hjelp i denne konkrete gruppediskusjonen. Trenger du personlig veiledning: send melding til din veileder i innboks.",NoTeacherFeedbackLink:"No teacher_feedback link. Does the help menu have a link to send feedback to the teacher?",NoEnrollments:"Velkommen til vr kompetanseplattform. Du er ikke pmeldt noen kompetansepakker enda. Klikk p knappen nedenfor for  se tilgjengelige kompetansepakker.",OutOf:"av",Months:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"]}),jQuery(function(a){mmooc.routes.addRouteForPath(/\/$/,function(){"?mmpf"===document.location.search?mmooc.powerFunctions.show("wrapper"):window.location.href="/courses"}),mmooc.routes.addRouteForQueryString(/invitation=/,function(){}),mmooc.routes.addRouteForPath(/\/login\/canvas$/,function(){mmooc.utilRoot.redirectFeideAuthIfEnrollReferrer()}),mmooc.routes.addRouteForPath(/\/login$/,function(){a("#register_link").html("<i>Trenger du en konto?</i><b>Klikk her.</b>")}),mmooc.routes.addRouteForPath(/\/courses$/,function(){mmooc.utilRoot.redirectToEnrollIfCodeParamPassed(),mmooc.menu.hideRightMenu(),mmooc.courseList.listCourses("content",mmooc.courseList.showAddCourseButton)}),mmooc.routes.addRouteForPath(/\/courses\/\d+/,function(){course=mmooc.util.course;var a=mmooc.util.isAuthenticated()&&mmooc.util.isObserver(course),b=mmooc.util.isPfDKCourse(course),c=mmooc.util.isUnmaintained(course);(a||b||c)&&mmooc.pages.showInformationPane(a,b,c)}),mmooc.routes.addRouteForPath(/\/courses\/\d+$/,function(){mmooc.groups.interceptLinksToGroupPage(),mmooc.coursePage.showCourseInvitation();var b=mmooc.util.isCourseFrontpageForAllCoursesList();if(b==mmooc.util.courseListEnum.allCoursesList)return mmooc.menu.hideRightMenu(),mmooc.enroll.printAllCoursesContainer(),mmooc.enroll.printAllCourses(),a("body").removeClass("home"),null;if(b==mmooc.util.courseListEnum.myCoursesList)return mmooc.menu.hideRightMenu(),mmooc.courseList.listCourses("content",mmooc.courseList.showAddCourseButton),null;if(b==mmooc.util.courseListEnum.dataportenCallback)return window.opener&&(a("#application").html('Du er n logget inn i dataporten.<button id="dataportenLoggedIn">OK</button>'),window.opener.popupCompleted(),a(document).on("click","#dataportenLoggedIn",function(a){window.close()})),console.log(document.location.href),null;if(b==mmooc.util.courseListEnum.uidpCallback)return window.opener&&(a("#application").html('Du er n logget inn i UIDP.<button id="uidpLoggedIn">OK</button>'),window.opener.popupCompleted(),a(document).on("click","#uidpLoggedIn",function(a){window.close()})),console.log(document.location.href),null;var c=mmooc.api.getCurrentCourseId(),d=document.location.search;if("?allcanvabadges"===d){var c=mmooc.api.getCurrentCourseId();mmooc.menu.showCourseMenu(c,"Utmerkelser","Utmerkelser");var e='<iframe allowfullscreen="true" height="680" id="tool_content" mozallowfullscreen="true" name="tool_content" src="'+mmooc.settings.CanvaBadgeProtocolAndHost+"/badges/course/"+c+'" tabindex="0" webkitallowfullscreen="true" width="100%"></iframe>';a("#content").append(e)}else{var d=document.location.search;if("?dataportengroups=1"===d&&mmooc.settings.useDataportenGroups)mmooc.menu.showCourseMenu(c,"Grupper",mmooc.util.getPageTitleBeforeColon()),mmooc.dataporten.display();else if(mmooc.menu.showCourseMenu(c,"Forside",null),mmooc.api.usesFrontPage()){if(!mmooc.util.isTeacherOrAdmin()){var f=a("#wiki_page_show");f.length&&f.hide(),mmooc.coursePage.listModulesAndShowProgressBar()}}else mmooc.coursePage.listModulesAndShowProgressBar()}mmooc.announcements.printAnnouncementsUnreadCount(),mmooc.coursePage.replaceUpcomingInSidebar()&&mmooc.coursePage.printDeadlinesForCourse(),mmooc.coursePage.overrideUnregisterDialog()}),mmooc.routes.addRouteForPath(/\/search\/all_courses$/,function(){mmooc.enroll.printAllCoursesContainer(),mmooc.enroll.printAllCourses(),mmooc.enroll.goToAllCourses()}),mmooc.routes.addRouteForPath(/\/courses\/\d+\/settings$/,function(){mmooc.coursesettings.addSanityCheckButton(),mmooc.coursesettings.addListSectionsButton(),mmooc.coursesettings.addListUsersButton(),mmooc.coursesettings.addListGroupsButton(),mmooc.coursesettings.addListAssignmentsButton()}),mmooc.routes.addRouteForPath(/\/profile\/settings$/,function(){var a=mmooc.util.renderTemplateWithData("notifications",{});mmooc.menu.showLeftMenu(),document.getElementById("confirm_email_channel").insertAdjacentHTML("beforebegin",a)}),mmooc.routes.addRouteForPath(/\/courses\/\d+\/announcements$/,function(){var a=mmooc.api.getCurrentCourseId();mmooc.menu.showCourseMenu(a,"Kunngjringer",mmooc.util.getPageTitleBeforeColon()),mmooc.api.getModulesForCurrentCourse(function(a){mmooc.discussionTopics.printDiscussionUnreadCount(a)}),mmooc.announcements.printAnnouncementsUnreadCount(),mmooc.announcements.setAnnouncementsListUnreadClass()}),mmooc.routes.addRouteForPath(/\/courses\/\d+\/discussion_topics$/,function(){var a=mmooc.api.getCurrentCourseId();mmooc.menu.showCourseMenu(a,"Diskusjoner",mmooc.util.getPageTitleBeforeColon()),mmooc.discussionTopics.setDiscussionsListUnreadClass(),mmooc.discussionTopics.insertSearchButton(),mmooc.discussionTopics.hideUnreadCountInDiscussionList(),mmooc.api.getModulesForCurrentCourse(function(a){mmooc.discussionTopics.printDiscussionUnreadCount(a,"discussionslist")}),mmooc.announcements.printAnnouncementsUnreadCount()}),mmooc.routes.addRouteForPath(/\/courses\/\d+\/external_tools/,function(){var a=mmooc.api.getCurrentCourseId();mmooc.menu.showCourseMenu(a,this.path,"Verkty")}),mmooc.routes.addRouteForPath(/\/courses\/\d+\/groups$/,function(){mmooc.groups.interceptLinksToGroupPage();var a=mmooc.api.getCurrentCourseId();mmooc.menu.showCourseMenu(a,"Grupper",mmooc.util.getPageTitleBeforeColon()),mmooc.api.getModulesForCurrentCourse(function(a){mmooc.discussionTopics.printDiscussionUnreadCount(a)}),mmooc.announcements.printAnnouncementsUnreadCount()}),mmooc.routes.addRouteForPath(/\/courses\/\d+\/users$/,function(){var a=mmooc.api.getCurrentCourseId();mmooc.menu.showCourseMenu(a,"",mmooc.util.getPageTitleBeforeColon())}),mmooc.routes.addRouteForPath(/\/groups\/\d+$/,function(){var a=mmooc.api.getCurrentCourseId();mmooc.menu.showCourseMenu(a,"Grupper",mmooc.util.getPageTitleBeforeColon())}),mmooc.routes.addRouteForPath(/\/groups\/\d+\/discussion_topics$/,function(){var a=mmooc.api.getCurrentCourseId();if(mmooc.util.isTeacherOrAdmin()&&mmooc.groups.interceptLinksToTeacherGroupPage(),null==a){var b=mmooc.api.getCurrentGroupId();null!=b&&mmooc.api.getGroup(b,function(a){var b=a.course_id;mmooc.menu.showCourseMenu(b,"Grupper",mmooc.util.getPageTitleAfterColon()),mmooc.groups.showGroupHeader(a.id,b)})}else mmooc.menu.showCourseMenu(a,"Grupper",mmooc.util.getPageTitleAfterColon()),mmooc.groups.showGroupHeader(b,a)}),mmooc.routes.addRouteForPath([/\/groups\/\d+\/discussion_topics\/\d+$/,/\/groups\/\d+\/discussion_topics\/new$/],function(){if(mmooc.menu.showDiscussionGroupMenu(),!this.hasQueryString){var a=mmooc.api.getCurrentCourseId();if(a)mmooc.menu.showBackButton("/courses/"+a+"/discussion_topics","Tilbake til diskusjoner");else{var b=mmooc.api.getCurrentGroupId();null!=b&&mmooc.api.getGroup(b,function(a){a.course_id;mmooc.menu.showBackButton("/groups/"+a.id+"/discussion_topics","Tilbake til gruppeside")})}}mmooc.util.isTeacherOrAdmin()?mmooc.groups.interceptLinksToTeacherGroupPage():(mmooc.menu.hideRightMenu(),mmooc.menu.hideSectionTabsHeader())}),mmooc.routes.addRouteForPath([/\/courses\/\d+\/discussion_topics\/\d+/,/\/courses\/\d+\/discussion_topics\/new/],function(){var b=mmooc.util.getPageTitleAfterColon(),c=mmooc.api.getCurrentCourseId();if(mmooc.util.hasRoleInCourse(c,"TeacherEnrollment",function(b){if(!b){var c=mmooc.api.getCurrentCourseId(),d=mmooc.api.getCurrentTypeAndContentId().contentId;mmooc.api.isGroupDiscussion(c,d,function(b){b&&(a(".discussion-section").hide(),a("#discussion-toolbar").hide(),a(".discussion-entry-reply-area").hide(),a("#discussion-managebar").html('<div class="uob-warning">                 Dette er en gruppediskusjon, men du er ikke medlem i noen gruppe og kan derfor ikke delta.                  G tilbake til forsiden og velg fanen "Rolle og grupper".</div>'))})}}),!mmooc.util.isTeacherOrAdmin()){mmooc.menu.hideRightMenu();var d=mmooc.api.getCurrentTypeAndContentId().contentId;mmooc.api.getDiscussionTopic(c,d,mmooc.discussionTopics.setDiscussionTopicPubDate)}
mmooc.api.currentPageIsAnnouncement()?(mmooc.menu.showCourseMenu(c,"Kunngjringer",b),mmooc.menu.showBackButton("/courses/"+c+"/announcements","Tilbake til kunngjringer"),mmooc.announcements.addMarkAsReadButton()):null==mmooc.api.getCurrentModuleItemId()&&mmooc.menu.showBackButton("/courses/"+c+"/discussion_topics","Tilbake til diskusjoner")}),mmooc.routes.addRouteForPathOrQueryString([/\/courses\/\d+\/assignments\/\d+/,/\/courses\/\d+\/pages\/.*$/,/\/courses\/\d+\/quizzes\/\d+/],/module_item_id=/,function(){mmooc.menu.showLeftMenu(),mmooc.menu.listModuleItems(),mmooc.pages.modifyMarkAsDoneButton(),mmooc.pages.duplicateMarkedAsDoneButton(),mmooc.groups.moveSequenceLinks(),mmooc.util.isTeacherOrAdmin()&&(mmooc.pages.addGotoModuleButton(),mmooc.pages.addStudentViewButton())}),mmooc.routes.addRouteForPath(/\/courses\/\d+\/assignments\/\d+/,function(){mmooc.pages.redesignAssignmentPage(),mmooc.util.setGlobalPeerReviewButtonState()}),mmooc.routes.addRouteForPath(/\/courses\/\d+\/assignments\/\d+\/submissions\/\d+/,function(){mmooc.pages.redesignPeerReviewAndOwnSubmissionDetailsPage()}),mmooc.routes.addRouteForPath(/\/courses\/\d+\/external_tools\/\d+$/,function(){function a(){function a(a){return a.substring(a.lastIndexOf("/")+1)}var b=mmooc.menu.extractBadgesLinkFromPage().url;return!!b&&a(b)===a(window.location.pathname)}if(a()){var b=mmooc.api.getCurrentCourseId();mmooc.menu.showCourseMenu(b,"Utmerkelser","Utmerkelser")}}),mmooc.routes.addRouteForPath(/\/courses\/\d+\/modules\/items\/\d+$/,function(){mmooc.menu.showLeftMenu(),mmooc.menu.listModuleItems()}),mmooc.routes.addRouteForPath([/\/pages/],function(){mmooc.util.callWhenElementIsPresent(".sikt-diploma-button",mmooc.greeting.enableGreetingButtonIfNecessary),mmooc.util.callWhenElementIsPresent(".new-sikt-diploma-button",mmooc.greeting.enableNewGreetingButtonIfNecessary);var b=mmooc.api.getCurrentCourseId();if(a("#kpas-lti-info").length){var c=function(a){return console.error("error calling api",a)};mmooc.api.getUserGroupsForCourse(b,function(b){b.length&&(a("#kpas-lti-info").html("Du har registrert rolle og grupper. Flott!"),a("#kpas-lti-info").show(),a("#kpas-lti-warning").hide())},c)}}),mmooc.routes.addRouteForQueryString(/enrolled=1/,function(){a(".ic-Self-enrollment-footer__Primary > a").each(function(){var b=a(this),c=b.attr("href");b.attr("href",c+mmooc.hrefQueryString)})});try{mmooc.footer.changeFooter(),mmooc.menu.renderLeftHeaderMenu(),mmooc.menu.showUserMenu(),mmooc.menu.renderUnauthenticatedMenu(),mmooc.menu.setMenuActiveLink(),mmooc.menu.showHamburger(),mmooc.menu.showMobileMenu()}catch(a){console.log(a)}try{if(mmooc.util.isAuthenticated()){var b=mmooc.api.getCurrentCourseId();b?mmooc.api.getCourse(b,function(a){mmooc.util.course=a,mmooc.routes.performHandlerForUrl(document.location)},function(a){console.error("error calling mmooc.api.getCourse("+b+")",a)}):mmooc.routes.performHandlerForUrl(document.location)}else mmooc.routes.performHandlerForUrl(document.location)}catch(a){console.log(a)}try{mmooc.nrk.init()}catch(a){console.log(a)}try{mmooc.menu.injectGroupsPage(),mmooc.groups.changeGroupListURLs(document.location.href),mmooc.pages.updateSidebarWhenMarkedAsDone(),mmooc.pages.updateSidebarWhenContributedToDiscussion(),mmooc.menu.alterCourseLink()}catch(a){console.log(a)}a("#application").show()}),$(function(){if(mmooc.settings.useCanvaBadge){var a,b=mmooc.settings.CanvaBadgeProtocolAndHost,c=!1;if(!b){$("script");$("script").each(function(){var a=$(this).attr("src");if(a&&a.match(/canvas_profile_badges/)){var c=a.split(/\//);b=c[0]+"//"+c[2]}var d=a&&a.match(/\?path_prefix=\/(\w+)/);d&&d[1]&&(b=b+"/"+d[1])})}b||console.log("CANVABADGES: Couldn't find a valid protocol and host. Canvabadges will not appear on profile pages until this is fixed.");var d=location.href.match(/\/(users|about)\/(\d+)$/);if(d||(d=location.href.match(/\/profile\/settings$/),c=!0),d&&b){console.log("CANVABADGES: This page shows badges! Loading..."),a=c?mmooc.api.getUser().id:d[2];var e=location.host,f=b+"/api/v1/badges/public/"+a+"/"+encodeURIComponent(e)+".json";$.ajax({type:"GET",dataType:"jsonp",url:f,success:function(c){if(console.log("CANVABADGES: Data retrieved!"),c.objects&&c.objects.length>0){console.log("CANVABADGES: Badges found! Adding to the page...");var d=$("<div/>",{style:"margin-bottom: 20px;"});d.append("<h2 class='border border-b'>Badges</h2>");for(idx in c.objects){var f=c.objects[idx],g=$("<div/>",{style:"float: left;"}),h=b+"/badges/criteria/"+f.config_id+"/"+f.config_nonce+"?user="+f.nonce,i=$("<a/>",{href:h});i.append($("<img/>",{src:f.image_url,style:"width: 72px; height: 72px; padding-right: 10px;"})),g.append(i),d.append(g)}d.append($("<div/>",{style:"clear: left"})),$("#edit_profile_form,fieldset#courses,.more_user_information + div, #update_profile_form").after(d)}else console.log("CANVABADGES: No badges found for the user: "+a+" at "+e)},error:function(a){console.log("CANVABADGES: Badges failed to load, API error response"),console.log(a)},timeout:5e3})}else console.log("CANVABADGES: This page doesn't show badges")}});
//# sourceMappingURL=mmooc-min.js.map